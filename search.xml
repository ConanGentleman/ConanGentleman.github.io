<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2024/07/21/hello-world-1/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">
  <script id="hbeData" type="hbeData" data-hmacdigest="48a0ae5effc070c82e44be4a84f8ae9a09954921e0e4136a68b7e5fd229605e4">8857952509ef9895f61625fe2d594ef339e937d6685a3f98341208c8d2d367f4dc0b58f485d52aa0392b14c338af3a49fa9334860d39e66200a503ef5c6f15e63ad2aba5b3bf18c0d6d9f7017f8db44c2c9343dded772edbc3c220543b5d966a4117eabff0585a2d555d0aad8bfd14e10eab5b64af4637f63aeb3e8dd9946bf6da6710df2eb5cb68d40344fab74bc207f2b3ab564720dd3bbdaf275382565b91fc09d67374a24e44135d9e7555af78484137904f464ddd94cb8db1eee25c0c9978eb6e799b1ad3780f520bf6b233d1743f3783536c51e859ec0ee37cfad84134b99bf5c26ed05c01a5b415dcecd23171</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <tags>
        <tag>ä½œä¸ºæ—¥è®°åŠ å¯†</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2024/07/20/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start" tabindex="-1">Quick Start</h2>
<h3 id="create-a-new-post" tabindex="-1">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server" tabindex="-1">Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files" tabindex="-1">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites" tabindex="-1">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
  </entry>
  <entry>
    <title>post</title>
    <url>/2024/08/13/QFramework-QFramework%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<p>test</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
  </entry>
  <entry>
    <title>è§£å†³Hexoå›¾ç‰‡ä¸æ˜¾ç¤ºçš„é—®é¢˜</title>
    <url>/2024/08/11/%E8%A7%A3%E5%86%B3Hexo%E5%9B%BE%E7%89%87%E4%B8%8D%E6%98%BE%E7%A4%BA%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>åœ¨æœ¬åœ°markdownä¸Šï¼Œç…§ç‰‡èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ˜¯éƒ¨ç½²åå´ä¸æ˜¾ç¤ºã€‚çœ‹äº†ä¸€ä¸‹<a href="https://hexo.io/zh-cn/docs/asset-folders">å®˜æ–¹æ–‡æ¡£</a>ï¼ŒHexo3ä»¥ä¸Šå¯ä»¥é€šè¿‡è®¾ç½®post_asset_folderæ¥è§£å†³ã€‚</p>
<span id="more"></span>
<ol>
<li>åœ¨Blogæ ¹ç›®å½•å®‰è£…æ’ä»¶ï¼š</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-<span class="selector-tag">image</span> <span class="attr">--save</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°post_asset_folderå¹¶é…ç½®</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>å¯ç”¨åï¼Œèµ„æºå›¾ç‰‡å°†ä¼šè¢«è‡ªåŠ¨è§£æä¸ºå…¶å¯¹åº”æ–‡ç« çš„è·¯å¾„ã€‚ ä¾‹å¦‚ï¼š image.jpg ä½ç½®ä¸º /2020/01/02/foo/image.jpg ï¼Œè¿™è¡¨ç¤ºå®ƒæ˜¯ /2020/01/02/foo/ æ–‡ç« çš„ä¸€å¼ èµ„æºå›¾ç‰‡ï¼Œ ![](image.jpg) å°†ä¼šè¢«è§£æä¸º &lt;img src=â€œ/2020/01/02/foo/image.jpgâ€&gt; ã€‚</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo+nextåšå®¢æ­å»ºå¹¶éƒ¨ç½²åˆ°github</title>
    <url>/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/</url>
    <content><![CDATA[<h1 id="%E4%B8%80%E3%80%81%E5%AE%89%E8%A3%85%E4%B8%8B%E8%BD%BDnode.js%E3%80%81vscode%E3%80%81git" tabindex="-1">ä¸€ã€å®‰è£…ä¸‹è½½Node.jsã€Vscodeã€Git</h1>
<p>1.1 å®‰è£…å¯ä»¥çœ‹è¿™ç¯‡åšæ–‡çš„ç¬¬2ç‚¹ ã€Šåœ¨Windowsç³»ç»Ÿä¸‹å®‰è£…Node.jsã€‹çš„1-6ç‚¹ï¼ˆè¡¥å……é™¤å¤–ï¼‰ï¼š<a href="https://blog.csdn.net/loze/article/details/94208742">https://blog.csdn.net/loze/article/details/94208742</a></p>
<span id="more"></span>
<p>1.2 è¡¥å……ï¼šä¸Šé¢åšæ–‡çš„è¡¥å……åœ°æ–¹é•œåƒæœ‰é—®é¢˜ã€‚ åº”æ‰§è¡Œä¸‹é¢è¯­å¥ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">ï¼ˆå¦‚æœä¸å°å¿ƒè·Ÿç€<span class="number">1.</span> æ‰§è¡Œäº†è¡¥å……ï¼Œå…ˆè¿è¡Œè¿™ä¸ªï¼Œå¦åˆ™æ²¡å¿…è¦ï¼‰</span><br><span class="line">npm cache clean --force</span><br><span class="line"></span><br><span class="line">npm config set registry https:<span class="comment">//registry.npmmirror.com</span></span><br></pre></td></tr></table></figure>
<p>1.3 ï¼ˆå¯é€‰ï¼‰å°†npmçš„å®‰è£…è·¯å¾„ä¿®æ”¹åˆ°å…¶ä»–ç›˜é¿å…å ç”¨Cç›˜ï¼š<a href="https://blog.csdn.net/Deng872347348/article/details/121646375">https://blog.csdn.net/Deng872347348/article/details/121646375</a> åªåšåˆ° <strong>â€œæ¥ä¸‹æ¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå…³é—­cmdçª—å£ï¼Œâ€œæˆ‘çš„ç”µè„‘â€-å³é”®-â€œå±æ€§â€-â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€-â€œé«˜çº§â€-â€œç¯å¢ƒå˜é‡â€â€</strong> ä¹‹å‰çš„æ­¥éª¤</p>
<h1 id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85hexo" tabindex="-1">äºŒã€å®‰è£…Hexo</h1>
<p>2.1 æ–°å»º Blog æ–‡ä»¶å¤¹ï¼Œè¿›å…¥æ­¤ç›®å½•ä¸‹<br>
2.2 å®‰è£…Hexoè„šæ‰‹æ¶.ä¸‹é¢çš„å‘½ä»¤ä¼šæŠŠhexo.cmdå®‰è£…åˆ°<strong>å…¨å±€åŒ…ä»“åº“ä¸­</strong>ï¼Œç”±äºè¯¥ä»“åº“æ–‡ä»¶å¤¹åœ¨Windowsç³»ç»Ÿçš„pathä¸­ã€‚æ‰€ä»¥ä½ å°±<strong>å¯ä»¥åœ¨ä»»æ„ä½ç½®æ‰§è¡Œhexoå‘½ä»¤</strong>äº†ã€‚</p>
<figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘è¿™é‡Œæ˜¯å®‰è£…è¿‡äº†æ‰€ä»¥æ˜¯æ˜¾ç¤ºè¿™æ ·çš„<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.1%E5%AE%89%E8%A3%85Hexo%E8%84%9A%E6%89%8B%E6%9E%B6.jpg" alt><br>
2.3 æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ç¡®è®¤hexoå®‰è£…å®Œå¥½ã€‚è¿™é‡Œæ‰§è¡Œå¦‚æœæŠ¥é”™ï¼ˆhexoâ€˜ ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºï¼‰ï¼Œè¯·å‚è€ƒè¯¥å†…å®¹ä»¥é…ç½®Hexoçš„ç¯å¢ƒå˜é‡ï¼š<a href="https://blog.csdn.net/Deng872347348/article/details/121646375">https://blog.csdn.net/Deng872347348/article/details/121646375</a> çš„ <strong>â€œæ¥ä¸‹æ¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå…³é—­cmdçª—å£ï¼Œâ€œæˆ‘çš„ç”µè„‘â€-å³é”®-â€œå±æ€§â€-â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€-â€œé«˜çº§â€-â€œç¯å¢ƒå˜é‡â€â€</strong> åŠå…¶ä¹‹åçš„æ­¥éª¤ ï¼Œå¦‚æœåœ¨2.2æ­¥ä¹‹åä¸å°å¿ƒé‡æ–°è®¾ç½®äº†npmçš„å…¨å±€æ–‡ä»¶å¤¹ï¼Œåˆ™é‡æ–°æ‰§è¡Œ2.2çš„npm install -g hexo-cliå‘½ä»¤ï¼Œä½†<strong>å¯èƒ½ä¼šå‡ºç°æƒé™é—®é¢˜ï¼Œè¯·ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmdæˆ–è€…ä¿®æ”¹nodejsæ–‡ä»¶å¤¹æƒé™,<a href="https://blog.csdn.net/m0_56253302/article/details/130111914">å¯ä»¥çœ‹è¯¥ç½‘å€ä¸­çš„æ–¹æ³•äºŒ</a></strong>ã€‚è§£å†³ä»¥ä¸Šé—®é¢˜åæ‰§è¡Œä¸‹é¢å‘½ä»¤ã€‚</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo -v</span></span><br></pre></td></tr></table></figure>
<p>2.4 æ–°å»ºä¸€ä¸ª<strong>ç©ºæ–‡ä»¶å¤¹</strong>ç”¨äºåˆå§‹åŒ–Hexoï¼Œå¯åŠ¨cmdå¹¶è¿›å…¥åˆ°æ–‡ä»¶å¤¹ä¸­ã€‚<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.4cmd%E8%BF%9B%E5%85%A5%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9.jpg" alt><br>
æ‰§è¡ŒHexoåˆå§‹åŒ–å‘½ä»¤</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">hexo <span class="keyword">init</span></span><br></pre></td></tr></table></figure>
<p>2.5 cmdå‘½ä»¤ä¸­è¿›å…¥åˆ°themesæ–‡ä»¶å¤¹<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.5%E8%BF%9B%E5%85%A5theme%E6%96%87%E4%BB%B6%E5%A4%B9.jpg" alt><br>
2.6 cmdå‘½ä»¤ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œä¸‹è½½ Nextä¸»é¢˜</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span></span><br></pre></td></tr></table></figure>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.6%E4%B8%8B%E8%BD%BDNext%E4%B8%BB%E9%A2%980.jpg" alt><br>
æ–‡ä»¶å¤¹å¤šå‡ºæ–‡ä»¶<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.6%E4%B8%8B%E8%BD%BDNext%E4%B8%BB%E9%A2%98.jpg" alt></p>
<p>2.7 cmdä¸­å¯åŠ¨æœ¬åœ°æœåŠ¡æŸ¥çœ‹<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.7%E5%90%AF%E5%8A%A8%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1.jpg" alt></p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥http://localhost:4000/ å³å¯çœ‹åˆ°ç›®å‰çš„ç•Œé¢<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/2.7%E7%95%8C%E9%9D%A2.jpg" alt></p>
<p>2.8 ä¸€äº›ç›¸å…³å‘½ä»¤</p>
<ul>
<li>hexo cleanï¼šæ¸…é™¤ public é™æ€ç›®å½•</li>
<li>hexo sï¼šæœ¬åœ°å¯åŠ¨é»˜è®¤æŒ‡å®š 4000 ç«¯å£é¢„è§ˆ (s æ˜¯ server æ˜¯ç¼©å†™ ä¹Ÿå°±æ˜¯å¯åŠ¨ hexo æœåŠ¡)</li>
<li>hexo gï¼šç”Ÿæˆ public é™æ€ç›®å½•</li>
<li>hexo dï¼š éƒ¨ç½²</li>
<li>hexo n: æ–°å»ºæ–‡ç« ã€‚ç¤ºä¾‹hexo n â€œæˆ‘çš„åšå®¢â€ == hexo new â€œæˆ‘çš„åšå®¢â€ #æ–°å»ºæ–‡ç« </li>
<li>hexo p == hexo publish</li>
<li>hexo server -p 5000 #æ›´æ”¹ç«¯å£</li>
<li>hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IP</li>
<li>hexo new draft è‰ç¨¿æ–‡ä»¶åã€‚æ–°å»ºè‰ç¨¿å‘½ä»¤å¦‚ä¸‹ï¼Œè‰ç¨¿ä¸ä¼šåœ¨åšå®¢ä¸Šæ˜¾ç¤ºã€‚</li>
</ul>
<h1 id="%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AE%BE%E7%BD%AE" tabindex="-1">ä¸‰ã€é…ç½®æ–‡ä»¶è®¾ç½®</h1>
<h3 id="3.1-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E" tabindex="-1">3.1 é…ç½®æ–‡ä»¶è¯´æ˜</h3>
<p>åœ¨ Hexo ä¸­æœ‰ä¸¤ä»½ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼Œå…¶åç§°éƒ½æ˜¯ _config.ymlã€‚</p>
<ol>
<li>ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼šä½äºç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼ˆ/_config.ymlï¼‰ï¼Œä¸»è¦åŒ…å« Hexo æœ¬èº«çš„ç«™ç‚¹é…ç½®ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span>          <span class="comment"># ç½‘ç«™çš„æ ‡é¢˜ï¼Œå¯èƒ½ç”¨åœ¨å„ç§å¸ƒå±€çš„é¡µé¢ä¸­</span></span><br><span class="line"><span class="attr">subtitle:</span>            <span class="comment"># ç½‘ç«™å­æ ‡é¢˜</span></span><br><span class="line"><span class="attr">description:</span>         <span class="comment"># ç½‘ç«™çš„æè¿°æ€§</span></span><br><span class="line"><span class="attr">keywords:</span>            <span class="comment"># ç½‘ç«™çš„å…³é”®å­—</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">John</span> <span class="string">Doe</span>     <span class="comment"># ç½‘ç«™çš„ä½œè€…</span></span><br><span class="line"><span class="attr">language:</span>            <span class="comment"># ç½‘ç«™é‡‡ç”¨è¯­è¨€ï¼Œè¦è·Ÿ/theme/***/languages/**.ymlä¸‹çš„æ–‡ä»¶åå¯¹åº”ã€‚</span></span><br><span class="line"><span class="attr">timezone:</span>            <span class="comment"># ç½‘ç«™çš„æ—¶åŒº</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://yoursite.com</span>              <span class="comment"># ç½‘ç«™çš„urlï¼Œå¦‚æœä¸åœ¨åŸŸåæ ¹ç›®å½•ï¼Œåº”åŒ…å«å­ç›®å½•ï¼Œä¸”rootè¦è®¾ç½®ä¸º`/å­ç›®å½•/`</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span>                               <span class="comment"># ç½‘ç«™çš„æ ¹ç›®å½•</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span>  <span class="comment">#æ–‡ç« æ°¸ä¹…é“¾æ¥çš„å½¢æˆæ¨¡ç‰ˆã€‚æ¯ä¸€ç¯‡æ–‡ç« éƒ½æœ‰å”¯ä¸€çš„urlã€‚</span></span><br><span class="line"><span class="attr">permalink_defaults:</span>                   <span class="comment">#æ–‡ç« æ°¸ä¹…é“¾æ¥ä¸­ï¼Œå„éƒ¨åˆ†çš„é»˜è®¤å€¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span>          <span class="comment"># ç½‘ç«™ä¸­æºæ–‡ä»¶ï¼ˆæ¯”å¦‚Markdownå•Šä»€ä¹ˆçš„æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼‰</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span>          <span class="comment"># ç”Ÿæˆçš„é™æ€ç½‘ç«™çš„ç›®å½•</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span>               <span class="comment"># æ ‡ç­¾é¡µæ‰€åœ¨çš„æ–‡ä»¶å¤¹ã€‚</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span>       <span class="comment"># æ–‡æ¡£é¡µæ‰€åœ¨çš„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span>    <span class="comment"># ç±»åˆ«ä¹Ÿæ‰€åœ¨çš„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span>    <span class="comment"># ä»£ç ä¹Ÿæ‰€åœ¨çš„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span>             <span class="comment"># å›½é™…è¯­è¨€æ‰€åœ¨çš„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="attr">skip_render:</span>                <span class="comment"># å¿½ç•¥æ–‡æ¡£æ¸…å•</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing å†™ä½œ</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span>    <span class="comment"># é»˜è®¤æ–°å»ºæ–‡æ¡£åï¼Œ`:title`ä¸ºå˜é‡ï¼ŒæŒ‡æ–‡æ¡£æ ‡é¢˜ï¼Œä¹Ÿå¯ç”¨å…¶ä»–å˜é‡</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span>        <span class="comment"># æ–°å»ºæ–‡æ¡£çš„é»˜è®¤å¸ƒå±€</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span>            <span class="comment"># æ˜¯å¦è¦æŠŠæ ‡é¢˜ä¸­çš„é¦–å­—ç¬¦å¤§å†™</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span>         <span class="comment"># æ˜¯å¦è¦åœ¨æ–°å¼€tabä¸­æ‰“å¼€å¤–é“¾</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span>            <span class="comment"># æ–‡ä»¶åæ˜¯å¦å°å†™æ•æ„Ÿ</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span>        <span class="comment"># æ˜¯å¦æ¸²æŸ“è‰ç¨¿</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span>    <span class="comment"># æ˜¯å¦å¯ç”¨èµ„æºæ–‡ä»¶å¤¹ã€‚å¦‚å¯ç”¨ï¼Œæ–°å»ºæ–‡æ¡£åŒæ—¶å»ºç«‹åŒåçš„èµ„æºæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span>        <span class="comment"># æ˜¯å¦æŠŠç«™å†…èµ„æºçš„é“¾æ¥æ”¹ä¸ºç«™å†…ç›¸å¯¹é“¾æ¥ã€‚å»ºè®®å…³é—­ã€‚</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span>                <span class="comment"># æ–‡æ¡£ä¸­æŒ‡å®šä¸ºæœªæ¥æ—¶é—´åˆ›å»º</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>              <span class="comment"># æ˜¯å¦å¼€å¯ä»£ç é«˜äº®åŠŸèƒ½</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span>         <span class="comment"># ä»£ç å—ä¸­æ˜¯å¦åœ¨å‰é¢åŠ ä¸Šè¡Œå·</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span>        <span class="comment"># æ˜¯å¦è‡ªåŠ¨æ£€æµ‹ä»£ç å—çš„è¯­è¨€ï¼ˆæ¯”å¦‚xmlã€JavaScriptã€mermaidç­‰ï¼‰</span></span><br><span class="line">  <span class="attr">tab_replace:</span>              <span class="comment"># ç”¨ä»€ä¹ˆå­—ç¬¦æ¥ä»£æ›¿tab(`\t`)å­—ç¬¦ã€‚</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span>       </span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span>              <span class="comment"># ä¸»é¡µæ‰€åœ¨è·¯å¾„ï¼Œé»˜è®¤ä¸º&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span>          <span class="comment"># ä¸»é¡µçš„ç´¢å¼•é¡µåŒ…å«æ–‡ç« æ•°é‡ï¼Œå¦‚æœªå®šä¹‰ï¼Œåˆ™é‡‡ç”¨æ ¹ç›®å½•ä¸‹çš„`per_page`å€¼</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span>       <span class="comment"># æ–‡ç« ï¼ˆPostç±»å‹ï¼‰æ’åºå±æ€§ï¼Œ`-`ä¸ºé™åº</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span>      <span class="comment"># å¯¹æ–‡æ¡£çš„é»˜è®¤åˆ†ç±»</span></span><br><span class="line"><span class="attr">category_map:</span>                        <span class="comment"># å¯¹æ–‡æ¡£ä¸­çš„åˆ†ç±»å­—æ®µè¿›è¡Œæ˜ å°„ã€‚å»ºç«‹åˆ†ç±»æ–‡ä»¶å¤¹æ—¶é‡‡ç”¨æ˜ å°„åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="attr">tag_map:</span>                             <span class="comment"># å¯¹æ–‡æ¡£ä¸­çš„æ ‡ç­¾å­—æ®µè¿›è¡Œæ˜ å°„ã€‚å»ºç«‹æ ‡ç­¾æ–‡ä»¶å¤¹æ—¶é‡‡ç”¨æ˜ å°„åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span>   <span class="comment"># æ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span>     <span class="comment"># æ—¶é—´æ ¼å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span>                      <span class="comment"># ä¸»é¡µ/åˆ†ç±»/æ ‡ç­¾/å­˜æ¡£ç­‰ç±»å‹ç´¢å¼•é¡µåŒ…å«æ–‡ç« æ•°é‡</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span>              <span class="comment"># åˆ†é¡µæ‰€åœ¨æ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions                      # æ‰©å±•ã€‚æ”¾ç½®æ’ä»¶å’Œä¸»é¢˜</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span>                                <span class="comment"># é»˜è®¤ä¸»é¢˜landscape</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html    </span></span><br><span class="line"><span class="attr">deploy:</span>                                         <span class="comment"># å®šä¹‰éƒ¨ç½²</span></span><br><span class="line">  <span class="attr">type:</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>
<p>ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼šä½äºä¸»é¢˜ç›®å½•ä¸‹ï¼ˆthemes/hexo-theme-next/_config.ymlï¼‰ï¼Œè¿™ä»½é…ç½®ç”±ä¸»é¢˜ä½œè€…æä¾›ï¼Œä¸»è¦ç”¨äºé…ç½®ä¸»é¢˜ç›¸å…³çš„é€‰é¡¹ã€‚</p>
</li>
<li>
<p>è®¾ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸»é¢˜ä¸º nextã€‚ï¼ˆç”¨äºæˆ‘cloneä¸‹æ¥çš„nextçš„æ–‡ä»¶å¤¹åä¸ºhexo-theme-nextï¼‰ï¼Œæ‰€ä»¥è¦å°†ä¸»é¢˜è®¾ç½®ä¸º hexo-theme-next è€Œä¸æ˜¯next</p>
</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">hexo-theme-next</span></span><br></pre></td></tr></table></figure>
<h3 id="3.2-%E4%B8%BB%E9%A2%98%E6%96%B9%E6%A1%88%E8%AE%BE%E7%BD%AE" tabindex="-1">3.2 ä¸»é¢˜æ–¹æ¡ˆè®¾ç½®</h3>
<p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"><span class="comment"># scheme: Mist</span></span><br><span class="line"><span class="comment"># scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure>
<h3 id="3.3-%E9%85%8D%E7%BD%AEmenu" tabindex="-1">3.3 é…ç½®menu</h3>
<ol>
<li>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">MiDoLi&#x27;s</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&quot;Code builds world !&quot;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸–ç•ŒğŸ’œ&quot;</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">MiDoLi</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&quot;Asia/Shanghai&quot;</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Usage: `Key: /link/ || icon`</span></span><br><span class="line"><span class="comment"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-sensitive.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span></span><br><span class="line"><span class="comment"># External url should start with http:// or https://</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="comment"># schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="comment"># sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || fa fa-heartbeat</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable / Disable menu icons / item badges.</span></span><br><span class="line"><span class="attr">menu_settings:</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦æ˜¾ç¤ºå„ä¸ªé¡µé¢çš„å›¾æ ‡</span></span><br><span class="line">  <span class="attr">badges:</span> <span class="literal">false</span> <span class="comment"># æ˜¯å¦æ˜¾ç¤ºåˆ†ç±»/æ ‡ç­¾/å½’æ¡£é¡µçš„å†…å®¹é‡</span></span><br></pre></td></tr></table></figure>
<h3 id="3.4-%E9%9A%90%E8%97%8F%E7%BD%91%E9%A1%B5%E5%BA%95%E9%83%A8-powered-by-hexo-%2F-%E5%BC%BA%E5%8A%9B%E9%A9%B1%E5%8A%A8(todo)" tabindex="-1">3.4 éšè—ç½‘é¡µåº•éƒ¨ powered By Hexo / å¼ºåŠ›é©±åŠ¨(TODO)</h3>
<p>å…¨å±€æœç´¢å¹¶æ³¨é‡Šæ‰ç›¸åº”ä»£ç å³å¯(æˆ‘å°±æ²¡æ³¨é‡Šäº†)</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">&lt;!--</span> <span class="string">åˆ é™¤</span> <span class="string">â€œç”±</span> <span class="string">Hexo</span> <span class="string">&amp;</span> <span class="string">NexT.Gemini</span> <span class="string">å¼ºåŠ›é©±åŠ¨â€</span> <span class="string">--&gt;</span></span><br><span class="line"><span class="string">&lt;!--</span> &#123;<span class="string">%-</span> <span class="string">if</span> <span class="string">theme.footer.powered</span> <span class="string">%</span>&#125;</span><br><span class="line">  <span class="string">&lt;div</span> <span class="string">class=&quot;powered-by&quot;&gt;</span></span><br><span class="line">    &#123;<span class="string">%-</span> <span class="string">set</span> <span class="string">next_site</span> <span class="string">=</span> <span class="string">&#x27;https://theme-next.js.org&#x27;</span> <span class="string">if</span> <span class="string">theme.scheme</span> <span class="string">===</span> <span class="string">&#x27;Gemini&#x27;</span> <span class="string">else</span> <span class="string">&#x27;https://theme-next.js.org/&#x27;</span> <span class="string">+</span> <span class="string">theme.scheme</span> <span class="string">|</span> <span class="string">lower</span> <span class="string">+</span> <span class="string">&#x27;/&#x27;</span> <span class="string">%</span>&#125;</span><br><span class="line">    &#123;&#123;<span class="bullet">-</span> <span class="string">__(&#x27;footer.powered&#x27;</span>, <span class="string">next_url(&#x27;https://hexo.io&#x27;</span>, <span class="string">&#x27;Hexo&#x27;</span><span class="string">)</span> <span class="string">+</span> <span class="string">&#x27; &amp; &#x27;</span> <span class="string">+</span> <span class="string">next_url(next_site</span>, <span class="string">&#x27;NexT.&#x27;</span> <span class="string">+</span> <span class="string">theme.scheme))</span> &#125;&#125;</span><br><span class="line">  <span class="string">&lt;/div&gt;</span></span><br><span class="line">&#123;<span class="string">%-</span> <span class="string">endif</span> <span class="string">%</span>&#125; <span class="string">--&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3.5-%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%A0%81%E5%9D%97%E9%AB%98%E4%BA%AE%E9%A3%8E%E6%A0%BC" tabindex="-1">3.5 é…ç½®ä»£ç å—é«˜äº®é£æ ¼</h3>
<p>highlight å’Œ prismjs æ˜¯ä¸¤ç§ä»£ç å—é£æ ¼ï¼Œç°åœ¨ highlight æ˜¯ä¸»æµï¼Œä¸”äºŒè€…åªèƒ½å¼€å¯å…¶ä¸€ã€‚</p>
<ul>
<li>ç«™ç‚¹é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å¼€å¯ä»£ç é«˜äº®</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å¢åŠ ä»£ç è¡Œå·</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">true</span> <span class="comment">#è‡ªåŠ¨åˆ¤æ–­ä»£ç è¯­è¨€</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸»é¢˜é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span></span><br><span class="line">  <span class="comment"># See: https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line">  <span class="attr">highlight_theme:</span> <span class="string">night</span> <span class="string">eighties</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span> <span class="comment"># ä¸€é”®å¤åˆ¶</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show text copy result.</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span></span><br></pre></td></tr></table></figure>
<p>ä»£ç é£æ ¼æˆ‘å°±ç›´æ¥ç”¨çš„é»˜è®¤çš„ normal<br>
å¤åˆ¶æŒ‰é’®å¯ä»¥é€‰æ‹©default | flat | macä¸‰ç§é£æ ¼</p>
<p>å¯åœ¨ <a href="https://theme-next.js.org/highlight/">https://theme-next.js.org/highlight/</a> ä¸­æŸ¥çœ‹å„ä¸ªä»£ç é£æ ¼ä¸»é¢˜ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä»£ç é£æ ¼</p>
<h3 id="3.6-%E6%96%87%E7%AB%A0%E6%B7%BB%E5%8A%A0%E9%98%B4%E5%BD%B1(todo)" tabindex="-1">3.6  æ–‡ç« æ·»åŠ é˜´å½±(TODO)</h3>
<p>æ‰¾åˆ°æ–‡ä»¶blog\themes\hexo-theme-next\source\css\_common\components\post\post.styl ï¼ˆæ—§ç‰ˆå¯èƒ½æ˜¯index.stylæ–‡ä»¶ï¼‰ï¼Œå¹¶åœ¨ä¿®æ”¹å…¶ä¸­use-motionçš„å†…å®¹</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.use-motion</span> &#123;</span><br><span class="line">if (hexo-config(&#x27;motion<span class="selector-class">.transition</span><span class="selector-class">.post_block</span>&#x27;)) &#123;</span><br><span class="line">    <span class="selector-class">.post-block</span> &#123;</span><br><span class="line">      <span class="attribute">visibility</span>: hidden;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">      -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">      -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.pagination</span>, <span class="selector-class">.comments</span> &#123;</span><br><span class="line">      <span class="attribute">visibility</span>: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3.7-%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E6%B5%8F%E8%A7%88%E8%BF%9B%E5%BA%A6" tabindex="-1">3.7 æ˜¾ç¤ºå½“å‰æµè§ˆè¿›åº¦</h3>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">back2top:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Back to top in sidebar.</span></span><br><span class="line"><span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line"><span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="3.8-%E6%96%87%E7%AB%A0%E5%88%86%E4%BA%AB%E5%8A%9F%E8%83%BD" tabindex="-1">3.8 æ–‡ç« åˆ†äº«åŠŸèƒ½</h3>
<p>ç­‰æœ‰äº†åŸŸåä»¥åæ‰èƒ½åœ¨addthisä¸­é…ç½®</p>
<h3 id="3.9-local-search%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2" tabindex="-1">3.9 Local Searchæœ¬åœ°æœç´¢</h3>
<ul>
<li>å®‰è£…æ’ä»¶ hexo-generator-searchdbï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿®æ”¹ hexo/_config.yml ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ–°å¢ä»¥ä¸‹å†…å®¹åˆ°æœ«å°¾ä½ç½®ï¼š</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line"><span class="attr">field:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">format:</span> <span class="string">html</span></span><br><span class="line"><span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿®æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¯ç”¨æœ¬åœ°æœç´¢åŠŸèƒ½ï¼š</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># é¡µé¢æ‰“å¼€æ—¶é¢„åŠ è½½æœç´¢æ•°æ®</span></span><br><span class="line"><span class="attr">preload:</span> <span class="literal">true</span> </span><br></pre></td></tr></table></figure>
<p>æˆ‘è¿˜å°† é¡µé¢æ‰“å¼€æ—¶é¢„åŠ è½½æœç´¢æ•°æ®è®¾ç½®ä¸ºäº†true è¿™ä¸ªçœ‹ä¸ªäººéœ€è¦ã€‚</p>
<h3 id="3.10-%E8%AE%BE%E7%BD%AEfavicon.ico%E5%9B%BE%E6%A0%87(todo)" tabindex="-1">3.10 è®¾ç½®favicon.icoå›¾æ ‡(TODO)</h3>
<p>åœ¨ EasyIcon ä¸­æ‰¾ä¸€å¼ ï¼ˆ32 * 32ï¼‰çš„ ico å›¾æ ‡ï¼Œæˆ–è€…å»åˆ«çš„ç½‘ç«™ä¸‹è½½æˆ–è€…åˆ¶ä½œï¼Œå¹¶å°†å›¾æ ‡åç§°æ”¹ä¸º favicon.icoï¼Œç„¶åæŠŠå›¾æ ‡æ”¾åœ¨ /themes/next/source/images é‡Œï¼Œå¹¶ä¸”ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/favicon-16x16-next.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/favicon-32x32-next.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/apple-touch-icon-next.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/logo.svg</span></span><br><span class="line">  <span class="comment">#android_manifest: /manifest.json</span></span><br></pre></td></tr></table></figure>
<h3 id="3.11-%E4%BF%AE%E6%94%B9%E6%96%87%E7%AB%A0%E5%BA%95%E9%83%A8%E7%9A%84%23%E5%8F%B7%E7%9A%84%E6%A0%87%E7%AD%BE" tabindex="-1">3.11 ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„#å·çš„æ ‡ç­¾</h3>
<p>æ–°ç‰ˆæœ¬çš„nextæ— éœ€ä¿®æ”¹</p>
<h3 id="3.12-%E5%A2%9E%E5%8A%A0%E6%96%87%E7%AB%A0%E5%AD%97%E6%95%B0%E7%BB%9F%E8%AE%A1%E5%92%8C%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF" tabindex="-1">3.12 å¢åŠ æ–‡ç« å­—æ•°ç»Ÿè®¡å’Œé˜…è¯»æ—¶é•¿</h3>
<ul>
<li>å®‰è£… hexo-word-counter æ’ä»¶</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-word-counter</span><br><span class="line">npm install hexo-symbols-count-time --save</span><br><span class="line">npm install eslint --save</span><br></pre></td></tr></table></figure>
<ul>
<li>ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå°†ä»¥ä¸‹å†…å®¹ç²˜è´´åœ¨æœ«å°¾ä½ç½®</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¢åŠ æ–‡ç« å­—æ•°ç»Ÿè®¡åŠé˜…è¯»æ—¶é•¿åŠŸèƒ½</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">symbols:</span> <span class="literal">true</span>                <span class="comment"># æ–‡ç« å­—æ•°ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">time:</span> <span class="literal">true</span>                   <span class="comment"># æ–‡ç« é˜…è¯»æ—¶é•¿</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">true</span>          <span class="comment"># ç«™ç‚¹æ€»å­—æ•°ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">true</span>             <span class="comment"># ç«™ç‚¹æ€»é˜…è¯»æ—¶é•¿</span></span><br><span class="line">  <span class="attr">exclude_codeblock:</span> <span class="literal">false</span>     <span class="comment"># æ’é™¤ä»£ç å­—æ•°ç»Ÿè®¡</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨NexTä¸»é¢˜é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®ï¼ˆNexTä¸»é¢˜å·²æ”¯æŒè¯¥æ’ä»¶ï¼Œæœ‰çš„è¯æ— éœ€å†æ·»åŠ ï¼‰</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Post wordcount display settings</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-symbols-count-time</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span>     <span class="comment"># æ˜¯å¦å¦èµ·ä¸€è¡Œï¼ˆtrueçš„è¯ä¸å’Œå‘è¡¨æ—¶é—´ç­‰åŒä¸€è¡Œï¼‰</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span>     <span class="comment"># é¦–é¡µæ–‡ç« ç»Ÿè®¡æ•°é‡å‰æ˜¯å¦æ˜¾ç¤ºæ–‡å­—æè¿°ï¼ˆæœ¬æ–‡å­—æ•°ã€é˜…è¯»æ—¶é•¿ï¼‰</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">false</span>   <span class="comment"># é¡µé¢åº•éƒ¨ç»Ÿè®¡æ•°é‡å‰æ˜¯å¦æ˜¾ç¤ºæ–‡å­—æè¿°ï¼ˆç«™ç‚¹æ€»å­—æ•°ã€ç«™ç‚¹é˜…è¯»æ—¶é•¿ï¼‰</span></span><br><span class="line">  <span class="attr">awl:</span> <span class="number">4</span>                   <span class="comment"># Average Word Length</span></span><br><span class="line">  <span class="attr">wpm:</span> <span class="number">275</span>                 <span class="comment"># Words Per Minuteï¼ˆæ¯åˆ†é’Ÿé˜…è¯»è¯æ•°ï¼‰</span></span><br><span class="line">  <span class="attr">suffix:</span> <span class="string">mins.</span></span><br></pre></td></tr></table></figure>
<h3 id="3.13-%E9%98%85%E8%AF%BB%E5%85%A8%E6%96%87" tabindex="-1">3.13 é˜…è¯»å…¨æ–‡</h3>
<p>ç›´æ¥åœ¨æ–‡ç« ä¸­æ·»åŠ  <!-- more --> æ¥ç²¾ç¡®æ§åˆ¶æ‘˜è¦å†…å®¹ï¼Œå³æ§åˆ¶ Read Moreï¼ˆé˜…è¯»å…¨æ–‡ï¼‰ çš„ä½ç½®</p>
<p>æˆ‘ä»¬å¯ä»¥æ·»åŠ å‰è¨€å¼•ç”¨æ¥å¯¹æ–‡ç« è¿›è¡Œæ€»ç»“æç‚¼ è¯¦æƒ…å¯ç‚¹å‡»é˜…è¯»å…¨æ–‡~<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.13%E9%98%85%E8%AF%BB%E5%85%A8%E6%96%87.png" alt></p>
<h3 id="3.14-%E6%B7%BB%E5%8A%A0%E4%BD%9C%E8%80%85%E5%A4%B4%E5%83%8F" tabindex="-1">3.14 æ·»åŠ ä½œè€…å¤´åƒ</h3>
<p>è¿›å…¥ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢è¿™è¡Œ</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">avatar:</span> </span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.gif</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šä¼ è‡ªå®šä¹‰çš„å›¾ç‰‡åˆ°ä¸‹åˆ—ç›®å½•ï¼š/themes/hexo-theme-next/source/images/ï¼Œæ›´æ”¹ avatar è·¯å¾„å®Œæˆï¼ ï¼ˆæˆ‘cloneä¸‹æ¥çš„nexté¡¹ç›®åæ˜¯hexo-theme-nextï¼Œæœ‰çš„æ˜¯nextï¼Œæ‰€ä»¥çœ‹æ¸…è‡ªå·±çš„è·¯å¾„ï¼‰</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/Ben.jpg</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span> <span class="comment"># è®¾ç½®å¤´åƒä¸ºåœ†å½¢æ˜¾ç¤º</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span> <span class="comment"># å½“é¼ æ ‡é€‰ä¸­å¤´åƒå å¤´åƒä¼šæ—‹è½¬ä¸€å‘¨</span></span><br></pre></td></tr></table></figure>
<h3 id="3.15-%E6%B7%BB%E5%8A%A0%E9%A1%B5%E9%9D%A2%E9%A1%B6%E9%83%A8%E5%8A%A0%E8%BD%BD%E6%9D%A1(todo)" tabindex="-1">3.15 æ·»åŠ é¡µé¢é¡¶éƒ¨åŠ è½½æ¡(TODO)</h3>
<p>å…¨å±€æœç´¢ pace ç„¶åè®¾ç½® pace: true å¼€å¯</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pace:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># All available colors:</span></span><br><span class="line">  <span class="comment"># black | blue | green | orange | pink | purple | red | silver | white | yellow</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">blue</span></span><br><span class="line">  <span class="comment"># All available themes:</span></span><br><span class="line">  <span class="comment"># big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span></span><br><span class="line">  <span class="comment"># corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">bounce</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘çœ‹<strong>æœ€æ–°ç‰ˆæœ¬nextæ²¡æœ‰è¿™ä¸ªcolorçš„å‚æ•°</strong>ï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®çœ‹çœ‹</p>
<h3 id="3.16-%E6%B7%BB%E5%8A%A0%E6%9C%AC%E7%AB%99%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4" tabindex="-1">3.16 æ·»åŠ æœ¬ç«™è¿è¡Œæ—¶é—´</h3>
<p>ä¿®æ”¹ /blog/themes/hexo-theme-next/layout/_partials/footer.swig æ–‡ä»¶ï¼Œåœ¨æœ«å°¾åŠ å…¥å¦‚ä¸‹ä»£ç ï¼šï¼ˆæˆ‘cloneä¸‹æ¥çš„nexté¡¹ç›®åæ˜¯hexo-theme-nextï¼Œæœ‰çš„æ˜¯nextï¼Œæ‰€ä»¥çœ‹æ¸…è‡ªå·±çš„è·¯å¾„ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- ç½‘ç«™è¿è¡Œæ—¶é—´çš„è®¾ç½® --&gt;</span><br><span class="line">&lt;span id=&quot;timeDate&quot;&gt;è½½å…¥å¤©æ•°...&lt;/span&gt;</span><br><span class="line">&lt;span id=&quot;times&quot;&gt;è½½å…¥æ—¶åˆ†ç§’...&lt;/span&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var now = new Date();</span><br><span class="line">    function createtime() &#123;</span><br><span class="line">        var grt= new Date(&quot;03/01/2023 10:00:00&quot;); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´</span><br><span class="line">        now.setTime(now.getTime()+250);</span><br><span class="line">        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);</span><br><span class="line">        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);</span><br><span class="line">        if(String(hnum).length ==1 )&#123;hnum = &quot;0&quot; + hnum;&#125; minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);</span><br><span class="line">        mnum = Math.floor(minutes); if(String(mnum).length ==1 )&#123;mnum = &quot;0&quot; + mnum;&#125;</span><br><span class="line">        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);</span><br><span class="line">        snum = Math.round(seconds); if(String(snum).length ==1 )&#123;snum = &quot;0&quot; + snum;&#125;</span><br><span class="line">        document.getElementById(&quot;timeDate&quot;).innerHTML = &quot;æœ¬ç«™å·²å®‰å…¨è¿è¡Œ &quot;+dnum+&quot; å¤© &quot;;</span><br><span class="line">        document.getElementById(&quot;times&quot;).innerHTML = hnum + &quot; å°æ—¶ &quot; + mnum + &quot; åˆ† &quot; + snum + &quot; ç§’.&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">setInterval(&quot;createtime()&quot;,250);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3.17-%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E5%8A%A8%E7%94%BB" tabindex="-1">3.17 é¼ æ ‡ç‚¹å‡»åŠ¨ç”»</h3>
<ol>
<li>çˆ±å¿ƒç‰¹æ•ˆ</li>
</ol>
<ul>
<li>åœ¨ /themes/hexo-theme-next/source/js/ ä¸‹æ–°å»ºæ–‡ä»¶ clicklove.js å¹¶æ·»åŠ ä»£ç ï¼šï¼ˆæˆ‘cloneä¸‹æ¥çš„nexté¡¹ç›®åæ˜¯hexo-theme-nextï¼Œæœ‰çš„æ˜¯nextï¼Œæ‰€ä»¥çœ‹æ¸…è‡ªå·±çš„è·¯å¾„ï¼‰</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params">e,t,a</span>)&#123;<span class="keyword">function</span> <span class="title function_">n</span>(<span class="params"></span>)&#123;<span class="title function_">c</span>(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),<span class="title function_">o</span>(),<span class="title function_">r</span>()&#125;<span class="keyword">function</span> <span class="title function_">r</span>(<span class="params"></span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.<span class="property">length</span>;e++)d[e].<span class="property">alpha</span>&lt;=<span class="number">0</span>?(t.<span class="property">body</span>.<span class="title function_">removeChild</span>(d[e].<span class="property">el</span>),d.<span class="title function_">splice</span>(e,<span class="number">1</span>)):(d[e].<span class="property">y</span>--,d[e].<span class="property">scale</span>+=<span class="number">.004</span>,d[e].<span class="property">alpha</span>-=<span class="number">.013</span>,d[e].<span class="property">el</span>.<span class="property">style</span>.<span class="property">cssText</span>=<span class="string">&quot;left:&quot;</span>+d[e].<span class="property">x</span>+<span class="string">&quot;px;top:&quot;</span>+d[e].<span class="property">y</span>+<span class="string">&quot;px;opacity:&quot;</span>+d[e].<span class="property">alpha</span>+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].<span class="property">scale</span>+<span class="string">&quot;,&quot;</span>+d[e].<span class="property">scale</span>+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].<span class="property">color</span>+<span class="string">&quot;;z-index:99999&quot;</span>);<span class="title function_">requestAnimationFrame</span>(r)&#125;<span class="keyword">function</span> <span class="title function_">o</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.<span class="property">onclick</span>&amp;&amp;e.<span class="property">onclick</span>;e.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params">e</span>)&#123;t&amp;&amp;<span class="title function_">t</span>(),<span class="title function_">i</span>(e)&#125;&#125;<span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> a=t.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);a.<span class="property">className</span>=<span class="string">&quot;heart&quot;</span>,d.<span class="title function_">push</span>(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.<span class="property">clientX</span>-<span class="number">5</span>,<span class="attr">y</span>:e.<span class="property">clientY</span>-<span class="number">5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:<span class="title function_">s</span>()&#125;),t.<span class="property">body</span>.<span class="title function_">appendChild</span>(a)&#125;<span class="keyword">function</span> <span class="title function_">c</span>(<span class="params">e</span>)&#123;<span class="keyword">var</span> a=t.<span class="title function_">createElement</span>(<span class="string">&quot;style&quot;</span>);a.<span class="property">type</span>=<span class="string">&quot;text/css&quot;</span>;<span class="keyword">try</span>&#123;a.<span class="title function_">appendChild</span>(t.<span class="title function_">createTextNode</span>(e))&#125;<span class="keyword">catch</span>(t)&#123;a.<span class="property">styleSheet</span>.<span class="property">cssText</span>=e&#125;t.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(a)&#125;<span class="keyword">function</span> <span class="title function_">s</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;rgb(&quot;</span>+~~(<span class="number">255</span>*<span class="title class_">Math</span>.<span class="title function_">random</span>())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="title class_">Math</span>.<span class="title function_">random</span>())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="title class_">Math</span>.<span class="title function_">random</span>())+<span class="string">&quot;)&quot;</span>&#125;<span class="keyword">var</span> d=[];e.<span class="property">requestAnimationFrame</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> e.<span class="property">requestAnimationFrame</span>||e.<span class="property">webkitRequestAnimationFrame</span>||e.<span class="property">mozRequestAnimationFrame</span>||e.<span class="property">oRequestAnimationFrame</span>||e.<span class="property">msRequestAnimationFrame</span>||<span class="keyword">function</span>(<span class="params">e</span>)&#123;<span class="built_in">setTimeout</span>(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),<span class="title function_">n</span>()&#125;(<span class="variable language_">window</span>,<span class="variable language_">document</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ \themes\hexo-theme-next\layout_layout.swig æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼šï¼ˆæˆ‘cloneä¸‹æ¥çš„nexté¡¹ç›®åæ˜¯hexo-theme-nextï¼Œæœ‰çš„æ˜¯nextï¼Œæ‰€ä»¥çœ‹æ¸…è‡ªå·±çš„è·¯å¾„ï¼‰</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/js/clicklove.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.17%E7%88%B1%E5%BF%83%E5%8A%A8%E7%94%BB.gif" alt></p>
<ol start="2">
<li>åœ¨ themes/hexo-theme-next/source/js/ é‡Œé¢æ–°å»ºæ–‡ä»¶ fireworks.js å¹¶æ·»åŠ ä»£ç ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>; <span class="keyword">function</span> <span class="title function_">updateCoords</span>(<span class="params">e</span>) &#123; pointerX = (e.<span class="property">clientX</span> || e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span>) - canvasEl.<span class="title function_">getBoundingClientRect</span>().<span class="property">left</span>, pointerY = e.<span class="property">clientY</span> || e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span> - canvasEl.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &#125; <span class="keyword">function</span> <span class="title function_">setParticuleDirection</span>(<span class="params">e</span>) &#123; <span class="keyword">var</span> t = anime.<span class="title function_">random</span>(<span class="number">0</span>, <span class="number">360</span>) * <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>, a = anime.<span class="title function_">random</span>(<span class="number">50</span>, <span class="number">180</span>), n = [-<span class="number">1</span>, <span class="number">1</span>][anime.<span class="title function_">random</span>(<span class="number">0</span>, <span class="number">1</span>)] * a; <span class="keyword">return</span> &#123; <span class="attr">x</span>: e.<span class="property">x</span> + n * <span class="title class_">Math</span>.<span class="title function_">cos</span>(t), <span class="attr">y</span>: e.<span class="property">y</span> + n * <span class="title class_">Math</span>.<span class="title function_">sin</span>(t) &#125; &#125; <span class="keyword">function</span> <span class="title function_">createParticule</span>(<span class="params">e, t</span>) &#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.<span class="property">x</span> = e, a.<span class="property">y</span> = t, a.<span class="property">color</span> = colors[anime.<span class="title function_">random</span>(<span class="number">0</span>, colors.<span class="property">length</span> - <span class="number">1</span>)], a.<span class="property">radius</span> = anime.<span class="title function_">random</span>(<span class="number">16</span>, <span class="number">32</span>), a.<span class="property">endPos</span> = <span class="title function_">setParticuleDirection</span>(a), a.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; ctx.<span class="title function_">beginPath</span>(), ctx.<span class="title function_">arc</span>(a.<span class="property">x</span>, a.<span class="property">y</span>, a.<span class="property">radius</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">0</span>), ctx.<span class="property">fillStyle</span> = a.<span class="property">color</span>, ctx.<span class="title function_">fill</span>() &#125;, a &#125; <span class="keyword">function</span> <span class="title function_">createCircle</span>(<span class="params">e, t</span>) &#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.<span class="property">x</span> = e, a.<span class="property">y</span> = t, a.<span class="property">color</span> = <span class="string">&quot;#F00&quot;</span>, a.<span class="property">radius</span> = <span class="number">0.1</span>, a.<span class="property">alpha</span> = <span class="number">0.5</span>, a.<span class="property">lineWidth</span> = <span class="number">6</span>, a.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; ctx.<span class="property">globalAlpha</span> = a.<span class="property">alpha</span>, ctx.<span class="title function_">beginPath</span>(), ctx.<span class="title function_">arc</span>(a.<span class="property">x</span>, a.<span class="property">y</span>, a.<span class="property">radius</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">0</span>), ctx.<span class="property">lineWidth</span> = a.<span class="property">lineWidth</span>, ctx.<span class="property">strokeStyle</span> = a.<span class="property">color</span>, ctx.<span class="title function_">stroke</span>(), ctx.<span class="property">globalAlpha</span> = <span class="number">1</span> &#125;, a &#125; <span class="keyword">function</span> <span class="title function_">renderParticule</span>(<span class="params">e</span>) &#123; <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; e.<span class="property">animatables</span>.<span class="property">length</span>; t++) &#123; e.<span class="property">animatables</span>[t].<span class="property">target</span>.<span class="title function_">draw</span>() &#125; &#125; <span class="keyword">function</span> <span class="title function_">animateParticules</span>(<span class="params">e, t</span>) &#123; <span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="title function_">createCircle</span>(e, t), n = [], i = <span class="number">0</span>; i &lt; numberOfParticules; i++) &#123; n.<span class="title function_">push</span>(<span class="title function_">createParticule</span>(e, t)) &#125; anime.<span class="title function_">timeline</span>().<span class="title function_">add</span>(&#123; <span class="attr">targets</span>: n, <span class="attr">x</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="keyword">return</span> e.<span class="property">endPos</span>.<span class="property">x</span> &#125;, <span class="attr">y</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="keyword">return</span> e.<span class="property">endPos</span>.<span class="property">y</span> &#125;, <span class="attr">radius</span>: <span class="number">0.1</span>, <span class="attr">duration</span>: anime.<span class="title function_">random</span>(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">&quot;easeOutExpo&quot;</span>, <span class="attr">update</span>: renderParticule &#125;).<span class="title function_">add</span>(&#123; <span class="attr">targets</span>: a, <span class="attr">radius</span>: anime.<span class="title function_">random</span>(<span class="number">80</span>, <span class="number">160</span>), <span class="attr">lineWidth</span>: <span class="number">0</span>, <span class="attr">alpha</span>: &#123; <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">easing</span>: <span class="string">&quot;linear&quot;</span>, <span class="attr">duration</span>: anime.<span class="title function_">random</span>(<span class="number">600</span>, <span class="number">800</span>) &#125;, <span class="attr">duration</span>: anime.<span class="title function_">random</span>(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">&quot;easeOutExpo&quot;</span>, <span class="attr">update</span>: renderParticule, <span class="attr">offset</span>: <span class="number">0</span> &#125;) &#125; <span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">e, t</span>) &#123; <span class="keyword">var</span> a; <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">var</span> n = <span class="variable language_">this</span>, i = <span class="variable language_">arguments</span>; <span class="built_in">clearTimeout</span>(a), a = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; e.<span class="title function_">apply</span>(n, i) &#125;, t) &#125; &#125; <span class="keyword">var</span> canvasEl = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.fireworks&quot;</span>); <span class="keyword">if</span> (canvasEl) &#123; <span class="keyword">var</span> ctx = canvasEl.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>), numberOfParticules = <span class="number">30</span>, pointerX = <span class="number">0</span>, pointerY = <span class="number">0</span>, tap = <span class="string">&quot;mousedown&quot;</span>, colors = [<span class="string">&quot;#FF1461&quot;</span>, <span class="string">&quot;#18FF92&quot;</span>, <span class="string">&quot;#5A87FF&quot;</span>, <span class="string">&quot;#FBF38C&quot;</span>], setCanvasSize = <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; canvasEl.<span class="property">width</span> = <span class="number">2</span> * <span class="variable language_">window</span>.<span class="property">innerWidth</span>, canvasEl.<span class="property">height</span> = <span class="number">2</span> * <span class="variable language_">window</span>.<span class="property">innerHeight</span>, canvasEl.<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> + <span class="string">&quot;px&quot;</span>, canvasEl.<span class="property">style</span>.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="string">&quot;px&quot;</span>, canvasEl.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>).<span class="title function_">scale</span>(<span class="number">2</span>, <span class="number">2</span>) &#125;, <span class="number">500</span>), render = <span class="title function_">anime</span>(&#123; <span class="attr">duration</span>: <span class="number">1</span> / <span class="number">0</span>, <span class="attr">update</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvasEl.<span class="property">width</span>, canvasEl.<span class="property">height</span>) &#125; &#125;); <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(tap, <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="string">&quot;sidebar&quot;</span> !== e.<span class="property">target</span>.<span class="property">id</span> &amp;&amp; <span class="string">&quot;toggle-sidebar&quot;</span> !== e.<span class="property">target</span>.<span class="property">id</span> &amp;&amp; <span class="string">&quot;A&quot;</span> !== e.<span class="property">target</span>.<span class="property">nodeName</span> &amp;&amp; <span class="string">&quot;IMG&quot;</span> !== e.<span class="property">target</span>.<span class="property">nodeName</span> &amp;&amp; (render.<span class="title function_">play</span>(), <span class="title function_">updateCoords</span>(e), <span class="title function_">animateParticules</span>(pointerX, pointerY)) &#125;, !<span class="number">1</span>), <span class="title function_">setCanvasSize</span>(), <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, setCanvasSize, !<span class="number">1</span>) &#125; <span class="string">&quot;use strict&quot;</span>; <span class="keyword">function</span> <span class="title function_">updateCoords</span>(<span class="params">e</span>) &#123; pointerX = (e.<span class="property">clientX</span> || e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientX</span>) - canvasEl.<span class="title function_">getBoundingClientRect</span>().<span class="property">left</span>, pointerY = e.<span class="property">clientY</span> || e.<span class="property">touches</span>[<span class="number">0</span>].<span class="property">clientY</span> - canvasEl.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &#125; <span class="keyword">function</span> <span class="title function_">setParticuleDirection</span>(<span class="params">e</span>) &#123; <span class="keyword">var</span> t = anime.<span class="title function_">random</span>(<span class="number">0</span>, <span class="number">360</span>) * <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>, a = anime.<span class="title function_">random</span>(<span class="number">50</span>, <span class="number">180</span>), n = [-<span class="number">1</span>, <span class="number">1</span>][anime.<span class="title function_">random</span>(<span class="number">0</span>, <span class="number">1</span>)] * a; <span class="keyword">return</span> &#123; <span class="attr">x</span>: e.<span class="property">x</span> + n * <span class="title class_">Math</span>.<span class="title function_">cos</span>(t), <span class="attr">y</span>: e.<span class="property">y</span> + n * <span class="title class_">Math</span>.<span class="title function_">sin</span>(t) &#125; &#125; <span class="keyword">function</span> <span class="title function_">createParticule</span>(<span class="params">e, t</span>) &#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.<span class="property">x</span> = e, a.<span class="property">y</span> = t, a.<span class="property">color</span> = colors[anime.<span class="title function_">random</span>(<span class="number">0</span>, colors.<span class="property">length</span> - <span class="number">1</span>)], a.<span class="property">radius</span> = anime.<span class="title function_">random</span>(<span class="number">16</span>, <span class="number">32</span>), a.<span class="property">endPos</span> = <span class="title function_">setParticuleDirection</span>(a), a.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; ctx.<span class="title function_">beginPath</span>(), ctx.<span class="title function_">arc</span>(a.<span class="property">x</span>, a.<span class="property">y</span>, a.<span class="property">radius</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">0</span>), ctx.<span class="property">fillStyle</span> = a.<span class="property">color</span>, ctx.<span class="title function_">fill</span>() &#125;, a &#125; <span class="keyword">function</span> <span class="title function_">createCircle</span>(<span class="params">e, t</span>) &#123; <span class="keyword">var</span> a = &#123;&#125;; <span class="keyword">return</span> a.<span class="property">x</span> = e, a.<span class="property">y</span> = t, a.<span class="property">color</span> = <span class="string">&quot;#F00&quot;</span>, a.<span class="property">radius</span> = <span class="number">0.1</span>, a.<span class="property">alpha</span> = <span class="number">0.5</span>, a.<span class="property">lineWidth</span> = <span class="number">6</span>, a.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123; ctx.<span class="property">globalAlpha</span> = a.<span class="property">alpha</span>, ctx.<span class="title function_">beginPath</span>(), ctx.<span class="title function_">arc</span>(a.<span class="property">x</span>, a.<span class="property">y</span>, a.<span class="property">radius</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">0</span>), ctx.<span class="property">lineWidth</span> = a.<span class="property">lineWidth</span>, ctx.<span class="property">strokeStyle</span> = a.<span class="property">color</span>, ctx.<span class="title function_">stroke</span>(), ctx.<span class="property">globalAlpha</span> = <span class="number">1</span> &#125;, a &#125; <span class="keyword">function</span> <span class="title function_">renderParticule</span>(<span class="params">e</span>) &#123; <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; e.<span class="property">animatables</span>.<span class="property">length</span>; t++) &#123; e.<span class="property">animatables</span>[t].<span class="property">target</span>.<span class="title function_">draw</span>() &#125; &#125; <span class="keyword">function</span> <span class="title function_">animateParticules</span>(<span class="params">e, t</span>) &#123; <span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="title function_">createCircle</span>(e, t), n = [], i = <span class="number">0</span>; i &lt; numberOfParticules; i++) &#123; n.<span class="title function_">push</span>(<span class="title function_">createParticule</span>(e, t)) &#125; anime.<span class="title function_">timeline</span>().<span class="title function_">add</span>(&#123; <span class="attr">targets</span>: n, <span class="attr">x</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="keyword">return</span> e.<span class="property">endPos</span>.<span class="property">x</span> &#125;, <span class="attr">y</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="keyword">return</span> e.<span class="property">endPos</span>.<span class="property">y</span> &#125;, <span class="attr">radius</span>: <span class="number">0.1</span>, <span class="attr">duration</span>: anime.<span class="title function_">random</span>(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">&quot;easeOutExpo&quot;</span>, <span class="attr">update</span>: renderParticule &#125;).<span class="title function_">add</span>(&#123; <span class="attr">targets</span>: a, <span class="attr">radius</span>: anime.<span class="title function_">random</span>(<span class="number">80</span>, <span class="number">160</span>), <span class="attr">lineWidth</span>: <span class="number">0</span>, <span class="attr">alpha</span>: &#123; <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">easing</span>: <span class="string">&quot;linear&quot;</span>, <span class="attr">duration</span>: anime.<span class="title function_">random</span>(<span class="number">600</span>, <span class="number">800</span>) &#125;, <span class="attr">duration</span>: anime.<span class="title function_">random</span>(<span class="number">1200</span>, <span class="number">1800</span>), <span class="attr">easing</span>: <span class="string">&quot;easeOutExpo&quot;</span>, <span class="attr">update</span>: renderParticule, <span class="attr">offset</span>: <span class="number">0</span> &#125;) &#125; <span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">e, t</span>) &#123; <span class="keyword">var</span> a; <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">var</span> n = <span class="variable language_">this</span>, i = <span class="variable language_">arguments</span>; <span class="built_in">clearTimeout</span>(a), a = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; e.<span class="title function_">apply</span>(n, i) &#125;, t) &#125; &#125; <span class="keyword">var</span> canvasEl = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.fireworks&quot;</span>); <span class="keyword">if</span> (canvasEl) &#123; <span class="keyword">var</span> ctx = canvasEl.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>), numberOfParticules = <span class="number">30</span>, pointerX = <span class="number">0</span>, pointerY = <span class="number">0</span>, tap = <span class="string">&quot;mousedown&quot;</span>, colors = [<span class="string">&quot;#FF1461&quot;</span>, <span class="string">&quot;#18FF92&quot;</span>, <span class="string">&quot;#5A87FF&quot;</span>, <span class="string">&quot;#FBF38C&quot;</span>], setCanvasSize = <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; canvasEl.<span class="property">width</span> = <span class="number">2</span> * <span class="variable language_">window</span>.<span class="property">innerWidth</span>, canvasEl.<span class="property">height</span> = <span class="number">2</span> * <span class="variable language_">window</span>.<span class="property">innerHeight</span>, canvasEl.<span class="property">style</span>.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span> + <span class="string">&quot;px&quot;</span>, canvasEl.<span class="property">style</span>.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span> + <span class="string">&quot;px&quot;</span>, canvasEl.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>).<span class="title function_">scale</span>(<span class="number">2</span>, <span class="number">2</span>) &#125;, <span class="number">500</span>), render = <span class="title function_">anime</span>(&#123; <span class="attr">duration</span>: <span class="number">1</span> / <span class="number">0</span>, <span class="attr">update</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvasEl.<span class="property">width</span>, canvasEl.<span class="property">height</span>) &#125; &#125;); <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(tap, <span class="keyword">function</span> (<span class="params">e</span>) &#123; <span class="string">&quot;sidebar&quot;</span> !== e.<span class="property">target</span>.<span class="property">id</span> &amp;&amp; <span class="string">&quot;toggle-sidebar&quot;</span> !== e.<span class="property">target</span>.<span class="property">id</span> &amp;&amp; <span class="string">&quot;A&quot;</span> !== e.<span class="property">target</span>.<span class="property">nodeName</span> &amp;&amp; <span class="string">&quot;IMG&quot;</span> !== e.<span class="property">target</span>.<span class="property">nodeName</span> &amp;&amp; (render.<span class="title function_">play</span>(), <span class="title function_">updateCoords</span>(e), <span class="title function_">animateParticules</span>(pointerX, pointerY)) &#125;, !<span class="number">1</span>), <span class="title function_">setCanvasSize</span>(), <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, setCanvasSize, !<span class="number">1</span>) &#125;;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ‰“å¼€ themes/hexo-theme-next/layout/_layout.swigï¼Œåœ¨é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</li>
</ol>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> theme.fireworks %&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;fireworks&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/fireworks.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœ«å°¾æ·»åŠ ï¼š</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é¼ æ ‡ç‚¹å‡»åŠ¨ç”» Fireworks</span></span><br><span class="line"><span class="attr">fireworks:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.17%E7%83%9F%E8%8A%B1%E5%8A%A8%E7%94%BB.png" alt></p>
<h3 id="3.18-%E8%83%8C%E6%99%AF%E5%8A%A8%E7%94%BB" tabindex="-1">3.18 èƒŒæ™¯åŠ¨ç”»</h3>
<ol>
<li>ä¸å¸¦èƒŒæ™¯åŠ¨ç”»(TODO) è¿˜æœªå¯ç”¨</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸å¸¦èƒŒæ™¯åŠ¨ç”»</span></span><br><span class="line"><span class="comment"># Generate a ribbon in your website with HTML5 canvas.</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/hustcc/ribbon.js</span></span><br><span class="line"><span class="attr">canvas_ribbon:</span> <span class="comment"># ä¸å¸¦èƒŒæ™¯åŠ¨ç”»</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span> <span class="comment"># The width of the ribbon</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span> <span class="comment"># The transparency of the ribbon</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># The display level of the ribbon</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ç½‘æ ¼èƒŒæ™¯åŠ¨ç”»</li>
</ol>
<ul>
<li>æ‰“å¼€ hexo-theme-next/layout/_layout.swigï¼Œåœ¨<body></body>æ ‡ç­¾å†…æ·»åŠ ä»£ç </li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">if</span> <span class="string">theme.canvas_nest</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">&lt;script</span> <span class="string">type=&quot;text/javascript&quot;</span></span><br><span class="line">    <span class="string">count=&quot;150&quot;</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">1</span></span><br><span class="line">    <span class="string">src=&quot;//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endif</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure>
<p>åŸæ–‡æ€€ç–‘srcé‡Œçš„é“¾æ¥é…ç½®çš„ count=99ï¼Œæ‰€ä»¥è®¾ç½®äº†å†…è”å¼ count=150ï¼ˆé»˜è®¤ä¹Ÿæ˜¯150ï¼‰, è®¾ç½®åcountçš„æ•°é‡æ˜æ˜¾å¢åŠ </p>
<ul>
<li>é…ç½®é¡¹
<ul>
<li>colorï¼šçº¿æ¡é¢œè‰², é»˜è®¤: â€˜0,0,0â€™ ï¼›ä¸‰ä¸ªæ•°å­—åˆ†åˆ«ä¸º(R,G,B)ï¼Œæ³¨æ„ç”¨, åˆ†å‰²</li>
<li>opacityï¼šçº¿æ¡é€æ˜åº¦ï¼ˆ0ï½1ï¼‰ï¼Œé»˜è®¤ 0.5</li>
<li>countï¼šçº¿æ¡çš„æ€»æ•°é‡ï¼Œé»˜è®¤ 150</li>
<li>zIndexï¼šèƒŒæ™¯çš„z-indexå±æ€§ï¼Œcsså±æ€§ç”¨äºæ§åˆ¶æ‰€åœ¨å±‚çš„ä½ç½®ï¼Œé»˜è®¤ï¼š-1</li>
</ul>
</li>
</ul>
<ol start="3">
<li>æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-nest</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line"><span class="comment"># canvas_nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯åŠ¨ç”» è€ç‰ˆçš„ä¸èƒ½ç”¨enable: true</span></span><br><span class="line"><span class="comment"># canvas_nest: false # å…³é—­åŠ¨ç”»</span></span><br></pre></td></tr></table></figure>
<h3 id="3.19-%E6%96%87%E7%AB%A0%E7%BB%93%E6%9D%9F%E6%A0%87%E5%BF%97" tabindex="-1">3.19 æ–‡ç« ç»“æŸæ ‡å¿—</h3>
<ul>
<li>åœ¨è·¯å¾„ \themes\hexo-theme-next\layout\_macro ä¸­æ–°å»º passage-end-tag.swig æ–‡ä»¶,å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        &lt;div style=&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------å·²ç»åˆ°åº•å•¦ï¼&lt;i class=&quot;fa fa-paw&quot;&gt;&lt;/i&gt;-------------&lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰“å¼€ \themes\hexo-theme-next\layout\_macro\post.swig æ–‡ä»¶ï¼Œåœ¨post-body ä¹‹å(END POST BODY)ï¼Œpost-footer ä¹‹å‰æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">    &#123;% include &#x27;passage-end-tag.swig&#x27; %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3.20-%E9%85%8D%E7%BD%AElive-2d%E6%A8%A1%E5%9E%8B" tabindex="-1">3.20 é…ç½®live-2dæ¨¡å‹</h3>
<ul>
<li>å®‰è£… hexo-helper-live2d æ’ä»¶</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -save hexo-helper-live2d</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>è¿™ä¸ªé»˜è®¤æ˜¯ shizuku ä¸ç”¨é…ç½®ï¼Œå®‰è£…åç›´æ¥åœ¨ç«™ç‚¹æ˜¾ç¤ºï¼Œä½†å¦‚æœæƒ³è¦æ€§èƒ½ä¼˜åŒ–ï¼Œé…ç½®æ¨¡å‹ç›¸å…³ä¿¡æ¯çš„è¯ï¼Œéœ€è¦å†å®‰è£… shizukuã€‚</p>
</li>
<li>
<p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å‚æ•°ï¼šï¼ˆæƒ³è¦é…ç½®å‚æ•°çš„è¯ï¼Œéœ€è¦é‡æ–°ä¸‹è½½ä¸“é—¨çš„æ¨¡å‹åŒ…ï¼‰</p>
</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-&lt;ä½ å–œæ¬¢çš„æ¨¡å‹åå­—&gt;</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="comment"># width: 150 # å¤§å°æ ¹æ®æ¨¡å‹ç»“æ„è‡ªå·±è°ƒæ•´åˆé€‚çš„</span></span><br><span class="line">    <span class="comment"># height: 300</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦åœ¨æ‰‹æœºç«¯æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ä¾›é€‰æ‹©æ¨¡å‹ï¼š</li>
</ul>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">live2d-widget-<span class="keyword">model</span>-chitose</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-epsilon2_1</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-gf</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-haru/<span class="number">01</span> (use npm install --save live2d-widget-<span class="keyword">model</span>-haru)</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-haru/<span class="number">02</span> (use npm install --save live2d-widget-<span class="keyword">model</span>-haru)</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-haruto</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-hibiki</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-hijiki</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-izumi</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-koharu</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-miku</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-ni-j</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-nico</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-nietzsche</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-nipsilon</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-nito</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-shizuku</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-tororo</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-tsumiki</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-unitychan</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-wanko</span><br><span class="line"></span><br><span class="line">live2d-widget-<span class="keyword">model</span>-z16</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸Šé¢æ¨¡å‹çš„é€‰æ‹©å¯åœ¨lived2dä¸­é€‰æ‹©ï¼Œå¹¶ä¸‹è½½ç›¸åº”çš„æ¨¡å‹ï¼šï¼ˆè¿™é‡Œå…ˆé€‰æ‹©äº† wankoä½œä¸ºç¤ºä¾‹ï¼‰</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install live2d-widget-model-wanko --save</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>å®‰è£… shizuku æ¨¡å‹æ—¶å»ºè®® cnpmï¼Œé€Ÿåº¦å¾ˆå¿«ä¸”ç”¨npmå®‰è£…è¿™ä¸ªæ¨¡å‹å®¹æ˜“å‡ºç° network error</p>
</li>
<li>
<p>ä¸‹è½½cnpmæ·˜å®æº(TODO)ï¼ˆæˆ‘è¿™é‡Œå°±æ²¡ä¸‹è½½äº†,ç›´æ¥å®‰è£…çš„ï¼‰</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<ul>
<li>å®‰è£… shizuku æ¨¡å‹</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install live2d-widget-model-shizuku --save</span><br></pre></td></tr></table></figure>
<ul>
<li>hexo-helper-live2d ç›¸å½“äº live2d çš„è„šæ‰‹æ¶ï¼Œä¸èƒ½åªä¸‹è½½ modelï¼Œåˆ é™¤äº† hexo-helper-live2dï¼Œlive2d æ¨¡å‹æ— æ³•ç”Ÿæˆ</li>
</ul>
<h3 id="3.21-%E4%BE%A7%E8%BE%B9%E6%A0%8F%E7%A4%BE%E4%BA%A4%E9%93%BE%E6%8E%A5" tabindex="-1">3.21 ä¾§è¾¹æ ç¤¾äº¤é“¾æ¥</h3>
<p>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯ social å¹¶é€‰æ‹©æƒ³è¦çš„ç¤¾äº¤é“¾æ¥ï¼Œå–æ¶ˆæ³¨é‡Š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="comment"># GitHub: https://github.com/Benn314 || fab fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="number">936184713</span><span class="string">@qq.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="attr">Bilibili:</span> <span class="string">https://space.bilibili.com/8032462?spm_id_from=333.1007.0.0</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="attr">CSDN:</span> <span class="string">https://blog.csdn.net/qq_41234218?type=blog</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="comment">#Weibo: https://weibo.com/yourname || fab fa-weibo</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/yourname || fab fa-twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || fab fa-youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || fab fa-instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || fab fa-skype</span></span><br></pre></td></tr></table></figure>
<h4 id="3.21.1-%E8%87%AA%E5%AE%9A%E4%B9%89icon%E5%9B%BE%E6%A0%87" tabindex="-1">3.21.1 è‡ªå®šä¹‰iconå›¾æ ‡</h4>
<ul>
<li>
<p>é¦–å…ˆå» <a href="https://www.iconfont.cn/">iconfont-é˜¿é‡Œå·´å·´çŸ¢é‡å›¾åº“</a> ä¸‹è½½ svg æ ¼å¼çš„å›¾æ ‡ï¼Œéœ€è¦ä»€ä¹ˆå›¾æ ‡åˆ™æœç´¢ç›¸åº”å›¾æ ‡å¹¶ä¸‹è½½ï¼Œç„¶åæŠŠå›¾æ ‡æ”¾åœ¨ \themes\hexo-theme-next\source\images ç›®å½•ä¸‹</p>
</li>
<li>
<p>åœ¨ \themes\hexo-theme-next\source\css ç›®å½•ä¸‹çš„ main.styl æ·»åŠ ä»£ç <br>
è¿™é‡Œä»¥ bilibili å’Œ CSDN ä¸ºä¾‹ï¼š (è®°å¾—æŠŠä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡åæ”¹ä¸ºbilibili.svgå’Œcsdn.svg)</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* ä¾§è¾¹æ å›¾æ ‡æ ¼å¼è®¾ç½® */</span></span><br><span class="line"><span class="selector-class">.bilibili</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/bilibili.svg&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">1em</span> <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.55</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">0.05rem</span> <span class="number">0.2rem</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1rem</span>; </span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0rem</span>;</span><br><span class="line">  <span class="comment">/*é¼ æ ‡åœç•™åœ¨å›¾æ ‡ä¸Šæ—¶ï¼Œå›¾æ ‡å‘ˆç°å‘å…‰æ•ˆæœ*/</span></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="selector-class">.csdn</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;/images/csdn.svg&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">1em</span> <span class="number">1em</span>; <span class="comment">/*ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®½ ç¬¬äºŒä¸ªæ˜¯é«˜*/</span></span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.55</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">0.05rem</span> <span class="number">0.2rem</span>;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1rem</span>; </span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0rem</span>;</span><br><span class="line">  <span class="comment">/*é¼ æ ‡åœç•™åœ¨å›¾æ ‡ä¸Šæ—¶ï¼Œå›¾æ ‡å‘ˆç°å‘å…‰æ•ˆæœ*/</span></span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯ social å¹¶åœ¨ social é¡¹ä¸‹å›¾ç‰‡æ¥æºè®¾ç½®ä¸º fa bilibili å’Œ fa csdn</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/ConanGentleman</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="number">936184713</span><span class="string">@qq.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="attr">Bilibili:</span> <span class="string">https://space.bilibili.com/8032462?spm_id_from=333.1007.0.0</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">bilibili</span></span><br><span class="line">  <span class="attr">CSDN:</span> <span class="string">https://blog.csdn.net/qq_41234218?type=blog</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">csdn</span></span><br><span class="line">  <span class="comment">#Weibo: https://weibo.com/yourname || fab fa-weibo</span></span><br><span class="line">  <span class="comment">#Twitter: https://twitter.com/yourname || fab fa-twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || fab fa-youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || fab fa-instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || fab fa-skype</span></span><br></pre></td></tr></table></figure>
<h3 id="3.22-%E6%B7%BB%E5%8A%A0fork-me-on-github%E5%85%A5%E5%8F%A3" tabindex="-1">3.22 æ·»åŠ fork me on githubå…¥å£</h3>
<ul>
<li>é¦–å…ˆåˆ° GitHub Corners æˆ–è€… GitHub Ribbons é€‰æ‹©è‡ªå·±å–œæ¬¢çš„å›¾æ ‡ï¼Œç„¶åcopyç›¸åº”çš„ä»£ç ç²˜è´´åˆ° themes/hexo-theme-next/layout/_layout.swig æ–‡ä»¶ä¸­ï¼ŒæŠŠä»£ç ä¸­çš„hrefåé¢çš„å€¼æ›¿æ¢æˆä½ è¦è·³è½¬çš„åœ°å€ï¼Œæ¯”å¦‚ä½ çš„GitHubä¸»é¡µ</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/ConanGentleman&quot;</span> <span class="attr">class</span>=<span class="string">&quot;github-corner&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;View source on GitHub&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">height</span>=<span class="string">&quot;80&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 250 250&quot;</span> <span class="attr">style</span>=<span class="string">&quot;fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">style</span>=<span class="string">&quot;transform-origin: 130px 106px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;octo-arm&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;octo-body&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"><span class="selector-class">.github-corner</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.octo-arm</span>&#123;<span class="attribute">animation</span>:octocat-wave <span class="number">560ms</span> ease-in-out&#125;<span class="keyword">@keyframes</span> octocat-wave&#123;<span class="number">0%</span>,<span class="number">100%</span>&#123;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0</span>)&#125;<span class="number">20%</span>,<span class="number">60%</span>&#123;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(-<span class="number">25deg</span>)&#125;<span class="number">40%</span>,<span class="number">80%</span>&#123;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">10deg</span>)&#125;&#125;<span class="keyword">@media</span> (<span class="attribute">max-width</span>:<span class="number">500px</span>)&#123;<span class="selector-class">.github-corner</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.octo-arm</span>&#123;<span class="attribute">animation</span>:none&#125;<span class="selector-class">.github-corner</span> <span class="selector-class">.octo-arm</span>&#123;<span class="attribute">animation</span>:octocat-wave <span class="number">560ms</span> ease-in-out&#125;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.23forkmeon%20github%E5%85%A5%E5%8F%A3.jpg" alt></p>
<h3 id="3.23-%E6%9B%B4%E6%8D%A2%E5%8D%9A%E5%AE%A2%E8%83%8C%E6%99%AF" tabindex="-1">3.23 æ›´æ¢åšå®¢èƒŒæ™¯</h3>
<ol>
<li>æ›´æ¢ä¸»èƒŒæ™¯</li>
</ol>
<ul>
<li>
<p>æŠŠå‡†å¤‡å¥½çš„èƒŒæ™¯å›¾æ”¾å…¥ themes\hexo-theme-next\source\images ä¸­</p>
</li>
<li>
<p>æ–°ç‰ˆæœ¬éœ€è¦æ–°å»º hexo/source/_data/styles.stylï¼Œå³åœ¨ hexoç›®å½•çš„ sourceæ–‡ä»¶å¤¹ä¸‹æ–°å»º _data æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­æ–°å»º styles.stylã€‚<strong>æ³¨æ„ï¼šæ˜¯æ–°å»ºåœ¨ hexoç›®å½•ä¸‹ sourceæ–‡ä»¶å¤¹é‡Œï¼Œè€Œä¸æ˜¯ä¸»é¢˜æ–‡ä»¶ nextç›®å½•ä¸‹çš„ sourceæ–‡ä»¶å¤¹</strong>ï¼Œå¦‚å›¾ï¼š<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.22%E6%9B%B4%E6%8D%A2%E5%8D%9A%E5%AE%A2%E8%83%8C%E6%99%AF%E6%96%87%E4%BB%B6%E5%A4%B9.jpg" alt></p>
</li>
<li>
<p>æ‰“å¼€ styles.stylï¼Œæ·»åŠ å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//èƒŒæ™¯å›¾ç‰‡è®¾ç½®</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">/images/background.jpg</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">    // <span class="attribute">background-size</span>: cover // å¡«å……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>é…ç½®é¡¹</p>
<ul>
<li>background-image:url ä¸ºå›¾ç‰‡è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é“¾æ¥ï¼Œä¹Ÿå¯ä»¥æ˜¯å›¾ç‰‡è·¯å¾„ï¼ˆå°†è‡ªå®šä¹‰å›¾ç‰‡æ”¾å…¥hexo-theme-next\public\imagesè·¯å¾„ä¸‹æˆ–è€…ä¹‹å‰æåˆ°çš„themes\hexo-theme-next\source\imagesä¸­ï¼‰</li>
<li>background-repeatï¼šè‹¥æœèƒŒæ™¯å›¾ç‰‡ä¸èƒ½å…¨å±ï¼Œé‚£ä¹ˆæ˜¯å¦å¹³é“ºæ˜¾ç¤ºï¼Œå……æ»¡å±å¹•</li>
<li>background-attachmentï¼šèƒŒæ™¯æ˜¯å¦éšç€ç½‘é¡µä¸Šä¸‹æ»šåŠ¨è€Œæ»šåŠ¨ï¼Œfixed ä¸ºå›ºå®š</li>
<li>background-sizeï¼šå›¾ç‰‡å±•ç¤ºå¤§å°ï¼Œè¿™é‡Œè®¾ç½® 100%ï¼Œ100% çš„æ„ä¹‰ä¸ºï¼šå¦‚æœèƒŒæ™¯å›¾ç‰‡ä¸èƒ½å…¨å±ï¼Œé‚£ä¹ˆæ˜¯å¦é€šè¿‡æ‹‰ä¼¸çš„æ–¹å¼å°†èƒŒæ™¯å¼ºåˆ¶æ‹‰ä¼¸è‡³å…¨å±æ˜¾ç¤º</li>
<li>background-size: cover // å¡«å……</li>
</ul>
</li>
<li>
<p>æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå°† custom_file_path çš„ sytle æ³¨é‡Šæ‰“å¼€ã€‚(<strong>variable</strong>: source/_data/variables.stylæ˜¯<strong>åé¢<a href="#325-%E8%BE%B9%E6%A1%86%E5%9C%86%E8%A7%92">3.25-è¾¹æ¡†åœ†è§’</a>æ‰è®¾ç½®çš„</strong>è¿™é‡Œå¯ä»¥å…ˆä¸ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥å…ˆè®¾ç½®äº†)</p>
</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.njk</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.njk</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.njk</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.njk</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ·»åŠ ä¾§è¾¹æ èƒŒæ™¯</li>
</ol>
<ul>
<li>å¯¹ themes\hexo-theme-next\source\css\_schemes\Pisces\_header.styl ä¸­ site-brand-containerçš„backgroundè¿›è¡Œä¿®æ”¹</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.site-brand-container</span> &#123;</span><br><span class="line">  // <span class="attribute">background</span>: <span class="built_in">var</span>(--theme-color); // é»˜è®¤èƒŒæ™¯</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://images.unsplash.com/photo-1668871333606-ef8461d43922?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHw0fHx8ZW58MHx8fHw%3D&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=60&#x27;</span>);</span><br><span class="line">  // <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://images.unsplash.com/photo-1661961110144-12ac85918e40?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHw4NHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=60&#x27;</span>);</span><br><span class="line">  // <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://images.unsplash.com/photo-1668735648397-9defaa967b15?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMDV8fHxlbnwwfHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=60&#x27;</span>);</span><br><span class="line">  // <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://images.unsplash.com/photo-1668765005700-021ea0bb9250?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxMDN8fHxlbnwwfHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=60&#x27;</span>);</span><br><span class="line">  //<span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://images.unsplash.com/photo-1668681919287-7367677cdc4c?ixlib=rb-4.0.3&amp;ixid=MnwxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwxNTV8fHxlbnwwfHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=600&amp;q=60&#x27;</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: cover; // å¡«å……</span><br><span class="line">  //<span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.site-nav-on</span> &amp; &#123;</span><br><span class="line">    +tablet-mobile() &#123;</span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">16px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰©å±•<br>
<a href="https://source.unsplash.com/">unsplash</a>æ˜¯ä¸€ä¸ªé«˜æ¸…å¤§å›¾å…è´¹ä¸‹è½½çš„å¥½ç½‘ç«™ï¼Œæä¾›äº†å¤§é‡çš„å›¾ç‰‡å’Œå¤–é“¾APIï¼Œå¯ä»¥ç”¨æ¥å½“ä½œè‡ªå·±çš„åšå®¢èƒŒæ™¯</li>
</ul>
<h3 id="3.24-%E8%AE%BE%E7%BD%AE%E9%80%8F%E6%98%8E%E5%BA%A6" tabindex="-1">3.24 è®¾ç½®é€æ˜åº¦</h3>
<ul>
<li>
<p>å•ç‹¬ç»™æ¯ä¸ªåŒºåŸŸè®¾ç½®opacityä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œä¾‹å¦‚æœç´¢æ¡†å¼¹å‡ºä¼šè¢«è¦†ç›–å›¾å±‚å¯¼è‡´æ— æ³•è¿›è¡Œæœ¬åœ°æœç´¢</p>
</li>
<li>
<p>æœ€ç†æƒ³æ˜¯è¿›è¡Œå…¨å±€è®¾ç½®ï¼Œåœ¨ blog\source\_data\styles.styl ä¸­ ç›´æ¥è®¾ç½®bodyçš„é€æ˜åº¦ä¸º0.85 å…¨ä½“é€æ˜åŒ–ï¼Œopacityçš„å€¼å¯ä»¥è‡ªè¡Œè°ƒæ•´</p>
</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//èƒŒæ™¯å›¾ç‰‡è®¾ç½®</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">/images/background.jpg</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">    // <span class="attribute">background-size</span>: cover // å¡«å……</span><br><span class="line">    opacity: <span class="number">0.85</span>;</span><br><span class="line">    //å¯é€‰(ç”¨äºç§»åŠ¨ç«¯æ˜¾ç¤º)</span><br><span class="line">    +mobile()&#123;</span><br><span class="line">      <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">https://unsplash.com/photos/shooting-star-in-night-sky-5LOhydOtTKU</span>); //è¿™é‡Œé€‰ç”¨çš„æ˜¯https://source.unsplash.com/ä¸Šçš„åœ¨çº¿å›¾ç‰‡ï¼Œç”¨äºç§»åŠ¨ç«¯æ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰</span><br><span class="line">      background-size: cover;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3.24.1-%E6%96%87%E7%AB%A0%E5%8C%BA%E5%9F%9F%E4%BD%8D%E7%BD%AE%E8%B0%83%E6%95%B4(todo%2C%E8%B0%83%E6%95%B4%E4%BA%86%E4%BC%9A%E6%9C%89%E9%97%AE%E9%A2%98%EF%BC%8C%E5%BB%BA%E8%AE%AE%E5%88%AB%E8%B0%83%E6%95%B4%E4%BA%86%EF%BC%8C%E6%88%96%E8%80%85%E6%9F%A5%E4%B8%80%E4%B8%8B%E9%94%99%E8%AF%AF)" tabindex="-1">3.24.1 æ–‡ç« åŒºåŸŸä½ç½®è°ƒæ•´(TODO,è°ƒæ•´äº†ä¼šæœ‰é—®é¢˜ï¼Œå»ºè®®åˆ«è°ƒæ•´äº†ï¼Œæˆ–è€…æŸ¥ä¸€ä¸‹é”™è¯¯)</h4>
<ul>
<li>åœ¨\themes\hexo-theme-next\source\css_common\components\post\post.styl ï¼ˆæ—§ç‰ˆå¯èƒ½æ˜¯index.stylæ–‡ä»¶ï¼‰è®¾ç½®äº†å¸ƒå±€ï¼ˆè°ƒæ•´ä½ç½®ä¿¡æ¯ï¼‰ ,ä¸éœ€è¦çš„è¯å¯ä»¥åˆ æ‰ä¸‹é¢çš„marginå’Œpaddingï¼ˆé»˜è®¤å€¼æ²¡æœ‰è®¾ç½®marginå’Œpaddingï¼‰æˆ–è€…ä¿®æ”¹å…¶å€¼</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.use-motion</span> &#123;</span><br><span class="line">  if (hexo-config(&#x27;motion<span class="selector-class">.transition</span><span class="selector-class">.post_block</span>&#x27;)) &#123;</span><br><span class="line">    <span class="selector-class">.post-block</span> &#123;</span><br><span class="line">      <span class="attribute">visibility</span>: hidden;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">      <span class="attribute">margin-left</span>: <span class="number">2px</span>;</span><br><span class="line">      <span class="attribute">padding-top</span>: <span class="number">45px</span>;</span><br><span class="line">      // <span class="attribute">border-radius</span>: <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">      -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">      -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0.95</span>; // æ·»åŠ é€æ˜åº¦</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.pagination</span>, <span class="selector-class">.comments</span> &#123;</span><br><span class="line">      <span class="attribute">visibility</span>: hidden;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;//æ–‡ç« ä½ç½®è°ƒæ•´</span><br></pre></td></tr></table></figure>
<h3 id="3.25-%E8%BE%B9%E6%A1%86%E5%9C%86%E8%A7%92" tabindex="-1">3.25 è¾¹æ¡†åœ†è§’</h3>
<ul>
<li>åœ¨ä¹‹å‰æ–°å»ºçš„ _data ç›®å½•ä¸‹æ–°å»º variables.stylï¼Œç±»ä¼¼æ–°å»º styles.stylã€‚æ‰“å¼€ variables.stylï¼Œæ·»åŠ å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// åœ†è§’è®¾ç½®</span><br><span class="line">$<span class="attribute">border-radius</span>-inner     = <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">$<span class="attribute">border-radius</span>           = <span class="number">20px</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶, custom_file_path ä¸­ variable çš„æ³¨é‡Š è¿™ä¸ªå·²ç»åœ¨<a href="#323-%E6%9B%B4%E6%8D%A2%E5%8D%9A%E5%AE%A2%E8%83%8C%E6%99%AF">3.23 æ›´æ¢åšå®¢èƒŒæ™¯</a>ä¸­è®¾ç½®è¿‡äº†</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ­¤æ—¶æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ ä¾§è¾¹æ -åˆ†ç±»å·¦ä¸‹/å³ä¸‹ çš„åœ†è§’æ˜æ˜¾æœ‰ä¸€å±‚é˜´å½±ï¼Œä¸‹å›¾æ˜¯ä¿®æ­£è¿‡çš„ï¼ˆå›¾ç‰‡åªæ˜¯ä¸ºäº†æŒ‡æ˜ä½ç½®ï¼‰<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.25%E8%BE%B9%E6%A1%86%E5%9C%86%E8%A7%92%E9%97%AE%E9%A2%98.jpg" alt></li>
<li>åŸå› æ˜¯å¼€å¯ ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­back2top çš„ sidebar å’Œ scrollpercentï¼Œback2topçš„é˜´å½±èƒŒæ™¯è¦†ç›–äº†åœ†è§’ï¼ŒæŠŠé˜´å½±èƒŒæ™¯æ”¹ä¸ºé€æ˜ä¾¿å¯è§£å†³ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çš„åªæ˜¯scrollpercentã€‚æ‰“å¼€/themes/hexo-theme-next/source/css/_variables/Gemini.styl å†…ä»£ç ,å°† $body-bg-color èµ‹å€¼ä¸ºé€æ˜ transparent</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// Variables of Gemini scheme</span><br><span class="line">// ==================================================</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;Pisces.styl&quot;</span>;</span><br><span class="line"></span><br><span class="line">// Settings for some of the most global styles.</span><br><span class="line">// --------------------------------------------------</span><br><span class="line">// $<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>           = <span class="selector-id">#eee</span>;</span><br><span class="line">//å°† $<span class="selector-tag">body</span>-bg-<span class="attribute">color</span> èµ‹å€¼ä¸ºé€æ˜ transparent è§£å†³back2topçš„é˜´å½±èƒŒæ™¯è¦†ç›–è¾¹æ¡†åœ†è§’çš„é—®é¢˜</span><br><span class="line">$<span class="selector-tag">body</span>-bg-<span class="attribute">color</span>           = transparent; </span><br><span class="line"></span><br><span class="line">// Borders.</span><br><span class="line">// --------------------------------------------------</span><br><span class="line">$<span class="attribute">box-shadow</span>-inner        = <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">12</span>), <span class="number">0</span> <span class="number">3px</span> <span class="number">1px</span> -<span class="number">2px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">06</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">12</span>);</span><br><span class="line">$<span class="attribute">box-shadow</span>              = <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span> <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">12</span>), <span class="number">0</span> <span class="number">3px</span> <span class="number">1px</span> -<span class="number">2px</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">06</span>), <span class="number">0</span> <span class="number">1px</span> <span class="number">5px</span> <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">12</span>), <span class="number">0</span> -<span class="number">1px</span> .<span class="number">5px</span> <span class="number">0</span> rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">09</span>);</span><br><span class="line"></span><br><span class="line">$<span class="attribute">border-radius</span>-inner     = initial;</span><br><span class="line">$<span class="attribute">border-radius</span>           = initial;</span><br><span class="line">// $<span class="attribute">border-radius</span>-inner     = <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">3px</span>;</span><br><span class="line">// $<span class="attribute">border-radius</span>           = <span class="number">3px</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3.25.1-%E4%BF%AE%E6%94%B9%E4%BE%A7%E8%BE%B9%E6%A0%8F%E9%A1%B6%E9%83%A8%E5%9C%86%E8%A7%92" tabindex="-1">3.25.1 ä¿®æ”¹ä¾§è¾¹æ é¡¶éƒ¨åœ†è§’</h4>
<p>åœ¨ blog\themes\hexo-theme-next\source\css\_common\outline\header\header.styl (æ—§ç‰ˆå¯èƒ½æ˜¯index.styl) ä¸­å¯¹ site-brand-containerï¼ˆå®¡æŸ¥å…ƒç´ å¾—çŸ¥ï¼‰ è¿›è¡Œä¿®æ”¹</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.site-brand-container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18.8px</span> <span class="number">18.8px</span> <span class="number">0</span> <span class="number">0</span>; // ä¸Šè¾¹åœ†è§’ ä¸‹è¾¹å°–è§’ ä¸è®¾ç½®<span class="number">20px</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span>çš„åŸå› æ˜¯å› ä¸ºä¸‹é¢çš„sidebarçš„class=&quot;<span class="selector-tag">header</span>&quot;æœ‰ä¸€ç‚¹ç™½è‰²æº¢å‡º æ‰€ä»¥æŠŠåœ†è§’è®¾ç½®å°ç‚¹å¯¹å…¶è¿›è¡Œè¦†ç›–</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å·¦ä¸‹/å³ä¸‹è§’ä¸éœ€è¦è®¾ç½®åœ†è§’ï¼Œä¸ç„¶åè€Œä¸ç¾è§‚</p>
<h3 id="3.26-%E8%B0%83%E6%95%B4back2top%E9%80%8F%E6%98%8E%E5%BA%A6%E5%92%8C%E4%BD%8D%E7%BD%AE" tabindex="-1">3.26 è°ƒæ•´back2topé€æ˜åº¦å’Œä½ç½®</h3>
<ol>
<li>è°ƒæ•´é€æ˜åº¦<br>
è¿›å…¥ blog\themes\hexo-theme-next\source\css\_variables\Pisces.stylï¼Œæ ¹æ®è‡ªèº«åšå®¢ä¿®æ”¹é€æ˜åº¦è‡³æ»¡æ„å€¼ã€‚ï¼ˆ$b2t-opacity-hover æ–°ç‰ˆæ²¡æœ‰è¿™ä¸ªå±æ€§ ï¼Œçœ‹æœ‰æ²¡æœ‰å¿…è¦è®¾ç½®ï¼‰</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// Back <span class="selector-tag">to</span> <span class="attribute">top</span></span><br><span class="line">$b2t-<span class="attribute">opacity</span>  = .<span class="number">94</span>; // é»˜è®¤ .<span class="number">6</span> // è°ƒæ•´é€æ˜åº¦</span><br><span class="line">$b2t-<span class="attribute">opacity</span>-hover  = .<span class="number">99</span>; // é»˜è®¤ .<span class="number">8</span>   è¿™ä¸ªæ–°ç‰ˆæ²¡æœ‰ ï¼Œçœ‹æœ‰æ²¡æœ‰å¿…è¦è®¾ç½®</span><br><span class="line">$b2t-<span class="attribute">position</span>-<span class="attribute">bottom</span>          = -<span class="number">100px</span>;</span><br><span class="line">$b2t-<span class="attribute">position</span>-<span class="attribute">bottom</span>-on       = <span class="number">30px</span>;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è°ƒæ•´ä½ç½®é å·¦</li>
</ol>
<p>è°ƒæ•´ä½ç½®é å·¦çš„åŸå› æ˜¯è®¾è®¡æŠŠlive-2dæ”¾åˆ°å³è¾¹ï¼Œè€Œæ­¤æ—¶back2topæŒ‰é’®ä¸ç®¡æ˜¯åœ¨live-2då›¾å±‚ä¸Šæ–¹(ä¸ç¾è§‚)è¿˜æ˜¯ä¸‹æ–¹(æŒ‰é’®æ— æ³•è¢«ç‚¹å‡»ä¸”çœ‹ä¸åˆ°ç™¾åˆ†æ¯”)æ•ˆæœéƒ½ä¸ç†æƒ³ï¼Œæ•…æŠŠæŒ‰é’®è°ƒæ•´è‡³é å·¦ä½ç½®</p>
<ul>
<li>åœ¨ blog\themes\hexo-theme-next\source\css\_variables\base.styl ä¸­æœ‰Back to topçš„åŸºæœ¬å‚æ•°ä¿¡æ¯ï¼Œæˆ‘ä»¬æŠŠ $b2t-position-right å’Œ $b2t-position-right-mobile æ³¨é‡Šæ‰ï¼Œä½¿å…¶é»˜è®¤é å·¦</li>
</ul>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Components</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="comment">// Back to top</span></span><br><span class="line">$b2t-opacity                  = <span class="number">.8</span>;</span><br><span class="line">$b2t-opacity-hover            = <span class="number">1</span>;</span><br><span class="line">$b2t-position-bottom          = <span class="number">-100</span>px;</span><br><span class="line">$b2t-position-bottom-on       = <span class="number">30</span>px;</span><br><span class="line"><span class="comment">// $b2t-position-right           = 30px; //æ³¨é‡Šæ‰ themes\hexo-theme-next\source\css\_mixins.stylçš„é€»è¾‘ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰ ä¸ç„¶å¯èƒ½æœ‰warnning</span></span><br><span class="line"><span class="comment">// $b2t-position-right-mobile    = 20px;//æ³¨é‡Šæ‰ themes\hexo-theme-next\source\css\_mixins.stylçš„é€»è¾‘ä¹Ÿå¯ä»¥æ³¨é‡Šæ‰ ä¸ç„¶å¯èƒ½æœ‰warnning</span></span><br><span class="line">$b2t-font-<span class="keyword">size</span>                = <span class="number">12</span>px;</span><br><span class="line">$b2t-<span class="keyword">color</span>                    = white;</span><br><span class="line">$b2t-bg-<span class="keyword">color</span>                 = $black-deep;</span><br><span class="line"></span><br><span class="line">$sidebar-<span class="keyword">toggle</span>-inner-<span class="keyword">size</span>    = <span class="number">16</span>px;</span><br><span class="line">$sidebar-<span class="keyword">toggle</span>-padding       = <span class="number">5</span>px;</span><br><span class="line">$sidebar-<span class="keyword">toggle</span>-<span class="keyword">size</span>          = $sidebar-<span class="keyword">toggle</span>-inner-<span class="keyword">size</span> + $sidebar-<span class="keyword">toggle</span>-padding * <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä»rightä¿®æ”¹æˆleftæ— æ•ˆçš„åŸå› æ˜¯å€¼æ²¡æœ‰å˜ åªæ˜¯æ¢äº†ä¸ªå˜é‡å<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.26%E8%B0%83%E6%95%B4back2top%E7%9A%84%E4%BD%8D%E7%BD%AE.jpeg" alt></p>
<ul>
<li>ç„¶ååœ¨ themes\hexo-theme-next\source\css\_common\components\back-to-top.styl æœ«å°¾(ä¿è¯åœ¨bodyé‡Œ)æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œä»£ç å¹¶æ³¨é‡Š margin-right: 8px;</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">hexo-config</span>(<span class="string">&#x27;back2top.enable&#x27;</span>)) &#123;</span><br><span class="line">  <span class="selector-class">.back-to-top</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$b2t</span>-font-size;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">span</span> &#123;</span><br><span class="line">      <span class="comment">//margin-right: 8px; // æ³¨é‡Šæ‰ï¼ˆé»˜è®¤è®¾ç½®æ˜¯è¿™ä¸ª ç»™æ”¹æˆæœ«å°¾ä¸¤è¡Œï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>; <span class="comment">// æ–°æ·»åŠ çš„ä»£ç </span></span><br><span class="line">    <span class="attribute">left</span>: <span class="number">30px</span>; <span class="comment">// // æ–°æ·»åŠ çš„ä»£ç </span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3.27-%E6%B7%BB%E5%8A%A0readme.md%E6%96%87%E4%BB%B6(todo)" tabindex="-1">3.27 æ·»åŠ README.mdæ–‡ä»¶(TODO)</h3>
<p>æ¯ä¸ªé¡¹ç›®ä¸‹ä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª <a href="http://README.md">README.md</a> æ–‡ä»¶ï¼Œä½†æ˜¯ä½¿ç”¨ hexo éƒ¨ç½²åˆ°ä»“åº“åï¼Œé¡¹ç›®ä¸‹æ˜¯æ²¡æœ‰ <a href="http://README.md">README.md</a> æ–‡ä»¶çš„ <strong>ï¼ˆæœ€æ–°çš„é¡¹ç›®å¥½åƒæœ‰äº†ï¼‰</strong></p>
<ol>
<li>åœ¨ Hexo ç›®å½•ä¸‹çš„ source æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª README.mdæ–‡ä»¶ï¼Œä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.ymlï¼Œå°† skip_render å‚æ•°çš„å€¼è®¾ç½®ä¸ºï¼ˆè¿™ä¸ªéœ€è¦è®¾ç½®ï¼‰</li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">skip_render:</span> <span class="string">README.md</span></span><br></pre></td></tr></table></figure>
<p>ä¿å­˜é€€å‡ºå³å¯ å†æ¬¡ä½¿ç”¨ hexo d å‘½ä»¤éƒ¨ç½²åšå®¢çš„æ—¶å€™å°±ä¸ä¼šåœ¨æ¸²æŸ“ <a href="http://README.md">README.md</a> æ–‡ä»¶äº†</p>
<h3 id="3.28-%E4%BE%A7%E6%A0%8Fceleste(%E6%97%8B%E8%BD%AC%E7%9A%84%E5%B0%8F%E4%BA%BA)" tabindex="-1">3.28 ä¾§æ Celeste(æ—‹è½¬çš„å°äºº)</h3>
<ol>
<li>è¿™é‡Œç½—åˆ—ä¸¤ç§ä½ç½®æ‘†æ”¾æ•ˆæœ</li>
</ol>
<ul>
<li>æ”¾åœ¨ blog\themes\hexo-theme-next\layout\_macro\sidebar.swig  ï¼ˆæˆ‘é€‰çš„è¿™ç§ï¼Œæˆ‘è§‰å¾—è¿™ç§æ›´å¥½çœ‹ï¼Œè€Œä¸”ç¬¬äºŒç§æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ”¾ï¼Œè€æœ‰é—®é¢˜ï¼‰</li>
</ul>
<p>æ–‡ä»¶ä¸­æ‰¾åˆ°ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;%- if theme.back2top.enable and theme.back2top.sidebar %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back-to-top motion-element&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-arrow-up&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ›¿æ¢æˆä»¥ä¸‹å†…å®¹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twopeople&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:200px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;illo&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;800&quot;</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;rendered-js&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.twopeople</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">cursor</span>: move;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      &#123;%- if theme.back2top.enable and theme.back2top.sidebar %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back-to-top animated&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;&#123;&#123; __(&#x27;accessibility.back_to_top&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-arrow-up&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      &#123;%- endif %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">&#123;% endmacro %&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ”¾åœ¨ blog\themes\hexo-theme-next\layout_layout.njk</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span> <span class="attr">itemscope</span> <span class="attr">itemtype</span>=<span class="string">&quot;http://schema.org/WPHeader&quot;</span>&gt;</span></span><br><span class="line">        &#123;%- include &#x27;_partials/header/index.njk&#x27; -%&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">      &#123;%- if theme.sidebar.display !== &#x27;remove&#x27; %&#125;</span><br><span class="line">        &#123;% block sidebar %&#125;&#123;% endblock %&#125;</span><br><span class="line">      &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">      &lt;-- æ—‹è½¬çš„å°äºº --&gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twopeople&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:200px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;illo&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;800&quot;</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;rendered-js&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.twopeople</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">cursor</span>: move;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹å¼çš„åŠ¨ç”»ä½ç½®ä¸ä¼šå›ºå®šåœ¨æµè§ˆå™¨çª—å£ä½ç½®ï¼Œè€Œæ˜¯ä¼šéšç€æ»šåŠ¨è€Œæ¶ˆå¤±</p>
<h3 id="3.29-%E6%87%92%E5%8A%A0%E8%BD%BD%E5%BC%80%E5%90%AF(%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96)(todo)" tabindex="-1">3.29 æ‡’åŠ è½½å¼€å¯(æ€§èƒ½ä¼˜åŒ–)(TODO)</h3>
<p>è¿›å…¥ ä¸»é¢˜é…ç½®æ–‡ä»¶æ‰¾åˆ°lazyloadï¼Œä¿®æ”¹ä¸ºtrueï¼š<strong>(æˆ‘å¼€å¯ååŠ è½½ä¸å‡ºæ¥ç•Œé¢äº†ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ‰€ä»¥å°±æ²¡å¼€äº†)</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Vanilla JavaScript plugin for lazyloading images.</span></span><br><span class="line"><span class="comment"># For more information: https://apoorv.pro/lozad.js/demo/</span></span><br><span class="line"><span class="attr">lazyload:</span> <span class="literal">true</span> <span class="comment"># æ‡’åŠ è½½å¼€å¯</span></span><br></pre></td></tr></table></figure>
<h3 id="3.30-%E5%8A%A0%E5%85%A5%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8" tabindex="-1">3.30 åŠ å…¥ç½‘æ˜“äº‘éŸ³ä¹æ’­æ”¾å™¨</h3>
<p>åœ¨ç½‘é¡µæœç´¢ç½‘æ˜“äº‘éŸ³ä¹ï¼Œé€‰æ‹©éŸ³ä¹ï¼Œå¹¶ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨ï¼Œè·å– iframe æ ‡ç­¾</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¤–é“¾æ’­æ”¾å™¨ æº¯ï¼ˆé’¢ç´ç‰ˆï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginwidth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginheight</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">330</span> <span class="attr">height</span>=<span class="string">86</span> <span class="attr">src</span>=<span class="string">&quot;//music.163.com/outchain/player?type=2&amp;id=1433584979&amp;auto=1&amp;height=66&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å»ºè®®æŠŠæ ‡ç­¾æ”¾åˆ°ä¾§è¾¹æ ï¼Œåœ¨ Blog/themes/next/layout/_macro/sidebar.njk æˆ– themes\hexo-theme-next\layout_layout.njk æ–‡ä»¶ä¸‹ï¼ŒåŒç† <a href="#328-%E4%BE%A7%E6%A0%8Fceleste%E6%97%8B%E8%BD%AC%E7%9A%84%E5%B0%8F%E4%BA%BA">3.28 celesteæ—‹è½¬çš„å°äºº</a>çš„æ–¹å¼é€‰æ‹©ä½ç½®ç²˜è´´è¿›å»ï¼Œä¸åŒä½ç½®æ•ˆæœä¸åŒã€‚<br>
æˆ‘ä¾æ—§æ˜¯åœ¨blog\themes\hexo-theme-next\layout\_macro\sidebar.swigé‡Œé¢è®¾ç½®çš„ï¼Œæ”¾åœ¨äº†å°äººå’Œback2topçš„æŒ‰é’®ä¸­é—´</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;twopeople&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:200px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;illo&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;800&quot;</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;rendered-js&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">            <span class="selector-class">.twopeople</span>&#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">            <span class="selector-tag">canvas</span> &#123;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">                <span class="attribute">cursor</span>: move;</span></span><br><span class="line"><span class="language-css">            &#125;</span></span><br><span class="line"><span class="language-css">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ”¾åœ¨äº†è¿™é‡Œstartï¼ï¼ï¼--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¤–é“¾æ’­æ”¾å™¨ æº¯ï¼ˆé’¢ç´ç‰ˆï¼‰--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginwidth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">marginheight</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">330</span> <span class="attr">height</span>=<span class="string">86</span> <span class="attr">src</span>=<span class="string">&quot;//music.163.com/outchain/player?type=2&amp;id=1433584979&amp;auto=1&amp;height=66&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ”¾åœ¨äº†è¿™é‡Œendï¼ï¼ï¼--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &#123;%- if theme.back2top.enable and theme.back2top.sidebar %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;back-to-top animated&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;&#123;&#123; __(&#x27;accessibility.back_to_top&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-arrow-up&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>0%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      &#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.30%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8.jpg" alt></p>
<h3 id="3.31-%E6%B7%BB%E5%8A%A0aplayer%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8(%E8%BF%9B%E9%98%B6)" tabindex="-1">3.31 æ·»åŠ AplayeréŸ³ä¹æ’­æ”¾å™¨(è¿›é˜¶)</h3>
<p>ç”±äºç½‘æ˜“äº‘å¤–é“¾æ’­æ”¾å™¨æ¯æ¬¡åªèƒ½é€‰æ‹©ä¸€é¦–æ­Œï¼Œå¦‚æœæƒ³è¦è®©æ’­æ”¾å™¨çš„åŠŸèƒ½æ›´åŠ å…¨é¢ä¸°å¯Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶ Aplayeræ¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚</p>
<ul>
<li>é¦–å…ˆï¼Œå…ˆä¸‹è½½Aplayeræºç ï¼šAPlayer æˆ–è€…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install aplayer --save</span><br></pre></td></tr></table></figure>
<p>å¦‚æœé€šè¿‡å‘½ä»¤æ‰§è¡Œåˆ™åœ¨ blog/node_modules/aplayerä¸­æ‰¾åˆ°distæ–‡ä»¶å¤¹</p>
<ul>
<li>â€‹å°†æ–‡ä»¶ä¸­çš„distæ–‡ä»¶å¤¹å¤åˆ¶åˆ°è·¯å¾„ï¼šblog/themes/next/source</li>
</ul>
<ol>
<li>åœ¨ç›®å½• blog/themes/next/source/dist ä¸‹æ–°å»º music.js æ–‡ä»¶ï¼Œå†…å®¹æ˜¯ï¼š</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ap = <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aplayer&#x27;</span>),</span><br><span class="line">  <span class="attr">fixed</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// autoplay: true,</span></span><br><span class="line">  <span class="attr">audio</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;æº¯ï¼ˆé’¢ç´ç‰ˆï¼‰&#x27;</span>,</span><br><span class="line">      <span class="attr">artist</span>: <span class="string">&#x27;æŸ³è½»é¢‚&#x27;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;http://music.163.com/song/media/outer/url?id=1433584979.mp3&#x27;</span>,</span><br><span class="line">      <span class="attr">cover</span>: <span class="string">&#x27;http://p1.music.126.net/qX7knUIlpmbJ34UBzCCS6w==/109951164802366812.jpg?param=130y130&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;å¤¢ç¯ç± &quot;</span>,</span><br><span class="line">      <span class="attr">artist</span>: <span class="string">&#x27;RADWIMPS&#x27;</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;/images/å¤¢ç¯ç± .mp3&#x27;</span>,</span><br><span class="line">      <span class="attr">cover</span>: <span class="string">&#x27;http://p2.music.126.net/sSxbRt9RpC6s_MaewyDJfA==/18597139672292692.jpg?param=130y130&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>æ­Œæ›²ä¿¡æ¯å¯è‡ªè¡Œæ·»åŠ è‡ªå·±å–œæ¬¢çš„</p>
<ol start="2">
<li>é…ç½®é¡¹ï¼ˆè®°å¾—éƒ½è¦åŠ å¼•å·ï¼‰</li>
</ol>
<ul>
<li>nameï¼šæ­Œæ›²åç§°</li>
<li>artistï¼šä½œè€…</li>
<li>urlï¼šè¿æ¥ï¼ˆå…·ä½“æ€æ ·æ“ä½œçœ‹ä¸‹é¢æ­¥éª¤ï¼‰ï¼Œ</li>
<li>coverï¼šæ˜¯å›¾ç‰‡è¿æ¥ï¼Œå¯ä»¥æ˜¯æœ¬åœ°å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨çº¿å›¾ç‰‡ï¼Œæœ¬åœ°æ”¾åœ¨ source/imagesç„¶åä¿®æ”¹è·¯å¾„å³å¯</li>
</ul>
<p>æ›´å¤šå‚æ•°(â­)ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ap = <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aplayer&#x27;</span>), <span class="comment">//æ’­æ”¾å™¨å®¹å™¨å…ƒç´ </span></span><br><span class="line">    <span class="attr">mini</span>: <span class="literal">false</span>, <span class="comment">//è¿·ä½ æ¨¡å¼</span></span><br><span class="line">    <span class="attr">autoplay</span>: <span class="literal">false</span>, <span class="comment">//è‡ªåŠ¨æ’­æ”¾</span></span><br><span class="line">    <span class="attr">theme</span>: <span class="string">&#x27;#FADFA3&#x27;</span>, <span class="comment">//ä¸»é¢˜è‰²</span></span><br><span class="line">    <span class="attr">loop</span>: <span class="string">&#x27;all&#x27;</span>, <span class="comment">//éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: &#x27;all&#x27;å…¨éƒ¨å¾ªç¯, &#x27;one&#x27;å•æ›²å¾ªç¯, &#x27;none&#x27;ä¸å¾ªç¯</span></span><br><span class="line">    <span class="attr">order</span>: <span class="string">&#x27;random&#x27;</span>, <span class="comment">//éŸ³é¢‘å¾ªç¯é¡ºåº, å¯é€‰å€¼: &#x27;list&#x27;åˆ—è¡¨å¾ªç¯, &#x27;random&#x27;éšæœºå¾ªç¯</span></span><br><span class="line">    <span class="attr">preload</span>: <span class="string">&#x27;auto&#x27;</span>, <span class="comment">//é¢„åŠ è½½ï¼Œå¯é€‰å€¼: &#x27;none&#x27;, &#x27;metadata&#x27;, &#x27;auto&#x27;</span></span><br><span class="line">    <span class="attr">volume</span>: <span class="number">0.7</span>, <span class="comment">//é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ</span></span><br><span class="line">    <span class="attr">mutex</span>: <span class="literal">true</span>, <span class="comment">//äº’æ–¥ï¼Œé˜»æ­¢å¤šä¸ªæ’­æ”¾å™¨åŒæ—¶æ’­æ”¾ï¼Œå½“å‰æ’­æ”¾å™¨æ’­æ”¾æ—¶æš‚åœå…¶ä»–æ’­æ”¾å™¨</span></span><br><span class="line">    <span class="attr">listFolded</span>: <span class="literal">false</span>, <span class="comment">//åˆ—è¡¨é»˜è®¤æŠ˜å </span></span><br><span class="line">    <span class="attr">listMaxHeight</span>: <span class="number">90</span>, <span class="comment">//åˆ—è¡¨æœ€å¤§é«˜åº¦</span></span><br><span class="line">    <span class="attr">lrcType</span>: <span class="number">3</span>, <span class="comment">//æ­Œè¯ä¼ é€’æ–¹å¼</span></span><br><span class="line">    <span class="attr">audio</span>: [ <span class="comment">//éŸ³é¢‘ä¿¡æ¯,åŒ…å«ä»¥ä¸‹</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;name1&#x27;</span>, <span class="comment">//éŸ³é¢‘åç§°</span></span><br><span class="line">            <span class="attr">artist</span>: <span class="string">&#x27;artist1&#x27;</span>, <span class="comment">//éŸ³é¢‘è‰ºæœ¯å®¶</span></span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;url1.mp3&#x27;</span>, <span class="comment">//éŸ³é¢‘å¤–é“¾</span></span><br><span class="line">            <span class="attr">cover</span>: <span class="string">&#x27;cover1.jpg&#x27;</span>, <span class="comment">//éŸ³é¢‘å°é¢</span></span><br><span class="line">            <span class="attr">lrc</span>: <span class="string">&#x27;lrc1.lrc&#x27;</span>, <span class="comment">//éŸ³é¢‘æ­Œè¯ï¼Œé…åˆä¸Šé¢çš„lrcTypeä½¿ç”¨</span></span><br><span class="line">            <span class="attr">theme</span>: <span class="string">&#x27;#ebd0c2&#x27;</span> <span class="comment">//åˆ‡æ¢åˆ°æ­¤éŸ³é¢‘æ—¶çš„ä¸»é¢˜è‰²ï¼Œæ¯”ä¸Šé¢çš„ theme ä¼˜å…ˆçº§é«˜</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;name2&#x27;</span>, <span class="comment">//å¦‚æœåªæœ‰ä¸€é¦–æ­Œï¼Œåˆ æ‰è¿™ä¸€å—ï¼Œå¦‚æœ‰æ›´å¤šæ­Œæ›²æŒ‰æ­¤æ ¼å¼é€æ¸å¾€ä¸‹æ·»åŠ </span></span><br><span class="line">            <span class="attr">artist</span>: <span class="string">&#x27;artist2&#x27;</span>,</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;url2.mp3&#x27;</span>,</span><br><span class="line">            <span class="attr">cover</span>: <span class="string">&#x27;cover2.jpg&#x27;</span>,</span><br><span class="line">            <span class="attr">lrc</span>: <span class="string">&#x27;lrc2.lrc&#x27;</span>,</span><br><span class="line">            <span class="attr">theme</span>: <span class="string">&#x27;#46718b&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>urlæ·»åŠ æ­Œæ›²æ–¹æ³•</li>
</ol>
<ul>
<li>é“¾æ¥æ–¹å¼url
<ul>
<li>ç½‘æ˜“äº‘ç½‘é¡µæ’­æ”¾ä¸€é¦–æ­Œæ›²</li>
<li>å°†ç½‘å€ä¸­çš„ id è¿›è¡Œå¤åˆ¶ï¼š<a href="https://music.163.com/#/song?id=1411358329%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF1411358329">https://music.163.com/#/song?id=1411358329ï¼Œä¹Ÿå°±æ˜¯1411358329</a></li>
<li>å°†ä¸‹é¢ä»£ç ä¸­çš„ id ä¿®æ”¹ä¸ºä½ æƒ³æ·»åŠ æ­Œæ›²çš„ idï¼š<a href="http://music.163.com/song/media/outer/url?id=xxx.mp3">http://music.163.com/song/media/outer/url?id=xxx.mp3</a> ï¼ˆç½‘æ˜“äº‘éŸ³ä¹åœ¨çº¿æ’­æ”¾æ­Œæ›²æ¨¡æ¿ï¼‰ï¼Œå³http://music.163.com/song/media/outer/url?id=1411358329.mp3</li>
</ul>
</li>
<li>æœ¬åœ°æ–¹å¼url
<ul>
<li>å…ˆä¸‹è½½å¥½éŸ³é¢‘é—®ä»·</li>
<li>ç„¶åæ”¾åœ¨themes\hexo-theme-next\source\imagesé‡Œ</li>
<li>urlä¸º â€˜/images/éŸ³é¢‘åå­—.mp3â€™</li>
</ul>
</li>
</ul>
<ol start="4">
<li>å¼•ç”¨å¤´æ–‡ä»¶<br>
æˆ‘ä»ç„¶æŠŠæ’­æ”¾å™¨æ”¾åœ¨äº†åŸæ¥å¤–é“¾æ’­æ”¾å™¨çš„ä½ç½®blog\themes\hexo-theme-next\layout\_macro\sidebar.swig,å†…å®¹ä¸ºï¼š</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/dist/APlayer.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;aplayer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/dist/APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/dist/music.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ï¼ˆä¹Ÿå¯ä»¥æ”¾åœ¨åœ¨è·¯å¾„ï¼šblog/themes/hexo-theme-next/layout/_layout.swig æ–‡ä»¶ï¼Œç„¶åå°†ä¸‹é¢çš„ä»£ç æ·»åŠ åˆ°ï¼š&lt;body itemscope â€¦&gt; ï¼ˆåœ¨bodyé‡Œé¢å°±å¯ä»¥ï¼‰)</p>
<p>å®Œæˆåéœ€è¦é‡æ–°éƒ¨ç½²æ‰èƒ½çœ‹åˆ°æ•ˆæœ</p>
<p>aplayeræˆ‘é‡‡ç”¨çš„æ˜¯é»˜è®¤çš„æ•ˆæœï¼Œè¯¦ç»†ä¿¡æ¯è¯·æŸ¥é˜… <a href="https://aplayer.js.org/#/home">å®˜æ–¹æ–‡æ¡£</a></p>
<ol start="5">
<li>å› ä¸ºäº†æœ‰äº† aplayer æ’ä»¶ æ‰€æœ‰åŸå…ˆçš„ back2top ä¼šè¢«é®æŒ¡ éœ€è¦é‡æ–°è°ƒæ•´ä½ç½®ã€‚ æ²¡æœ‰å½±å“åˆ™å¯ä¸è°ƒæ•´(TODO)ï¼Œæ”¾åˆ°sidebaræ²¡æœ‰å½±å“ï¼Œå¦‚æœæ”¾åœ¨llayoutä¸­ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">// <span class="attribute">left</span>: <span class="number">30px</span>; // åŸå…ˆä¿®æ”¹è¿‡åçš„ä½ç½® åŠ äº†aplayerå é‡æ–°å®šä¹‰ä½ç½®å¦‚ä¸‹</span><br><span class="line"><span class="attribute">left</span>: <span class="number">15%</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3.32-%E5%88%A0%E9%99%A4%E4%BA%86%E9%BB%98%E8%AE%A4%E7%9A%84landscope%E4%B8%BB%E9%A2%98(%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96)(todo)" tabindex="-1">3.32 åˆ é™¤äº†é»˜è®¤çš„landscopeä¸»é¢˜(æ€§èƒ½ä¼˜åŒ–)(TODO)</h3>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">å‹ç¼©å†…å­˜</span><br></pre></td></tr></table></figure>
<h3 id="3.33-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F" tabindex="-1">3.33 è¯„è®ºç³»ç»Ÿ</h3>
<p>æ ¹æ®ç½‘ä¸Šå¯¹å›½å†…å›½å¤–çš„è¯„ä»·ç³»ç»Ÿå¯¹æ¯”ï¼Œå¯çŸ¥Valineæ˜¯è¿‘å‡ å¹´å¤§å—æ¬¢è¿çš„åšå®¢è¯„ä»·ç³»ç»Ÿï¼Œä½†ç”±äºä½œè€…å·²ç»æ”¾å¼ƒäº†å¯¹ Valine çš„ç»´æŠ¤ï¼Œbugä¸€å †å°šæœªè§£å†³ï¼Œæ‰€ä»¥æœ€ç»ˆæ•²å®šç”¨åŸºäºValineå¼€å‘çš„æ–°ç‰ˆæœ¬<a href="https://waline.js.org/">Waline</a>ä½œä¸ºæœ¬åšå®¢çš„è¯„ä»·ç³»ç»Ÿã€‚<strong>ï¼ˆä½†æˆ‘çš„è¯„ä»·æ˜¯å¦‚æœhexoç‰ˆæœ¬ä¸é«˜ï¼Œå»ºè®®è¿˜æ˜¯ç”¨valineå°±è¡Œäº†ï¼Œåˆå¿«åˆæ–¹ä¾¿ï¼‰ï¼Œå¥½åƒnextè‡ªå¸¦çš„gitalkä¹Ÿå¯ä»¥è¯„è®ºï¼Œæœ‰æ—¶é—´å¯ä»¥è¯•è¯•<a href="https://blog.douchen.life/Hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEGitalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">é…ç½®gittalk</a></strong></p>
<ol>
<li>LeanCloud è®¾ç½® (æ•°æ®åº“)<br>
æ³¨æ„ï¼ï¼šè¯·ä½¿ç”¨ä¸­å›½å¤§é™†ç‰ˆï¼Œå›½å¤–ç‰ˆå·²è¢«ç¦æ­¢å›½å†…ä½¿ç”¨
<ul>
<li>Leancloudå·²ç»ç¦æ­¢äº†å›½å†…è®¿é—®å›½é™…ç‰ˆ <a href="https://forum.leancloud.cn/t/2022-8/25408">https://forum.leancloud.cn/t/2022-8/25408</a></li>
</ul>
</li>
</ol>
<ul>
<li>(1) ç™»å½•æˆ–æ³¨å†Œ<a href="https://console.leancloud.app/login">LeanCloud</a> å¹¶è¿›å…¥ <a href="https://console.leancloud.app/apps">æ§åˆ¶å°</a></li>
<li>(2) ç‚¹å‡»å·¦ä¸Šè§’ åˆ›å»ºåº”ç”¨ å¹¶èµ·ä¸€ä¸ªä½ å–œæ¬¢çš„åå­— (è¯·é€‰æ‹©å…è´¹çš„å¼€å‘ç‰ˆ):</li>
<li>(3) è¿›å…¥åº”ç”¨ï¼Œé€‰æ‹©å·¦ä¸‹è§’çš„ è®¾ç½® &gt; åº”ç”¨å‡­è¯ã€‚ä½ å¯ä»¥çœ‹åˆ°ä½ çš„ APP ID,APP Key å’Œ Master Keyã€‚è¯·è®°å½•å®ƒä»¬ï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F.png" alt></li>
</ul>
<ol>
<li>Vercel éƒ¨ç½² (æœåŠ¡ç«¯)</li>
</ol>
<ul>
<li>(1) ç‚¹å‡»è¿›å…¥<a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample">Vercel</a>,æ³¨å†Œç™»å½•</li>
<li>(2) é€‰æ‹©git ä½œç”¨åŸŸä»¥åŠè¾“å…¥ä»“åº“åï¼ˆæœ€ç»ˆæˆ‘çš„ä»“åº“åä¸ºmidoli_blogï¼‰,å¹¶ç‚¹å‡» Create ç»§ç»­:<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2.jpg" alt><br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B21.jpg" alt></li>
<li>(3) æ­¤æ—¶ Vercel ä¼šåŸºäº Waline æ¨¡æ¿å¸®åŠ©ä½ æ–°å»ºå¹¶åˆå§‹åŒ–ä»“åº“ï¼Œä»“åº“åä¸ºä½ ä¹‹å‰è¾“å…¥çš„é¡¹ç›®åï¼Œè¯·ç­‰å¾…ä¸€ä¼šå„¿</li>
<li>(4) æ„å»ºç»“æŸåï¼Œç‚¹å‡»é¡¶éƒ¨ä¿¡æ¯ï¼Œå¹¶ç‚¹å‡»ä»“åº“ï¼Œæ‰¾åˆ°Settings - Environment Variables è¿›å…¥ç¯å¢ƒå˜é‡é…ç½®é¡µï¼Œå¹¶é…ç½®ä¸‰ä¸ªç¯å¢ƒå˜é‡ <strong>LEAN_ID, LEAN_KEY å’Œ LEAN_MASTER_KEY</strong>ã€‚å®ƒä»¬çš„å€¼åˆ†åˆ«å¯¹åº”ä¸Šä¸€æ­¥åœ¨ LeanCloud ä¸­è·å¾—çš„ <strong>APP ID, APP KEY, Master Key</strong>ã€‚ï¼ˆéœ€è¦è¿›å…¥é¡¹ç›®ä¸­çš„ Settingsï¼Œè€Œä¸æ˜¯æ€»è®¾ç½®é‡Œï¼Œæ€»è®¾ç½®é‡Œæ²¡æœ‰ Environment Variables é€‰é¡¹é…ç½®ï¼‰<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B22.jpg" alt><br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B23.png" alt><br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B24.png" alt></li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">å¦‚æœä½ ä½¿ç”¨ LeanCloud å›½å†…ç‰ˆï¼Œè¯·é¢å¤–é…ç½® LEAN_SERVER ç¯å¢ƒå˜é‡ï¼Œå€¼ä¸ºä½ ç»‘å®šå¥½çš„åŸŸåã€‚</span><br></pre></td></tr></table></figure>
<ul>
<li>(5) ç¯å¢ƒå˜é‡é…ç½®å®Œæˆä¹‹åç‚¹å‡»é¡¶éƒ¨çš„ Deployments ç‚¹å‡»é¡¶éƒ¨æœ€æ–°çš„ä¸€æ¬¡éƒ¨ç½²å³ä¾§çš„ Redeploy æŒ‰é’®è¿›è¡Œé‡æ–°éƒ¨ç½²ã€‚è¯¥æ­¥éª¤æ˜¯ä¸ºäº†è®©åˆšæ‰è®¾ç½®çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚</li>
<li>(6) æ­¤æ—¶ä¼šè·³è½¬åˆ° Overview ç•Œé¢å¼€å§‹éƒ¨ç½²ï¼Œç­‰å¾…ç‰‡åˆ»å STATUS ä¼šå˜æˆ Readyã€‚æ­¤æ—¶è¯·ç‚¹å‡» Visit ï¼Œå³å¯è·³è½¬åˆ°éƒ¨ç½²å¥½çš„ç½‘ç«™åœ°å€ï¼Œæ­¤åœ°å€å³ä¸ºä½ çš„æœåŠ¡ç«¯åœ°å€</li>
</ul>
<ol>
<li>ç»‘å®šåŸŸå (å¯é€‰)(TODO)</li>
</ol>
<ul>
<li>(1) ç‚¹å‡»é¡¶éƒ¨çš„ Settings - Domains è¿›å…¥åŸŸåé…ç½®é¡µ</li>
<li>(2) è¾“å…¥éœ€è¦ç»‘å®šçš„åŸŸåå¹¶ç‚¹å‡» Add<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B25.png" alt></li>
<li>(3) åœ¨åŸŸåæœåŠ¡å™¨å•†å¤„æ·»åŠ æ–°çš„ CNAME è§£æè®°å½•</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>CNAME</td>
<td>example</td>
<td><a href="http://cname.vercel-dns.com">cname.vercel-dns.com</a></td>
</tr>
</tbody>
</table>
<ul>
<li>(4) ç­‰å¾…ç”Ÿæ•ˆï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®äº†
<ul>
<li>è¯„è®ºç³»ç»Ÿï¼š<a href="http://example.yourdomain.com">example.yourdomain.com</a></li>
<li>è¯„è®ºç®¡ç†ï¼š<a href="http://example.yourdomain.com/ui">example.yourdomain.com/ui</a><br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B26.png" alt></li>
</ul>
</li>
</ul>
<ol start="4">
<li>åœ¨Nextä¸­é…ç½®</li>
</ol>
<ul>
<li>å…ˆåˆ°ä½ hexoçš„ç«™ç‚¹ç›®å½•ä¸‹å®‰è£…walineï¼š</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install @waline/hexo-next --save</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰¾åˆ°Nextä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œ_config.ymlè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼Œæ–¹ä¾¿æ—¥åå‡çº§è¦†ç›–ï¼š</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Waline è¯„è®º</span></span><br><span class="line"><span class="comment"># For more information: https://waline.js.org, https://github.com/walinejs/waline</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å¼€å¯</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">blog-waline-comment.vercel.app</span> <span class="comment"># Waline #æœåŠ¡ç«¯åœ°å€ï¼Œæˆ‘ä»¬è¿™é‡Œå°±æ˜¯ä¸Šé¢éƒ¨ç½²çš„ Vercel åœ°å€</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">æ¬¢è¿è¯„è®ºå‘€~</span> <span class="comment"># #è¯„è®ºæ¡†çš„é»˜è®¤æ–‡å­—</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">mm</span> <span class="comment"># å¤´åƒé£æ ¼</span></span><br><span class="line">  <span class="attr">meta:</span> [<span class="string">nick</span>, <span class="string">mail</span>, <span class="string">link</span>] <span class="comment"># è‡ªå®šä¹‰è¯„è®ºæ¡†ä¸Šé¢çš„ä¸‰ä¸ªè¾“å…¥æ¡†çš„å†…å®¹</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># è¯„è®ºæ•°é‡å¤šå°‘æ—¶æ˜¾ç¤ºåˆ†é¡µ</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-cn</span> <span class="comment"># è¯­è¨€, å¯é€‰å€¼: en, zh-cn</span></span><br><span class="line">  <span class="comment"># Warning: ä¸è¦åŒæ—¶å¯ç”¨ `waline.visitor` ä»¥åŠ `leancloud_visitors`.</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">true</span> <span class="comment"># æ–‡ç« é˜…è¯»ç»Ÿè®¡</span></span><br><span class="line">  <span class="attr">comment_count:</span> <span class="literal">true</span> <span class="comment"># å¦‚æœä¸º false , è¯„è®ºæ•°é‡åªä¼šåœ¨å½“å‰è¯„è®ºé¡µé¢æ˜¾ç¤º, ä¸»é¡µåˆ™ä¸æ˜¾ç¤º</span></span><br><span class="line">  <span class="attr">requiredFields:</span> [<span class="string">nick</span>, <span class="string">mail</span>] <span class="comment"># è®¾ç½®ç”¨æˆ·è¯„è®ºæ—¶å¿…å¡«çš„ä¿¡æ¯ï¼Œ[nick,mail]: [nick] | [nick, mail]</span></span><br><span class="line">  <span class="attr">libUrl:</span> <span class="comment"># Set custom library cdn url</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>
<ol start="5">
<li>æ·»åŠ è¯„è®ºè¡¨æƒ…åŒ…<br>
åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸‹çš„ waline æ·»åŠ å¦‚ä¸‹ emoji ä»£ç </li>
</ol>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Waline è¯„è®º</span></span><br><span class="line"><span class="comment"># For more information: https://waline.js.org, https://github.com/walinejs/waline</span></span><br><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å¼€å¯</span></span><br><span class="line">  <span class="string">......</span></span><br><span class="line">  <span class="attr">emoji:</span> [</span><br><span class="line">      <span class="string">https://unpkg.com/@waline/emojis@1.1.0/tw-emoji</span>, <span class="comment"># åŠ ä¸åŠ httpså¤´éƒ½å¯ä»¥</span></span><br><span class="line">      <span class="string">//unpkg.com/@waline/emojis@1.1.0/bilibili</span>,</span><br><span class="line">      <span class="string">//unpkg.com/@waline/emojis@1.1.0/alus</span>,</span><br><span class="line">      <span class="string">https://unpkg.com/@waline/emojis@1.1.0/weibo</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šè¡¨æƒ…å‚è€ƒ <a href="https://waline.js.org/guide/client/emoji.html">è‡ªå®šä¹‰è¡¨æƒ…</a></p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ å°±æ˜¯å¤§ä¼™è¯„è®ºçš„ä¸œè¥¿ ä¸ç¿»å¢™åˆ·æ–°ä¸å‡ºæ¥</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">åŸå›  jsdeliverè¢«å¢™ å‚è€ƒé“¾æ¥ğŸ”—: [jsdelivrè¢«å¢™,hexo-<span class="keyword">next</span>åˆ‡æ¢ä¸ºè‡ªå®šä¹‰CDN](https:<span class="regexp">//</span>www.xygblog.com<span class="regexp">/p/</span><span class="number">8</span>ebdba58/)</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>leanCloundä½œä¸ºæ•°æ®åº“ï¼ŒåŒæ—¶å¯ä»¥ç”¨æ¥ä½œä¸ºå›¾åºŠå­˜å‚¨æ–‡ä»¶ï¼Œä½¿å…¶æ–‡ä»¶æ·»åŠ urlåœ°å€<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.33%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B27.png" alt></li>
</ol>
<h3 id="3.33.1-%E8%AF%84%E8%AE%BA-%E9%82%AE%E7%AE%B1%E9%80%9A%E7%9F%A5(todo)" tabindex="-1">3.33.1 è¯„è®º-é‚®ç®±é€šçŸ¥(TODO)</h3>
<p><a href="https://waline.js.org/guide/get-started/">è¯¦ç»†å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</a><br>
å½“ç½‘ç«™æœ‰ç”¨æˆ·å‘å¸ƒè¯„è®ºæˆ–è€…ç”¨æˆ·å›å¤è¯„è®ºæ—¶ï¼ŒWaline æ”¯æŒå¯¹åšä¸»å’Œå›å¤è¯„è®ºä½œè€…è¿›è¡Œé€šçŸ¥ã€‚</p>
<ul>
<li>åšä¸»é€šçŸ¥æ”¯æŒå¤šç§æ–¹å¼ï¼ŒåŒ…æ‹¬ QQã€å¾®ä¿¡ã€é‚®ä»¶ç­‰ã€‚</li>
<li>å½“è®¿å®¢çš„è¯„è®ºæ”¶åˆ°å›å¤æ—¶ï¼Œæˆ‘ä»¬ä¼šå¯¹è®¿å®¢è¿›è¡Œé‚®ä»¶é€šçŸ¥ã€‚</li>
</ul>
<p>å…·ä½“æ­¥éª¤ å¯çœ‹ <a href="https://blog.csdn.net/Bennnnnnn/article/details/128000842?spm=1001.2101.3001.6650.12&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-12-128000842-blog-83094693.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-12-128000842-blog-83094693.235%5Ev43%5Epc_blog_bottom_relevance_base8&amp;utm_relevant_index=18">Hexo-Nextä¸»é¢˜æ­å»ºä¸ªäººåšå®¢æœ€æ–°é…ç½®æ•™ç¨‹ï¼</a>çš„<strong>è¯„è®º-é‚®ç®±é€šçŸ¥</strong></p>
<h3 id="3.34-%E8%83%8C%E6%99%AF%E5%9B%BE%E4%B8%8A%E4%BC%A0cdn%E5%9B%BE%E5%BA%8A(%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96)-(todo)" tabindex="-1">3.34 èƒŒæ™¯å›¾ä¸Šä¼ CDNå›¾åºŠ(æ€§èƒ½ä¼˜åŒ–) (TODO)</h3>
<p>ç”±äºæ— ç¼“å­˜åˆ·æ–°ï¼ˆæˆ–è€…ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ï¼‰çš„æ—¶å€™ èƒŒæ™¯å›¾ç‰‡åŠ è½½å¾ˆæ…¢ï¼ˆåªæœ‰900å¤škï¼‰æ‰€ä»¥ä¸Šä¼ åˆ°CDNå›¾åºŠ <a href="https://cdnjson.com/">https://cdnjson.com/</a></p>
<p>èƒŒæ™¯å›¾é“¾æ¥ï¼š<a href="https://cdnjson.com/images/2022/11/21/bg1.jpg">https://cdnjson.com/images/2022/11/21/bg1.jpg</a></p>
<h3 id="3.35-%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9-busuanzi-%E7%9A%84%E8%A7%A3%E5%86%B3(todo)" tabindex="-1">3.35 é€šè¿‡ä¿®æ”¹ busuanzi çš„è§£å†³(TODO)</h3>
<ul>
<li>æ–°å»º busuanzi.js åˆ° themes\hexo-theme-next\source\js\ ç›®å½•ä¸‹ï¼Œå¹¶copy</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bszCaller, bszTag; !<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">var</span> c, d, e, a = !<span class="number">1</span>, b = []; ready = <span class="keyword">function</span> (<span class="params">c</span>) &#123; <span class="keyword">return</span> a || <span class="string">&quot;interactive&quot;</span> === <span class="variable language_">document</span>.<span class="property">readyState</span> || <span class="string">&quot;complete&quot;</span> === <span class="variable language_">document</span>.<span class="property">readyState</span> ? c.<span class="title function_">call</span>(<span class="variable language_">document</span>) : b.<span class="title function_">push</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">return</span> c.<span class="title function_">call</span>(<span class="variable language_">this</span>) &#125;), <span class="variable language_">this</span> &#125;, d = <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">for</span> (<span class="keyword">var</span> a = <span class="number">0</span>, c = b.<span class="property">length</span>; c &gt; a; a++)b[a].<span class="title function_">apply</span>(<span class="variable language_">document</span>); b = [] &#125;, e = <span class="keyword">function</span> (<span class="params"></span>) &#123; a || (a = !<span class="number">0</span>, d.<span class="title function_">call</span>(<span class="variable language_">window</span>), <span class="variable language_">document</span>.<span class="property">removeEventListener</span> ? <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, e, !<span class="number">1</span>) : <span class="variable language_">document</span>.<span class="property">attachEvent</span> &amp;&amp; (<span class="variable language_">document</span>.<span class="title function_">detachEvent</span>(<span class="string">&quot;onreadystatechange&quot;</span>, e), <span class="variable language_">window</span> == <span class="variable language_">window</span>.<span class="property">top</span> &amp;&amp; (<span class="built_in">clearInterval</span>(c), c = <span class="literal">null</span>))) &#125;, <span class="variable language_">document</span>.<span class="property">addEventListener</span> ? <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, e, !<span class="number">1</span>) : <span class="variable language_">document</span>.<span class="property">attachEvent</span> &amp;&amp; (<span class="variable language_">document</span>.<span class="title function_">attachEvent</span>(<span class="string">&quot;onreadystatechange&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="regexp">/loaded|complete/</span>.<span class="title function_">test</span>(<span class="variable language_">document</span>.<span class="property">readyState</span>) &amp;&amp; <span class="title function_">e</span>() &#125;), <span class="variable language_">window</span> == <span class="variable language_">window</span>.<span class="property">top</span> &amp;&amp; (c = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">try</span> &#123; a || <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">doScroll</span>(<span class="string">&quot;left&quot;</span>) &#125; <span class="keyword">catch</span> (b) &#123; <span class="keyword">return</span> &#125; <span class="title function_">e</span>() &#125;, <span class="number">5</span>))) &#125;(), bszCaller = &#123; <span class="attr">fetch</span>: <span class="keyword">function</span> (<span class="params">a, b</span>) &#123; <span class="keyword">var</span> c = <span class="string">&quot;BusuanziCallback_&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">1099511627776</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()); <span class="variable language_">window</span>[c] = <span class="variable language_">this</span>.<span class="title function_">evalCall</span>(b), a = a.<span class="title function_">replace</span>(<span class="string">&quot;=BusuanziCallback&quot;</span>, <span class="string">&quot;=&quot;</span> + c), scriptTag = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;SCRIPT&quot;</span>), scriptTag.<span class="property">type</span> = <span class="string">&quot;text/javascript&quot;</span>, scriptTag.<span class="property">defer</span> = !<span class="number">0</span>, scriptTag.<span class="property">src</span> = a, scriptTag.<span class="property">referrerPolicy</span> = <span class="string">&quot;no-referrer-when-downgrade&quot;</span>, <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;HEAD&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(scriptTag) &#125;, <span class="attr">evalCall</span>: <span class="keyword">function</span> (<span class="params">a</span>) &#123; <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">b</span>) &#123; <span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="keyword">try</span> &#123; <span class="title function_">a</span>(b), s = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;[src*=BusuanziCallback]&#x27;</span>), s.<span class="property">parentElement</span>.<span class="title function_">removeChild</span>(s) &#125; <span class="keyword">catch</span> (c) &#123; bszTag.<span class="title function_">hides</span>() &#125; &#125;) &#125; &#125; &#125;, bszCaller.<span class="title function_">fetch</span>(<span class="string">&quot;//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback&quot;</span>, <span class="keyword">function</span> (<span class="params">a</span>) &#123; bszTag.<span class="title function_">texts</span>(a), bszTag.<span class="title function_">shows</span>() &#125;), bszTag = &#123; <span class="attr">bszs</span>: [<span class="string">&quot;site_pv&quot;</span>, <span class="string">&quot;page_pv&quot;</span>, <span class="string">&quot;site_uv&quot;</span>], <span class="attr">texts</span>: <span class="keyword">function</span> (<span class="params">a</span>) &#123; <span class="variable language_">this</span>.<span class="property">bszs</span>.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">b</span>) &#123; <span class="keyword">var</span> c = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;busuanzi_value_&quot;</span> + b); c &amp;&amp; (c.<span class="property">innerHTML</span> = a[b]) &#125;) &#125;, <span class="attr">hides</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">this</span>.<span class="property">bszs</span>.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">a</span>) &#123; <span class="keyword">var</span> b = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;busuanzi_container_&quot;</span> + a); b &amp;&amp; (b.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>) &#125;) &#125;, <span class="attr">shows</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">this</span>.<span class="property">bszs</span>.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">a</span>) &#123; <span class="keyword">var</span> b = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;busuanzi_container_&quot;</span> + a); b &amp;&amp; (b.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;inline&quot;</span>) &#125;) &#125; &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ä»¥æŠŠä¿®æ”¹åçš„é™æ€æ–‡ä»¶æ”¾åœ¨åšå®¢é‡Œï¼Œç„¶åä¿®æ”¹ themes\hexo-theme-next\layout_third-party\statistics\busuanzi-counter.njk &lt;script&gt; ä¸­çš„ src</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;%- if theme.busuanzi_count.enable %&#125;</span><br><span class="line">  &lt;script&#123;&#123; pjax &#125;&#125; async src=&quot;/js/busuanzi.js&quot;&gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å†²çªè§£å†³åŸç†å‚è€ƒé“¾æ¥ğŸ”—ï¼š<a href="https://ouuan.moe/post/2022/08/busuanzi-and-live2d">https://ouuan.moe/post/2022/08/busuanzi-and-live2d</a></p>
<h3 id="3.36-%E4%B8%8D%E8%92%9C%E5%AD%90%E7%9A%84%E8%AE%BF%E5%AE%A2%E4%BA%BA%E6%95%B0%E5%92%8C%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD" tabindex="-1">3.36 ä¸è’œå­çš„è®¿å®¢äººæ•°å’Œæ–‡ç« é˜…è¯»ç»Ÿè®¡åŠŸèƒ½</h3>
<p>NexTä¸»é¢˜å·²é›†æˆäº†ä¸è’œå­çš„è®¿å®¢äººæ•°å’Œæ–‡ç« é˜…è¯»ç»Ÿè®¡åŠŸèƒ½</p>
<ul>
<li>åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># For more information: http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span> <span class="comment"># æ€»è®¿é—®äººæ•°</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span> <span class="comment"># æ€»è®¿é—®æ¬¡æ•°</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span> <span class="comment"># æ–‡ç« è®¿é—®æ¬¡æ•° æ³¨æ„ï¼šä¸åœ¨é¦–é¡µæ˜¾ç¤ºæ¯ç¯‡æ–‡ç« çš„é˜…è¯»æ¬¡æ•°ï¼Œç‚¹å‡»å…¨æ–‡é˜…è¯»å³æ˜¾ç¤ºé˜…è¯»æ¬¡æ•°ï¼ˆèµ·åˆä»¥ä¸ºæ˜¯ä¸live-2dä»£ç å†²çªçš„é—®é¢˜ï¼‰</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">far</span> <span class="string">fa-eye</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åªå¼€å¯äº†æ–‡ç« è®¿é—®æ¬¡æ•° æ€»è®¿é—®äººæ•°å’Œæ€»è®¿é—®æ¬¡æ•°æœ‰bugå°šæœªä¿®å¤ å¦‚éœ€å¼€å¯è¯·å…ˆä¿®å¤</p>
<p>ä¿®å¤å‚è€ƒé“¾æ¥ğŸ”—: <a href="https://muyuuuu.github.io/2019/11/22/busuanzi-notdisplay/">https://muyuuuu.github.io/2019/11/22/busuanzi-notdisplay/</a></p>
<h3 id="3.37-%E6%96%87%E6%9C%AB%E5%B0%BE%E7%89%88%E6%9D%83%E5%A3%B0%E6%98%8E" tabindex="-1">3.37 æ–‡æœ«å°¾ç‰ˆæƒå£°æ˜</h3>
<p>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ç›´æ¥æœç´¢å¹¶ä¸”ä¿®æ”¹ä»¥ä¸‹å†…å®¹å³å¯ï¼š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">zh-CN</span></span><br></pre></td></tr></table></figure>
<h3 id="3.37-%E5%8F%8B%E6%83%85%E9%93%BE%E6%8E%A5" tabindex="-1">3.37 å‹æƒ…é“¾æ¥</h3>
<p>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ç›´æ¥æœç´¢å…³é”®å­— Blog rolls,è®¾ç½®å³å¯ï¼š</p>
<ul>
<li>iconï¼šè®¾ç½®å›¾æ ‡</li>
<li>titleï¼šæ ‡é¢˜</li>
<li>linksï¼šè¾“å…¥ä½ çš„å‹æƒ…é“¾æ¥ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹æˆ–è€…æ·»åŠ </li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_settings:</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">Links</span></span><br><span class="line">  <span class="comment"># Available values: block | inline</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="string">block</span></span><br><span class="line"></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="comment">#Title: http://yoursite.com</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">CSDN:</span> <span class="string">https://blog.csdn.net/jj6666djdbbd?type=blog</span></span><br><span class="line">  <span class="attr">Luogu:</span> <span class="string">https://www.luogu.com.cn/user/914079</span></span><br></pre></td></tr></table></figure>
<h3 id="3.38-%E6%B7%BB%E5%8A%A0rss%E8%AE%A2%E9%98%85(todo%2C%E6%B2%A1%E6%9C%89%E8%AE%BE%E7%BD%AE)" tabindex="-1">3.38 æ·»åŠ RSSè®¢é˜…(TODO,æ²¡æœ‰è®¾ç½®)</h3>
<ul>
<li>é¦–å…ˆæ‰§è¡Œå‘½ä»¤</li>
</ul>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed <span class="comment">--save</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰“å¼€ Hexo ç«™ç‚¹ä¸‹çš„ _config.yml ,æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š<br>
ç›´æ¥åœ¨åº•éƒ¨å¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹å³å¯</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># feed</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/hexojs/hexo-generator-feed</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br></pre></td></tr></table></figure>
<h3 id="3.39-%E6%89%93%E8%B5%8F%E5%8A%9F%E8%83%BD(todo)" tabindex="-1">3.39 æ‰“èµåŠŸèƒ½(TODO)</h3>
<p>åœ¨ ä¸»é¢˜çš„ configä¸­æ‰¾åˆ°å¦‚ä¸‹çš„ rawardåŠŸèƒ½</p>
<p>enableé€‰æ‹©æ‰“å¼€ï¼Œcommentè¾“å…¥æ–‡å­—<br>
åœ¨ç¼€ä¸»é¢˜çš„imagesæ–‡ä»¶å¤¹ä¸­æŠŠä½ çš„ä»˜æ¬¾ç çš„å›¾ç‰‡æ”¾åˆ° /blog /themes /next /source /images/ ä¸­ï¼Œå®ƒä¼šæŒ‰ç…§è¿™ä¸ªè·¯å¾„å¯»æ‰¾å›¾ç‰‡<br>
<img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/3.39%E6%89%93%E8%B5%8F.png" alt></p>
<h3 id="3.40-%E5%8D%9A%E5%AE%A2%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF" tabindex="-1">3.40 åšå®¢åŸºæœ¬ä¿¡æ¯</h3>
<p>ä¿®æ”¹ åšå®¢çš„æ ‡é¢˜ï¼Œå‰¯æ ‡é¢˜ï¼Œæè¿°ï¼Œç­‰ç­‰åŸºæœ¬ä¿¡æ¯ã€‚ã€‚ã€‚</p>
<ul>
<li>åœ¨ blogæ ¹ç›®å½•ä¸‹æ‰“å¼€ _config.yml é…ç½®æ–‡ä»¶ï¼Œç›´æ¥ä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯å³å¯<br>
æ³¨æ„ï¼Œè¯­è¨€è¦æ”¹æˆ zh-CNå³ä¸­å›½ï¼Œå…¶ä»–çš„è‡ªå·±éšä¾¿æ”¹æ”¹</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">```</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 3.41 æ–‡ç« åˆ†äº«åŠŸèƒ½(TODOï¼Œæ‰¾ä¸åˆ°è¯¥å±æ€§)</span></span><br><span class="line"></span><br><span class="line"><span class="string">æ‰“å¼€themes/next/_config.yml</span> <span class="string">æœç´¢å…³é”®å­—needmoreshare2</span> <span class="string">ä¿®æ”¹ä¸ºä¸‹é¢è®¾ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="string">```yml</span></span><br><span class="line"><span class="attr">needmoreshare2:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postbottom:</span> <span class="comment">#postbottomä¸ºæ–‡ç« æœ«å°¾åˆ†äº« floatåˆ™æ˜¯åœ¨é¡µé¢ä¾§ç«¯åˆ†äº«</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">options:</span></span><br><span class="line">      <span class="attr">iconStyle:</span> <span class="string">default</span></span><br><span class="line">      <span class="attr">boxForm:</span> <span class="string">horizontal</span></span><br><span class="line">      <span class="comment">#ä½ç½®</span></span><br><span class="line">      <span class="attr">position:</span> <span class="string">bottomCenter</span></span><br><span class="line">      <span class="comment">#å¯åˆ†äº«ç½‘ç«™</span></span><br><span class="line">      <span class="attr">networks:</span> <span class="string">Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span></span><br><span class="line">  <span class="attr">float:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">options:</span></span><br><span class="line">      <span class="attr">iconStyle:</span> <span class="string">default</span></span><br><span class="line">      <span class="attr">boxForm:</span> <span class="string">vertical</span></span><br><span class="line">      <span class="comment">#ä½ç½®</span></span><br><span class="line">      <span class="attr">position:</span> <span class="string">topRight</span></span><br><span class="line">       <span class="comment">#å¯åˆ†äº«ç½‘ç«™</span></span><br><span class="line">      <span class="attr">networks:</span> <span class="string">Weibo,Wechat,Douban,QQZone,Twitter,Facebook</span></span><br></pre></td></tr></table></figure>
<h3 id="3.42-%E4%BF%AE%E6%94%B9%E6%96%87%E7%AB%A0%E5%BA%95%E9%83%A8%E7%9A%84%23%E5%8F%B7%E7%9A%84%E6%A0%87%E7%AD%BE%EF%BC%8C%E6%94%B9%E4%B8%BA%E5%9B%BE%E6%A0%87(todo)" tabindex="-1">3.42 ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„#å·çš„æ ‡ç­¾ï¼Œæ”¹ä¸ºå›¾æ ‡(TODO)</h3>
<p>ä¿®æ”¹æ¨¡æ¿/themes/next/layout/_macro/post.swig</p>
<p>æœç´¢ rel=â€œtagâ€&gt;#ï¼Œå°† # æ¢æˆ<i class="fa fa-tag"></i></p>
<h3 id="3.43-%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86%E8%AE%BF%E9%97%AE(encrypt)" tabindex="-1">3.43 æ–‡ç« åŠ å¯†è®¿é—®(encrypt)</h3>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/weixin_58068682/article/details/116614622">https://blog.csdn.net/weixin_58068682/article/details/116614622</a></p>
<ol>
<li>å®‰è£…</li>
</ol>
<ul>
<li>ä½¿ç”¨hexo-blog-encryptæ’ä»¶è¿›è¡ŒåŠ å¯†</li>
<li>å®‰è£…å¦‚ä¸‹å‘½ä»¤</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">--save</span> <span class="string">hexo-blog-encrypt</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¿«é€Ÿä½¿ç”¨</li>
<li>å°† â€œpasswordâ€ å­—æ®µæ·»åŠ åˆ°æ‚¨æ–‡ç« ä¿¡æ¯å¤´å°±åƒè¿™æ ·</li>
</ul>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2016/7/13 20:46:25</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">-</span> Diary</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">  -</span> Testing</span><br><span class="line"><span class="bullet">  -</span> Another Tag</span><br><span class="line"><span class="section">password: 123456</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<p>å†ä½¿ç”¨ hexo clean &amp;&amp; hexo g &amp;&amp; hexo s åœ¨æœ¬åœ°é¢„è§ˆåŠ å¯†çš„æ–‡ç« </p>
<ol start="2">
<li>
<p>è®¾ç½®ä¼˜å…ˆçº§<br>
æ–‡ç« ä¿¡æ¯å¤´ &gt; æŒ‰æ ‡ç­¾åŠ å¯†</p>
</li>
<li>
<p>é«˜çº§è®¾ç½®<br>
æ–‡ç« ä¿¡æ¯å¤´</p>
</li>
</ol>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">-</span> ä½œä¸ºæ—¥è®°åŠ å¯†</span><br><span class="line">date: 2016-03-30 21:12:21</span><br><span class="line">password: mikemessi</span><br><span class="line">abstract: æœ‰ä¸œè¥¿è¢«åŠ å¯†äº†, è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</span><br><span class="line">message: æ‚¨å¥½, è¿™é‡Œéœ€è¦å¯†ç .</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•.</span><br><span class="line"><span class="section">wrong<span class="emphasis">_hash_</span>message: æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> abstractï¼šç”¨äºè®¾ç½®åŠ å¯†æ–‡ç« æ˜¾ç¤ºçš„æ‘˜è¦ã€‚</span><br><span class="line"><span class="bullet">-</span> messageï¼šè¾“å…¥å¯†ç æç¤ºã€‚</span><br><span class="line"><span class="bullet">-</span> wrong<span class="emphasis">_pass_</span>message: è¾“å…¥é”™è¯¯æç¤º</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>_config.yml</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="attr">encrypt:</span> <span class="comment"># hexo-blog-encrypt</span></span><br><span class="line">  <span class="attr">abstract:</span> <span class="string">æœ‰ä¸œè¥¿è¢«åŠ å¯†äº†,</span> <span class="string">è¯·è¾“å…¥å¯†ç æŸ¥çœ‹.</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">æ‚¨å¥½,</span> <span class="string">è¿™é‡Œéœ€è¦å¯†ç .</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">tagName</span>, <span class="attr">password:</span> <span class="string">å¯†ç A</span>&#125;</span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">tagName</span>, <span class="attr">password:</span> <span class="string">å¯†ç B</span>&#125;</span><br><span class="line">  <span class="attr">wrong_pass_message:</span> <span class="string">æŠ±æ­‰,</span> <span class="string">è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹,</span> <span class="string">è¯·å†è¯•è¯•.</span></span><br><span class="line">  <span class="attr">wrong_hash_message:</span> <span class="string">æŠ±æ­‰,</span> <span class="string">è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ,</span> <span class="string">ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å¯¹åšæ–‡ç¦ç”¨ Tag åŠ å¯†</li>
</ol>
<p>åªéœ€è¦å°†åšæ–‡å¤´éƒ¨çš„ password è®¾ç½®ä¸º â€œâ€ å³å¯å–æ¶ˆ Tag åŠ å¯†.</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Callback Test</span><br><span class="line">date: 2019-12-21 11:54:07</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">    -</span> A Tag should be encrypted</span><br><span class="line"><span class="section">password: &quot;&quot;</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line"></span><br><span class="line">Use a &quot;&quot; to diable tag encryption.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3.44-%E5%85%A8%E5%B1%80%E6%92%AD%E6%94%BE%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90%EF%BC%88%E4%BD%BF%E7%94%A8-pajx-%E5%AE%9E%E7%8E%B0%EF%BC%89-%E5%88%87%E6%8D%A2%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%89%93%E6%96%AD" tabindex="-1">3.44 å…¨å±€æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼ˆä½¿ç”¨ Pajx å®ç°ï¼‰-åˆ‡æ¢é¡µé¢ä¸æ‰“æ–­</h3>
<p>å³å®ç°é¡µé¢è·³è½¬åˆ·æ–°åéŸ³ä¹ä¸é—´æ–­æ’­æ”¾ ï¼ˆåœ¨åšå®¢æ–‡ç« ä¸­çš„ç½‘æ˜“äº‘æ’ä»¶æ— æ³•å®ç°å…¨å±€æ’­æ”¾ã€‚ï¼‰</p>
<ul>
<li>
<p>æ‰“å¼€themes\hexo-theme-next\layoutæ–‡ä»¶å¤¹æ‰¾åˆ°_layout.swig</p>
</li>
<li>
<p>åœ¨&lt;\head&gt;æ ‡ç­¾å‰æ·»åŠ ä¸‹é¢ä»£ç ï¼Œå¹¶ä¿å­˜ã€‚</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>   //ç²˜è´´åˆ°è¿™é‡Œ </span><br><span class="line">  <span class="comment">&lt;!--pjaxï¼šé˜²æ­¢è·³è½¬é¡µé¢éŸ³ä¹æš‚åœ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°pajxï¼Œå°†å®ƒè®¾ç½®ä¸ºtrueï¼Œå¹¶ä¿å­˜ã€‚</li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Easily enable fast Ajax navigation on your website.</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-pjax</span></span><br><span class="line"><span class="attr">pjax:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2%E5%88%B0github" tabindex="-1">å››ã€éƒ¨ç½²åˆ°github</h1>
<h3 id="4.1-%E6%96%B0%E5%BB%BArepository" tabindex="-1">4.1 æ–°å»ºRepository</h3>
<p>åœ¨githubä¸Šæ–°å»ºä¸€ä¸ª Repositoryï¼ŒRepository nameä¸€å®šè¦æ˜¯ <strong>ä½ çš„ç”¨æˆ·å</strong>.github.io</p>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/4.1%20%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93.jpg" alt></p>
<h3 id="4.2-%E5%A4%8D%E5%88%B6%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80" tabindex="-1">4.2 å¤åˆ¶ä»“åº“åœ°å€</h3>
<p>å»ºè®®å¤åˆ¶sshï¼Œ</p>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/4.2%E5%A4%8D%E5%88%B6%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80.jpg" alt></p>
<h3 id="4.3-%E4%BF%AE%E6%94%B9%E7%AB%99%E7%82%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" tabindex="-1">4.3 ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶</h3>
<p><img src="/2024/08/07/Hexo-next%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%88%B0github/4.3%20%E9%83%A8%E7%BD%B2%E7%AB%99%E7%82%B9%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE.jpg" alt></p>
<h3 id="4.4-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6" tabindex="-1">4.4 å®‰è£…æ’ä»¶</h3>
<p>åœ¨Blogç›®å½•æ‰“å¼€cmdå‘½ä»¤è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<h3 id="4.5-%E9%83%A8%E7%BD%B2%E5%88%B0github" tabindex="-1">4.5 éƒ¨ç½²åˆ°github</h3>
<p>ç»§ç»­åœ¨cmdé‡Œé¢åˆ†åˆ«è¿è¡Œä¸€ä¸‹å‘½ä»¤</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d  # hexo d è¡¨ç¤ºæ‰§è¡Œéƒ¨ç½²</span><br></pre></td></tr></table></figure>
<h3 id="4.6-%E8%AE%BF%E9%97%AE%E7%AB%99%E7%82%B9" tabindex="-1">4.6 è®¿é—®ç«™ç‚¹</h3>
<p>é€šè¿‡ <strong>ä½ çš„ç”¨æˆ·å</strong>.github.io è®¿é—®ä½ éƒ¨ç½²åœ¨githubçš„åšå®¢</p>
<h3 id="4.7-%E7%BB%91%E5%AE%9A%E4%B8%AA%E4%BA%BA%E5%9F%9F%E5%90%8D" tabindex="-1">4.7 ç»‘å®šä¸ªäººåŸŸå</h3>
<p>å‚è€ƒï¼š<a href="https://blog.csdn.net/qq_44161695/article/details/117605288">https://blog.csdn.net/qq_44161695/article/details/117605288</a></p>
<hr>
<p>æœ¬ç‰‡å¤§éƒ¨åˆ†å‚è€ƒçš„è¯¥åšæ–‡ï¼Œä½†æœ‰äº›åœ°æ–¹å­˜åœ¨é—®é¢˜ï¼Œå› æ­¤åšé‡æ–°æ¢³ç†ã€‚<a href="https://blog.csdn.net/loze/article/details/94208742">https://blog.csdn.net/loze/article/details/94208742</a></p>
<p>æ–‡ä¸­å¸¦(TODO)è¡¨ç¤ºæˆ‘æœªè¿›è¡Œè®¾ç½®</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>3Dæ•°å­¦åŸºç¡€-å›¾å½¢å’Œæ¸¸æˆå¼€å‘-å­¦ä¹ ç¬”è®° ç¬¬äºŒç«  çŸ¢é‡</title>
    <url>/2024/09/21/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%9F%A2%E9%87%8F/</url>
    <content><![CDATA[<p>çŸ¢é‡(Vector)æ˜¯ç”¨äºæ„å»º2Då’Œ3Dæ•°å­¦çš„æ­£å¼æ•°å­¦å•å…ƒ</p>
<span id="more"></span>
<h1 id="2.1-%E5%90%91%E9%87%8F%E5%92%8C%E5%85%B6%E4%BB%96%E7%9A%84%E6%95%B0%E5%AD%A6%E7%9A%84%E5%AE%9A%E4%B9%89" tabindex="-1">2.1 å‘é‡å’Œå…¶ä»–çš„æ•°å­¦çš„å®šä¹‰</h1>
<p>ï¼ˆ1ï¼‰å¯¹äºæ•°å­¦å®¶æ¥è¯´ï¼Œå‘é‡æ˜¯ä¸€ä¸ªæ•°å­—åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ã€‚æ•°å­¦å®¶ä¼šåŒºåˆ†å‘é‡å’Œæ ‡é‡ã€‚æ ‡é‡å…¶å®å°±æ˜¯æ™®é€šæ•°å­—çš„æŠ€æœ¯æœ¯è¯­ã€‚å½“å¸Œæœ›å¼ºè°ƒç‰¹å®šçš„æ•°é‡è€Œä¸æ˜¯å‘é‡æ•°é‡æ—¶ï¼Œå°±ä¼šç‰¹æ„ä½¿ç”¨è¿™ä¸ªæœ¯è¯­ã€‚ä¾‹å¦‚ï¼Œé€Ÿåº¦ï¼ˆVelocityï¼‰å’Œä½ç§»ï¼ˆDisplacementï¼‰éƒ½æ˜¯å‘é‡ï¼Œè€Œé€Ÿç‡ï¼ˆSpeedï¼‰å’Œè·ç¦»ï¼ˆDistanceï¼‰åˆ™æ˜¯æ ‡é‡ã€‚<br>
å‘é‡çš„ç»´åº¦ï¼ˆDimensionï¼‰è¡¨ç¤ºåŒ…å«çš„å‘é‡çš„æ•°é‡ã€‚<br>
ï¼ˆ2ï¼‰åœ¨ä¹¦å†™å‘é‡æ—¶ï¼Œä¼šåˆ—å‡ºç”±æ–¹æ‹¬å·åŒ…å›´çš„æ•°å­—ï¼Œä¾‹å¦‚[1,2,3]ã€‚ã€‚å½“æˆ‘ä»¬ç”¨å…¬å¼å†™å‡ºæ¥æ—¶ï¼Œé€šå¸¸ä¼šçœç•¥é€—å·ã€‚åœ¨ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œæ°´å¹³å†™å…¥çš„å‘é‡ç§°ä¸ºè¡Œå‘é‡(Row Vector)ã€‚å‚ç›´å†™å…¥çš„å‘é‡ç§°ä¸ºåˆ—å‘é‡(Column Vector)ã€‚<br>
<img src="/2024/09/21/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%9F%A2%E9%87%8F/2.1%20%E5%88%97%E5%90%91%E9%87%8F.jpg" alt></p>
<p>ï¼ˆ3ï¼‰å‘é‡ä¸­çš„å„ä¸ªåˆ†é‡ï¼Œä½¿ç”¨ä¸‹æ ‡è¡¨ç¤ºæ³•ï¼Œå¸¸ç”¨x,y,z,wè¡¨ç¤ºä¸€ã€äºŒã€ä¸‰ã€å››ç»´åº¦ä¸­çš„å‘é‡ã€‚ä¾‹å¦‚ä½¿ç”¨xå’Œyæ¥æŒ‡ä»£äºŒç»´å‘é‡ä¸­çš„å…ƒç´ ;ä½¿ç”¨xã€yå’Œzè¡¨ç¤ºä¸‰ç»´å‘é‡ä¸­çš„å…ƒç´ ;ä½¿ç”¨xã€yã€zå’Œwè¡¨ç¤ºå››ç»´å‘é‡ä¸­çš„å…ƒç´ ã€‚<br>
<img src="/2024/09/21/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%9F%A2%E9%87%8F/2.1%20%E5%90%91%E9%87%8F%E8%A1%A8%E7%A4%BA%E6%B3%95.jpg" alt></p>
<p>ï¼ˆ4ï¼‰ä¹¦ä¸­å‘é‡çš„ä¹¦å†™è§„å®šã€‚</p>
<ul>
<li>æ ‡é‡å˜é‡ç”±æ–œä½“å­—çš„å°å†™ç½—é©¬å­—æ¯æˆ–å¸Œè…Šå­—æ¯è¡¨ç¤ºï¼Œå¦‚<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mtext>ã€</mtext><mi>b</mi><mtext>ã€</mtext><mi>x</mi><mtext>ã€</mtext><mi>y</mi><mtext>ã€</mtext><mi>z</mi><mtext>ã€</mtext><mi>Î¸</mi><mtext>ã€</mtext><mi>Î±</mi><mtext>ã€</mtext><mi>Ï‰</mi><mtext>å’Œ</mtext><mi>Î³</mi></mrow><annotation encoding="application/x-tex">aã€bã€xã€yã€zã€\thetaã€\alphaã€\omegaå’Œ\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal">b</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal">x</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord cjk_fallback">ã€</span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï‰</span><span class="mord cjk_fallback">å’Œ</span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></eq>ç­‰ã€‚</li>
<li>ä»»ä½•ç»´åº¦çš„å‘é‡å˜é‡ç”±ç²—ä½“å°å†™å­—æ¯è¡¨ç¤ºï¼Œå¦‚ <strong>a</strong>ã€<strong>b</strong>ã€ <strong>u</strong>ã€ <strong>v</strong>ã€<strong>q</strong>å’Œ<strong>r</strong>ç­‰ã€‚</li>
<li>çŸ©é˜µå˜é‡ä½¿ç”¨ç²—ä½“å¤§å†™å­—æ¯è¡¨ç¤ºï¼Œå¦‚<strong>A</strong>ã€<strong>B</strong>ã€<strong>M</strong>å’Œ<strong>R</strong>ç­‰ã€‚</li>
</ul>
<p>ï¼ˆ5ï¼‰ä¸»è¦å¤„ç†å‘é‡å’ŒçŸ©é˜µçš„æ•°å­¦åˆ†æ”¯ç§°ä¸ºçº¿æ€§ä»£æ•°ï¼ˆLinear Algebraï¼‰</p>
<h1 id="2.2-%E7%9F%A2%E9%87%8F%E7%9A%84%E5%87%A0%E4%BD%95%E5%AE%9A%E4%B9%89" tabindex="-1">2.2 çŸ¢é‡çš„å‡ ä½•å®šä¹‰</h1>
<p>ï¼ˆ1ï¼‰å‘é‡ï¼ˆçŸ¢é‡ï¼‰ æ˜¯å…·æœ‰å¤§å°å’Œæ–¹å‘çš„æœ‰å‘çº¿æ®µ</p>
<ul>
<li>çŸ¢é‡çš„å¤§å°ï¼ˆMagnitudeï¼‰æ˜¯æŒ‡çŸ¢é‡çš„é•¿åº¦ã€‚çŸ¢é‡å¯ä»¥å…·æœ‰ä»»ä½•éè´Ÿé•¿åº¦ã€‚</li>
<li>çŸ¢é‡çš„æ–¹å‘ï¼ˆDirectionï¼‰æè¿°çŸ¢é‡åœ¨ç©ºé—´ä¸­æŒ‡å‘çš„æ–¹å‘ã€‚</li>
</ul>
<h1 id="12-%E7%9F%A2%E9%87%8F%E5%8F%89%E7%A7%AF" tabindex="-1">12 çŸ¢é‡å‰ç§¯</h1>
<h2 id="12.1-%E6%AD%A3%E5%BC%8F%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E8%A7%84%E5%88%99" tabindex="-1">12.1 æ­£å¼çº¿æ€§ä»£æ•°è§„åˆ™</h2>
<ol>
<li>å‰ç§¯çš„è¡¨ç¤ºä¸º <strong>a</strong>x<strong>b</strong></li>
<li>å‰ç§¯çš„å…¬å¼ï¼š</li>
</ol>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.25em" columnalign="right" columnspacing><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>Â </mtext><msub><mi>x</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>y</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>z</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>Ã—</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.25em" columnalign="right" columnspacing><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>Â </mtext><msub><mi>x</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>y</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>z</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.25em" columnalign="right" columnspacing><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>Â </mtext><msub><mi>y</mi><mn>1</mn></msub><msub><mi>z</mi><mn>2</mn></msub><mo>âˆ’</mo><msub><mi>z</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>z</mi><mn>1</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>âˆ’</mo><msub><mi>x</mi><mn>1</mn></msub><msub><mi>z</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>x</mi><mn>1</mn></msub><msub><mi>y</mi><mn>2</mn></msub><mo>âˆ’</mo><msub><mi>y</mi><mn>1</mn></msub><msub><mi>x</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">
\left[\begin{aligned}\
x_1\\
y_1\\
z_1\\
\end{aligned}\right]
\times
\left[\begin{aligned}\
x_2\\
y_2\\
z_2\\
\end{aligned}\right]=
\left[\begin{aligned}\
y_1z_2-z_1y_2\\
z_1x_2-x_1z_2\\
x_1y_2-y_1x_2\\
\end{aligned}\right]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.667em;height:4.200em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.200em" viewbox="0 0 667 4200"><path d="M403 1759 V84 H666 V0 H319 V1759 v600 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v600 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace">Â </span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.667em;height:4.200em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.200em" viewbox="0 0 667 4200"><path d="M347 1759 V0 H0 V84 H263 V1759 v600 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v600 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.667em;height:4.200em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.200em" viewbox="0 0 667 4200"><path d="M403 1759 V84 H666 V0 H319 V1759 v600 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v600 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace">Â </span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.667em;height:4.200em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.200em" viewbox="0 0 667 4200"><path d="M347 1759 V0 H0 V84 H263 V1759 v600 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v600 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.667em;height:4.200em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.200em" viewbox="0 0 667 4200"><path d="M403 1759 V84 H666 V0 H319 V1759 v600 v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v600 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace">Â </span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35em;"><span style="top:-4.35em;"><span class="pstrut" style="height:6.2em;"></span><span style="width:0.667em;height:4.200em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.200em" viewbox="0 0 667 4200"><path d="M347 1759 V0 H0 V84 H263 V1759 v600 v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v600 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.85em;"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section><ol>
<li>å‰ç§¯å’Œç‚¹ç§¯å…·æœ‰ç›¸åŒçš„è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼šä¹˜æ³•æ­£åœ¨åŠ å‡æ³•ä¹‹å‰ã€‚å½“ç‚¹ç§¯å’Œå‰ç§¯ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå‰ç§¯ä¼˜å…ˆï¼š<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>a</mi><mo>âƒ—</mo></mover><mo separator="true">â‹…</mo><mover accent="true"><mi>b</mi><mo>âƒ—</mo></mover><mo>Ã—</mo><mover accent="true"><mi>c</mi><mo>âƒ—</mo></mover><mo>=</mo><mover accent="true"><mi>a</mi><mo>âƒ—</mo></mover><mo separator="true">â‹…</mo><mo stretchy="false">(</mo><mover accent="true"><mi>b</mi><mo>âƒ—</mo></mover><mo>Ã—</mo><mover accent="true"><mi>c</mi><mo>âƒ—</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\vec{a}Â·\vec{b}\times\vec{c}=\vec{a}Â·(\vec{b}\times\vec{c})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0608em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">b</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.714em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">c</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1799em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2274em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">b</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">c</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1799em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eqn></section>ï¼Œå› ä¸ºå¦‚æœå…ˆç®—äº†ç‚¹ç§¯çš„è¯ï¼Œä¸èƒ½é‡‡ç”¨æ ‡é‡å’ŒçŸ¢é‡çš„å‰ç§¯ã€‚</li>
<li>å‰ç§¯çš„åäº¤æ¢ï¼š<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><mi>a</mi><mo>âƒ—</mo></mover><mo>Ã—</mo><mover accent="true"><mi>b</mi><mo>âƒ—</mo></mover><mo>=</mo><mo>âˆ’</mo><mo stretchy="false">(</mo><mover accent="true"><mi>b</mi><mo>âƒ—</mo></mover><mo>Ã—</mo><mover accent="true"><mi>a</mi><mo>âƒ—</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\vec{a}\times\vec{b}=-(\vec{b}\times\vec{a})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7973em;vertical-align:-0.0833em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9774em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">b</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2274em;vertical-align:-0.25em;"></span><span class="mord">âˆ’</span><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9774em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">b</span></span><span style="top:-3.2634em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.714em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewbox="0 0 471 714" preserveaspectratio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eqn></section></li>
</ol>
<h3 id="12.2-%E5%87%A0%E4%BD%95%E8%A7%A3%E9%87%8A" tabindex="-1">12.2 å‡ ä½•è§£é‡Š</h3>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
      <categories>
        <category>3Dæ•°å­¦åŸºç¡€</category>
      </categories>
      <tags>
        <tag>3Dæ•°å­¦åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>3Dæ•°å­¦åŸºç¡€-å›¾å½¢å’Œæ¸¸æˆå¼€å‘-å­¦ä¹ ç¬”è®° ç¬¬ä¸€ç«  ç¬›å¡å°”åæ ‡ç³»</title>
    <url>/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/</url>
    <content><![CDATA[<p>é€‰æ‹©æ€§çš„è®°å½•å†…å®¹ï¼Œå­¦ä¹ ç¬”è®°</p>
<span id="more"></span>
<h1 id="1.1-%E4%B8%80%E7%BB%B4%E6%95%B0%E5%AD%A6" tabindex="-1">1.1 ä¸€ç»´æ•°å­¦</h1>
<h1 id="1.2-%E4%BA%8C%E7%BB%B4%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A9%BA%E9%97%B4" tabindex="-1">1.2 äºŒç»´ç¬›å¡å°”ç©ºé—´</h1>
<h2 id="1.2.2-%E4%BB%BB%E6%84%8F%E4%BA%8C%E7%BB%B4%E5%9D%90%E6%A0%87%E7%A9%BA%E9%97%B4" tabindex="-1">1.2.2 ä»»æ„äºŒç»´åæ ‡ç©ºé—´</h2>
<p>åŸç‚¹ã€xè½´ã€yè½´</p>
<h2 id="1.2.3-%E4%BD%BF%E7%94%A8%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E6%8C%87%E5%AE%9A%E4%BA%8C%E7%BB%B4%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE" tabindex="-1">1.2.3 ä½¿ç”¨ç¬›å¡å°”åæ ‡æŒ‡å®šäºŒç»´ä¸­çš„ä½ç½®</h2>
<p>åæ ‡ç‚¹è¡¨ç¤ºä¸º(x,y)</p>
<h1 id="1.3-%E4%B8%89%E7%BB%B4%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A9%BA%E9%97%B4" tabindex="-1">1.3 ä¸‰ç»´ç¬›å¡å°”ç©ºé—´</h1>
<h2 id="1.3.1-%E6%96%B0%E5%A2%9E%E7%BB%B4%E5%BA%A6%E5%92%8C%E8%BD%B4" tabindex="-1">1.3.1 æ–°å¢ç»´åº¦å’Œè½´</h2>
<p>æ–°å¢zè½´</p>
<h2 id="1.3.2-%E5%9C%A8%E4%B8%89%E7%BB%B4%E4%B8%AD%E5%88%B6%E5%8A%A8%E4%BD%8D%E7%BD%AE" tabindex="-1">1.3.2 åœ¨ä¸‰ç»´ä¸­åˆ¶åŠ¨ä½ç½®</h2>
<p>åæ ‡ç‚¹è¡¨ç¤ºä¸º(x,y,z)</p>
<h2 id="1.3.3-%E5%B7%A6%E6%89%8B%E4%B8%8E%E5%8F%B3%E6%89%8B%E5%9D%90%E6%A0%87%E7%A9%BA%E9%97%B4" tabindex="-1">1.3.3 å·¦æ‰‹ä¸å³æ‰‹åæ ‡ç©ºé—´</h2>
<p><img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.3.3%E5%B7%A6%E6%89%8B%E4%B8%8E%E5%8F%B3%E6%89%8B%E5%9D%90%E6%A0%87%E7%B3%BB.jpg" alt></p>
<p><strong>1. å·¦æ‰‹åæ ‡ç³»</strong></p>
<ul>
<li>ä¼¸å‡ºå·¦æ‰‹ï¼Œç”¨æ‹‡æŒ‡å’Œé£ŸæŒ‡åšå‡ºä¸€ä¸ªLå½¢</li>
<li>æ‹‡æŒ‡æŒ‡å‘ä½ çš„å³è¾¹ï¼Œé£ŸæŒ‡æœä¸Š</li>
<li>ç°åœ¨ä¼¸å±•ä½ çš„ç¬¬ä¸‰æ ¹æ‰‹æŒ‡ï¼ˆä¸­æŒ‡ï¼‰ï¼Œä½¿å®ƒç›´æ¥æŒ‡å‘å‰æ–¹</li>
</ul>
<p>è¿™æ ·ä½ å°±å½¢æˆäº†ä¸€ä¸ª<strong>å·¦æ‰‹åæ ‡ç³»</strong>ã€‚ä½ çš„æ‹‡æŒ‡ã€é£ŸæŒ‡å’Œç¬¬ä¸‰æ ¹ï¼ˆä¸­æŒ‡ï¼‰æ‰‹æŒ‡åˆ†åˆ«æŒ‡å‘+xã€+yå’Œ+zæ–¹å‘ã€‚</p>
<p><strong>2. å³æ‰‹åæ ‡ç³»</strong></p>
<ul>
<li>ä¼¸å‡ºæœ‰æ‰‹ï¼Œç”¨æ‹‡æŒ‡å’Œé£ŸæŒ‡åšå‡ºä¸€ä¸ªLå½¢</li>
<li>æ‹‡æŒ‡æŒ‡å‘ä½ çš„å·¦è¾¹ï¼Œé£ŸæŒ‡æœä¸Š</li>
<li>ç°åœ¨ä¼¸å±•ä½ çš„ç¬¬ä¸‰æ ¹æ‰‹æŒ‡ï¼ˆä¸­æŒ‡ï¼‰ï¼Œä½¿å®ƒç›´æ¥æŒ‡å‘å‰æ–¹<br>
è¿™æ ·ä½ å°±å½¢æˆäº†ä¸€ä¸ª<strong>å³æ‰‹åæ ‡ç³»</strong>ã€‚ä½ çš„æ‹‡æŒ‡ã€é£ŸæŒ‡å’Œç¬¬ä¸‰æ ¹ï¼ˆä¸­æŒ‡ï¼‰æ‰‹æŒ‡åˆ†åˆ«æŒ‡å‘+xã€+yå’Œ+zæ–¹å‘ã€‚</li>
</ul>
<p><strong>3. å·¦æ—‹ã€å³æ—‹åæ ‡ç³»</strong><br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.3.3%E5%B7%A6%E6%97%8B%E3%80%81%E5%8F%B3%E6%97%8B%E5%9D%90%E6%A0%87%E7%B3%BB.jpg" alt><br>
å·¦æ—‹å’Œå³æ—‹åæ ‡ç³»åœ¨â€œæ­£æ—‹è½¬â€çš„å®šä¹‰ä¸Šä¹Ÿæœ‰æ‰€ä¸åŒã€‚å‡è®¾åœ¨ç©ºé—´ä¸­æœ‰ä¸€æ¡ç›´çº¿ï¼Œéœ€è¦å›´ç»•è¿™æ¡ç›´çº¿æ—‹è½¬æŒ‡å®šçš„è§’åº¦ã€‚æˆ‘ä»¬å°†æ­¤çº¿ç§°ä¸ºæ—‹è½¬è½´(Axis of Rotation)ã€‚<br>
ï¼ˆ1ï¼‰ å·¦ï¼ˆå³ï¼‰æ‰‹è§„åˆ™ã€‚åœ¨å·¦ï¼ˆå³ï¼‰æ‰‹åæ ‡ç³»ä¸­ï¼Œå‘ŠçŸ¥å“ªä¸€ä¸ªæ–¹å‘æ˜¯æ—‹è½¬æ­£æ–¹å‘çš„ï¼Œå“ªä¸€ä¸ªæ–¹å‘æ˜¯æ—‹è½¬è´Ÿæ–¹å‘çš„æ ‡å‡†æ–¹æ³•ç§°ä¸º<strong>å·¦ï¼ˆå³ï¼‰æ‰‹è§„åˆ™</strong>ã€‚</p>
<ul>
<li>å°†å·¦ï¼ˆå³ï¼‰æ‰‹æ‘†å‡ºä¸€ä¸ªâ€œç«–èµ·å¤§æ‹‡æŒ‡â€çš„ä½ç½®ï¼Œæ‹‡æŒ‡æŒ‡å‘æ—‹è½¬è½´çš„æ­£å€¼ç«¯</li>
<li>æ­¤æ—¶ï¼Œå›´ç»•æ—‹è½¬è½´çš„æ­£å‘æ—‹è½¬æ–¹å‘å°±æ˜¯æ‰‹æŒ‡å·æ›²çš„æ–¹å‘ã€‚</li>
</ul>
<p><img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.3.3%E5%B7%A6%E6%97%8B%E3%80%81%E5%8F%B3%E6%97%8B%E5%9D%90%E6%A0%87%E7%B3%BB%E4%B8%BB%E8%BD%B4%E6%97%8B%E8%BD%AC.jpg" alt><br>
ï¼ˆ2ï¼‰ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨<strong>å·¦æ‰‹åæ ‡ç³»</strong>ä¸­ï¼Œ<strong>æ­£å‘æ—‹è½¬</strong>ä»è½´çš„æ­£ç«¯çœ‹æ—¶æ˜¯<strong>é¡ºæ—¶é’ˆ</strong>æ—‹è½¬çš„;è€Œåœ¨<strong>å³æ‰‹åæ ‡ç³»ä¸­ï¼Œæ­£å‘æ—‹è½¬æ˜¯é€†æ—¶é’ˆæ—‹è½¬</strong>çš„ã€‚</p>
<p><strong>4. å·¦å³æ‰‹åæ ‡ç³»è½¬æ¢</strong></p>
<p>äº¤æ¢ä¸€ä¸ªè½´çš„æ­£è´Ÿç«¯</p>
<p><strong>5. å·¦å³æ‰‹åæ ‡ç³»çš„åº”ç”¨</strong><br>
ä¸€äº›è¾ƒæ–°çš„è®¡ç®—æœºå›¾å½¢æ–‡çŒ®ä½¿ç”¨å·¦æ‰‹åæ ‡ç³»ï¼Œè€Œä¼ ç»Ÿçš„å›¾å½¢æ–‡çŒ®å’Œæ›´å¤šé¢å‘æ•°å­¦çš„çº¿æ€§ä»£æ•°çš„ç ”ç©¶äººå‘˜åˆ™å€¾å‘äºä½¿ç”¨å³æ‰‹åæ ‡ç³»</p>
<h2 id="1.3.4-%E4%B8%80%E4%BA%9B%E4%BD%BF%E7%94%A8%E7%9A%84%E9%87%8D%E8%A6%81%E7%BA%A6%E5%AE%9A" tabindex="-1">1.3.4 ä¸€äº›ä½¿ç”¨çš„é‡è¦çº¦å®š</h2>
<ol>
<li>åœ¨è®¾è®¡ä¸‰ç»´è™šæ‹Ÿä¸–ç•Œæ—¶ï¼Œå¿…é¡»äº‹å…ˆåšå‡ºå‡ ç§è®¾è®¡å†³ç­–ï¼Œä¾‹å¦‚å·¦æ‰‹æˆ–å³æ‰‹åæ ‡ç³»ã€å“ªä¸ªæ–¹å‘æ˜¯+yç­‰ã€‚</li>
<li><strong><font color="red">è¿™æœ¬ä¹¦åç»­å°†ä½¿ç”¨å·¦æ‰‹åæ ‡ç³»(+xã€+yå’Œ+zæ–¹å‘åˆ†åˆ«æŒ‡å‘å³ã€ä¸Šå’Œå‰)ä½œä¸ºä¾‹å­è®²è§£ï¼Œå½“å‡ºç°å·®å¼‚æ—¶ä¼šç‰¹åˆ«åŠ ä»¥æŒ‡å‡º</font></strong></li>
</ol>
<h1 id="1.4-%E4%B8%80%E4%BA%9B%E9%9B%B6%E6%95%A3%E7%9A%84%E7%9F%A5%E8%AF%86" tabindex="-1">1.4 ä¸€äº›é›¶æ•£çš„çŸ¥è¯†</h1>
<h3 id="1.4.1-%E6%B1%82%E5%92%8C%E4%B8%8E%E6%B1%82%E7%A7%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E6%B3%95" tabindex="-1">1.4.1 æ±‚å’Œä¸æ±‚ç§¯çš„è¡¨ç¤ºæ³•</h3>
<p><img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.1%E6%B1%82%E5%92%8C%E8%A1%A8%E7%A4%BA%E6%B3%95.jpg" alt><br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.1%E6%B1%82%E7%A7%AF%E8%A1%A8%E7%A4%BA%E6%B3%95.jpg" alt></p>
<h2 id="1.4.2-%E5%8C%BA%E9%97%B4%E7%AC%A6%E5%8F%B7" tabindex="-1">1.4.2 åŒºé—´ç¬¦å·</h2>
<ul>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span></span></span></eq> è¡¨ç¤º â€œæ‰€æœ‰æ»¡è¶³<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>â‰¤</mo><mi>x</mi><mo>â‰¤</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">aâ‰¤xâ‰¤b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></eq>çš„æ•°å­—<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></eq>â€ ,æ˜¯ä¸€ä¸ªé—­åŒºé—´ï¼ŒåŒ…å«a,b</li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a,b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></eq> è¡¨ç¤º â€œæ‰€æœ‰æ»¡è¶³<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>&lt;</mo><mi>x</mi><mo>&lt;</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a&lt;x&lt;b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></eq>çš„æ•°å­—<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></eq>â€ ,æ˜¯ä¸€ä¸ªå¼€åŒºé—´ï¼Œä¸åŒ…å«a,b</li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">(a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span></span></span></eq> ä¸<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">[a,b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></eq> è¡¨ç¤ºåŠå¼€åŒºé—´</li>
</ul>
<h2 id="1.4.3-%E8%A7%92%E5%BA%A6%E3%80%81%E5%BA%A6%E6%95%B0%E5%92%8C%E5%BC%A7%E5%BA%A6" tabindex="-1">1.4.3 è§’åº¦ã€åº¦æ•°å’Œå¼§åº¦</h2>
<p>ï¼ˆ1ï¼‰è§’åº¦å¯ä»¥æµ‹é‡å¹³é¢ä¸­çš„æ—‹è½¬é‡ã€‚è¡¨ç¤ºè§’åº¦çš„å˜é‡é€šå¸¸è¢«èµ‹äºˆå¸Œè…Šå­—æ¯<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></eq>ã€‚ç”¨äºæŒ‡å®šè§’åº¦çš„æœ€é‡è¦çš„åº¦é‡å•ä½æ˜¯<strong>åº¦( Â°ï¼‰å’Œå¼§åº¦ï¼ˆradï¼‰</strong>ã€‚</p>
<p>ï¼ˆ2ï¼‰äººç±»é€šå¸¸ä½¿ç”¨åº¦ï¼ˆDegreeï¼‰æ•°æ¥æµ‹é‡è§’åº¦ã€‚<strong>ä¸€åº¦è¡¨ç¤ºæ—‹è½¬1/360ï¼Œå› æ­¤360Â°ä»£è¡¨æ—‹è½¬å®Œæ•´çš„ä¸€åœˆ</strong>ã€‚ç„¶è€Œï¼Œæ•°å­¦å®¶æ›´å–œæ¬¢ä»¥å¼§åº¦ä¸ºå•ä½æµ‹é‡è§’åº¦ï¼Œ<strong>å¼§åº¦æ˜¯åŸºäºåœ†çš„å±æ€§çš„åº¦é‡å•ä½</strong>ã€‚å½“ä»¥å¼§åº¦æŒ‡å®šä¸¤æ¡çº¿ä¹‹é—´çš„è§’åº¦æ—¶ï¼Œ<strong>å®é™…ä¸Šæ˜¯æµ‹é‡å•ä½åœ†(ä»¥åŠå¾„ä¸º1çš„åŸç‚¹ä¸ºä¸­å¿ƒçš„åœ†ï¼‰çš„æˆªå–å¼§çš„é•¿åº¦</strong></p>
<p>ï¼ˆ3ï¼‰å¼§åº¦å’Œåº¦æ•°çš„è½¬æ¢<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.1%E5%BC%A7%E5%BA%A6%E5%92%8C%E8%A7%92%E5%BA%A6%E7%9A%84%E8%BD%AC%E6%8D%A2.jpg" alt></p>
<h2 id="1.4.4-%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0" tabindex="-1">1.4.4 ä¸‰è§’å‡½æ•°</h2>
<p>ï¼ˆ1ï¼‰ æ­£å¼¦<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">cos\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">cos</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></eq>ã€ä½™å¼¦<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">sin\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></eq></p>
<ul>
<li>åœ¨åæ ‡ä¸­ä¹Ÿæœ‰ç‰¹æ®Šçš„æ„ä¹‰ï¼Œ <eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>Î¸</mi><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">cos\theta = x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">cos</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></eq> ,<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>Î¸</mi><mo>=</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">sin\theta = y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></eq></li>
</ul>
<p>ï¼ˆ2ï¼‰å‰²çº¿(secant)ã€ä½™å‰²ï¼ˆcosecantï¼‰ã€åˆ‡çº¿ï¼ˆtangentï¼‰å’Œä½™åˆ‡ï¼ˆcotangentï¼‰ä¹Ÿæ˜¯æœ‰ç”¨çš„ä¸‰è§’å‡½æ•°ã€‚<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.4%20%E5%89%B2%E7%BA%BF%E3%80%81%E4%BD%99%E5%89%B2%E3%80%81%E5%88%87%E7%BA%BF%E5%92%8C%E4%BD%99%E5%88%87.jpg" alt></p>
<p>ï¼ˆ3ï¼‰ å‹¾è‚¡ä¸ä¸‰è§’å‡½æ•°çš„å¯¹åº”å…³ç³»<br>
åœ¨æœ¯è¯­ä¸­ï¼Œå‹¾è¢«ç§°ä¸ºé‚»è¾¹(Adjacent)ï¼Œé•¿åº¦ä¸ºx;è‚¡è¢«ç§°ä¸ºå¯¹è¾¹(Opposite),é•¿åº¦ä¸ºyã€‚å®ƒä»¬éƒ½æ˜¯ç›¸å¯¹äºè§’åº¦0è¿›è¡Œè§£é‡Šçš„ã€‚åŒæ ·ï¼Œåœ¨è¿™é‡Œå­—æ¯é¡ºåºä¹Ÿæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è®°å¿†è¾…åŠ©æ‰‹æ®µâ€”â€”Adjacentå’Œ Opposite çš„é¡ºåºä¸ç›¸åº”çš„cosineå’Œ sine çš„é¡ºåºæ˜¯ç›¸åŒçš„ã€‚å¼¦åˆ™è¢«ç§°ä¸ºæ–œè¾¹ï¼ˆHypotenuse)ï¼Œè€Œç¼©å†™è¯ <strong>hypã€adjå’Œ oppåˆ™åˆ†åˆ«æŒ‡çš„æ˜¯æ–œè¾¹ã€é‚»è¾¹å’Œå¯¹è¾¹çš„é•¿åº¦</strong>ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.4%20%E5%8B%BE%E8%82%A1%E4%B8%8E%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0.jpg" alt></p>
<ul>
<li>å½“<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¸</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">Î¸</span></span></span></span></eq>ä¸ºé’è§’æ—¶ï¼Œä¸Šè¿°ç­‰å¼ä¸å¤ªé€‚ç”¨ï¼Œå› ä¸ºä¸èƒ½å½¢æˆå…·æœ‰é’è§’å†…è§’çš„ç›´è§’ä¸‰è§’å½¢ã€‚ä½†æ˜¯ï¼Œé€šè¿‡åœ¨æ ‡å‡†ä½ç½®æ˜¾ç¤ºè§’åº¦å¹¶å…è®¸æ—‹è½¬çš„çº¿æ¡ä¸ºä»»ä½•é•¿åº¦rï¼Œå¯ä»¥ä½¿ç”¨xã€yå’Œrè¡¨ç¤ºä»¥ä¸‹å¯¹æ¯”å…³ç³»ã€‚<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.4%20%E5%8B%BE%E8%82%A1%E4%B8%8E%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0_%E8%A7%92%E5%BA%A6%E4%B8%BA%E9%92%9D%E8%A7%92%E7%A4%BA%E6%84%8F%E5%9B%BE.jpg" alt><br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.4%20%E5%8B%BE%E8%82%A1%E4%B8%8E%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0_%E8%A7%92%E5%BA%A6%E4%B8%BA%E9%92%9D%E8%A7%92.jpg" alt></li>
</ul>
<p><strong>ï¼ˆ4ï¼‰å¸¸è§è§’åº¦çš„åº¦æ•°å’Œå¼§åº¦å€¼ï¼Œä»¥åŠç›¸åº”çš„ä¸‰è§’å‡½æ•°çš„å€¼</strong>â­<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.4%20%E5%B8%B8%E8%A7%81%E8%A7%92%E5%BA%A6%E7%9A%84%E5%BA%A6%E6%95%B0%E5%92%8C%E5%BC%A7%E5%BA%A6%E5%80%BC%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%BA%94%E7%9A%84%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E7%9A%84%E5%80%BC.jpg" alt><br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.4%20%E5%B8%B8%E8%A7%81%E8%A7%92%E5%BA%A6%E7%9A%84%E5%BA%A6%E6%95%B0%E5%92%8C%E5%BC%A7%E5%BA%A6%E5%80%BC%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%BA%94%E7%9A%84%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E7%9A%84%E5%80%BC1.jpg" alt></p>
<h2 id="1.4.5-%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E6%81%92%E7%AD%89%E5%BC%8F-%E2%AD%90" tabindex="-1">1.4.5 ä¸‰è§’å‡½æ•°æ’ç­‰å¼ â­</h2>
<p>ï¼ˆ1ï¼‰åŸºæœ¬æ’ç­‰å¼ï¼ˆå¯åŸºäºå•ä½åœ†çš„å¯¹ç§°æ€§æ¨å¯¼å‡ºï¼‰<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.5%20%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E6%81%92%E7%AD%89%E5%BC%8F.jpg" alt></p>
<p>ï¼ˆ2ï¼‰æ¯•è¾¾å“¥æ‹‰æ–¯æ’ç­‰å¼<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.5%20%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E6%81%92%E7%AD%89%E5%BC%8F_%E6%AF%95%E8%BE%BE%E5%93%A5%E6%8B%89%E6%96%AF%E6%81%92%E7%AD%89%E5%BC%8F.jpg" alt></p>
<p>ï¼ˆ3ï¼‰å’Œå·®å…¬å¼<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.5%20%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E6%81%92%E7%AD%89%E5%BC%8F_%E5%92%8C%E5%B7%AE%E5%85%AC%E5%BC%8F.jpg" alt></p>
<p>ï¼ˆ4ï¼‰ç­‰è…°ä¸‰è§’å½¢æ’ç­‰å¼ï¼ˆå’Œå·®å…¬å¼çš„ç‰¹æ®Šæƒ…å†µï¼‰<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.5%20%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E6%81%92%E7%AD%89%E5%BC%8F_%E7%AD%89%E8%85%B0%E4%B8%89%E8%A7%92%E5%BD%A2%E6%81%92%E7%AD%89%E5%BC%8F.jpg" alt></p>
<p>ï¼ˆ5ï¼‰æ­£å¼¦å®šç†ä¸ä½™å¼¦å®šç†<br>
<img src="/2024/09/20/3D%E6%B8%B8%E6%88%8F%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9B%BE%E5%BD%A2%E5%92%8C%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E7%AC%9B%E5%8D%A1%E5%B0%94%E5%9D%90%E6%A0%87%E7%B3%BB/1.4.5%20%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0%E6%81%92%E7%AD%89%E5%BC%8F_%E6%AD%A3%E5%BC%A6%E5%AE%9A%E7%90%86%E4%B8%8E%E4%BD%99%E5%BC%A6%E5%AE%9A%E7%90%86.jpg" alt></p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
      <categories>
        <category>3Dæ•°å­¦åŸºç¡€</category>
      </categories>
      <tags>
        <tag>3Dæ•°å­¦åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>post</title>
    <url>/2024/09/20/%E7%83%AD%E6%9B%B4%E6%96%B0%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E5%AD%A6%E4%B9%A0-AssetBundle-AB%E5%8C%85/</url>
    <content><![CDATA[<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
  </entry>
  <entry>
    <title>luaå­¦ä¹ ç¬”è®°1</title>
    <url>/2024/08/20/lua-lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>luaå­¦ä¹ ç¬”è®°</p>
<span id="more"></span>
<ul>
<li><a href="#%E9%9B%B6-%E5%BC%95%E7%94%A8">é›¶ å¼•ç”¨</a></li>
<li><a href="#%E4%B8%80-%E6%A6%82%E8%BF%B0">ä¸€ æ¦‚è¿°</a></li>
<li><a href="#%E4%BA%8C-%E5%AE%89%E8%A3%85">äºŒ å®‰è£…</a></li>
<li><a href="#%E4%B8%89-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">ä¸‰ åŸºæœ¬è¯­æ³•</a>
<ul>
<li><a href="#31-%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%BC%96%E7%A8%8B">3.1 äº¤äº’å¼ç¼–ç¨‹</a></li>
<li><a href="#32-%E8%84%9A%E6%9C%AC%E5%BC%8F%E7%BC%96%E7%A8%8B">3.2 è„šæœ¬å¼ç¼–ç¨‹</a></li>
<li><a href="#33-%E6%B3%A8%E9%87%8A">3.3 æ³¨é‡Š</a></li>
<li><a href="#34-%E6%A0%87%E8%AF%86%E7%AC%A6">3.4 æ ‡è¯†ç¬¦</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">å›› æ•°æ®ç±»å‹</a>
<ul>
<li><a href="#41-nil%E7%A9%BA">4.1 nil(ç©º)</a></li>
<li><a href="#42-boolean%E5%B8%83%E5%B0%94">4.2 booleanï¼ˆå¸ƒå°”ï¼‰</a></li>
<li><a href="#43-number%E6%95%B0%E5%AD%97">4.3 numberï¼ˆæ•°å­—ï¼‰</a></li>
<li><a href="#44-string%E5%AD%97%E7%AC%A6%E4%B8%B2">4.4 stringï¼ˆå­—ç¬¦ä¸²ï¼‰</a></li>
<li><a href="#45-%E8%A1%A8">4.5 è¡¨</a></li>
<li><a href="#46-function%E5%87%BD%E6%95%B0">4.6 functionï¼ˆå‡½æ•°ï¼‰</a></li>
<li><a href="#47-thread%E7%BA%BF%E7%A8%8B">4.7 threadï¼ˆçº¿ç¨‹ï¼‰</a></li>
<li><a href="#48-userdata%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B">4.8 userdataï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E5%8F%98%E9%87%8F">äº” å˜é‡</a>
<ul>
<li><a href="#51-%E5%8F%98%E9%87%8F">5.1 å˜é‡</a></li>
<li><a href="#52-%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5">5.2 èµ‹å€¼è¯­å¥</a></li>
<li><a href="#53-%E7%B4%A2%E5%BC%95">5.3 ç´¢å¼•</a></li>
</ul>
</li>
<li><a href="#%E5%85%AD-%E5%BE%AA%E7%8E%AF">å…­ å¾ªç¯</a>
<ul>
<li><a href="#61-%E5%BE%AA%E7%8E%AF%E6%96%B9%E5%BC%8F">6.1 å¾ªç¯æ–¹å¼</a></li>
<li><a href="#62-%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5">6.2 å¾ªç¯æ§åˆ¶è¯­å¥</a></li>
<li><a href="#63-%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF">6.3 æ— é™å¾ªç¯</a></li>
</ul>
</li>
<li><a href="#%E4%B8%83-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-if-else">ä¸ƒ æµç¨‹æ§åˆ¶ ï¼ˆif elseï¼‰</a></li>
<li><a href="#%E5%85%AB-%E5%87%BD%E6%95%B0">å…« å‡½æ•°</a>
<ul>
<li><a href="#81-%E6%A6%82%E8%BF%B0">8.1 æ¦‚è¿°</a></li>
<li><a href="#82-%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89">8.2 å‡½æ•°çš„å®šä¹‰</a></li>
<li><a href="#83-%E5%A4%9A%E8%BF%94%E5%9B%9E%E5%80%BC">8.3 å¤šè¿”å›å€¼</a></li>
<li><a href="#84-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0">8.4 å¯å˜å‚æ•°</a></li>
</ul>
</li>
<li><a href="#%E4%B9%9D-%E8%BF%90%E7%AE%97%E7%AC%A6">ä¹ è¿ç®—ç¬¦</a>
<ul>
<li><a href="#91-%E8%BF%90%E7%AE%97%E7%AC%A6%E7%B1%BB%E5%9E%8B">9.1 è¿ç®—ç¬¦ç±»å‹</a></li>
<li><a href="#92-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6">9.2 ç®—æ•°è¿ç®—ç¬¦</a></li>
<li><a href="#93-%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6">9.3 å…³ç³»è¿ç®—ç¬¦</a></li>
<li><a href="#94-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6">9.4 é€»è¾‘è¿ç®—ç¬¦</a></li>
<li><a href="#95-%E5%85%B6%E4%BB%96%E8%BF%90%E7%AE%97%E7%AC%A6">9.5 å…¶ä»–è¿ç®—ç¬¦</a></li>
<li><a href="#96-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7">9.6 è¿ç®—ç¬¦ä¼˜å…ˆçº§</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81-%E5%AD%97%E7%AC%A6%E4%B8%B2">å å­—ç¬¦ä¸²</a>
<ul>
<li><a href="#101-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%A1%A8%E7%A4%BA">10.1 å­—ç¬¦ä¸²çš„è¡¨ç¤º</a></li>
<li><a href="#102-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E8%AE%A1%E7%AE%97">10.2 å­—ç¬¦ä¸²é•¿åº¦è®¡ç®—</a></li>
<li><a href="#103-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0">10.3 å­—ç¬¦ä¸²çš„æ“ä½œï¼ˆå‡½æ•°ï¼‰</a></li>
<li><a href="#104-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96">10.4 å­—ç¬¦ä¸²æˆªå–</a></li>
<li><a href="#105-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2">10.5 å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢</a></li>
<li><a href="#106-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E6%89%BE%E4%B8%8E%E5%8F%8D%E8%BD%AC">10.6 å­—ç¬¦ä¸²æŸ¥æ‰¾ä¸åè½¬</a></li>
<li><a href="#107-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96">10.7 å­—ç¬¦ä¸²æ ¼å¼åŒ–</a></li>
<li><a href="#108-%E5%AD%97%E7%AC%A6%E4%B8%8E%E6%95%B4%E6%95%B0%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2">10.8 å­—ç¬¦ä¸æ•´æ•°ç›¸äº’è½¬æ¢</a></li>
<li><a href="#109-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E4%B8%8E%E5%A4%8D%E5%88%B6">10.9 å­—ç¬¦ä¸²è¿æ¥ä¸å¤åˆ¶</a></li>
<li><a href="#1010-%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F">10.10 åŒ¹é…æ¨¡å¼</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%B8%80-lua%E6%95%B0%E7%BB%84">åä¸€ Luaæ•°ç»„</a>
<ul>
<li><a href="#111-%E6%A6%82%E8%BF%B0">11.1 æ¦‚è¿°</a></li>
<li><a href="#112-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84">11.2 ä¸€ç»´æ•°ç»„</a></li>
<li><a href="#113-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84">11.3 å¤šç»´æ•°ç»„</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%BA%8C-%E8%BF%AD%E4%BB%A3%E5%99%A8">åäºŒ è¿­ä»£å™¨ï¼ˆâ­ï¼‰</a>
<ul>
<li><a href="#121-%E6%A6%82%E8%BF%B0">12.1 æ¦‚è¿°</a></li>
<li><a href="#122-%E6%B3%9B%E5%9E%8Bfor%E8%BF%AD%E4%BB%A3%E5%99%A8">12.2 æ³›å‹forè¿­ä»£å™¨</a></li>
<li><a href="#122-%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8">12.2 æ— çŠ¶æ€çš„è¿­ä»£å™¨</a></li>
<li><a href="#123-%E5%A4%9A%E7%8A%B6%E6%80%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8">12.3 å¤šçŠ¶æ€çš„è¿­ä»£å™¨</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%B8%89-table%E8%A1%A8">åä¸‰ tableï¼ˆè¡¨ï¼‰ï¼ˆâ­ï¼‰</a>
<ul>
<li><a href="#131-%E6%A6%82%E8%BF%B0">13.1 æ¦‚è¿°</a></li>
<li><a href="#132-%E8%A1%A8table%E7%9A%84%E6%9E%84%E9%80%A0">13.2 è¡¨ï¼ˆTableï¼‰çš„æ„é€ </a></li>
<li><a href="#133-table%E6%93%8D%E4%BD%9C">13.3 Tableæ“ä½œ</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E5%9B%9B-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85">åå›› æ¨¡å—ä¸åŒ…ï¼ˆâ­ï¼‰</a>
<ul>
<li><a href="#141-%E6%A6%82%E8%BF%B0%E5%8F%8A%E5%AE%9A%E4%B9%89">14.1 æ¦‚è¿°åŠå®šä¹‰</a></li>
<li><a href="#142-%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97require%E5%87%BD%E6%95%B0">14.2 åŠ è½½æ¨¡å—ï¼ˆrequireå‡½æ•°ï¼‰</a></li>
<li><a href="#143-c%E5%8C%85">14.3 CåŒ…</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%BA%94-%E5%85%83%E8%A1%A8metatable">åäº” å…ƒè¡¨(Metatable)ï¼ˆâ­ï¼‰</a>
<ul>
<li><a href="#151-%E6%A6%82%E8%BF%B0">15.1 æ¦‚è¿°</a></li>
<li><a href="#152-__index-%E5%85%83%E6%96%B9%E6%B3%95">15.2 __index å…ƒæ–¹æ³•ï¼ˆâ­â­â­ï¼‰</a></li>
<li><a href="#153-__newindex-%E5%85%83%E6%96%B9%E6%B3%95">15.3 __newindex å…ƒæ–¹æ³•ï¼ˆâ­ï¼‰</a></li>
<li><a href="#154-rawget%E5%92%8Crawset">15.4 rawgetå’Œrawset</a></li>
<li><a href="#155-%E8%BF%90%E7%AE%97%E5%85%83%E6%96%B9%E6%B3%95-%E4%B8%BA%E8%A1%A8%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C%E7%AC%A6">15.5 è¿ç®—å…ƒæ–¹æ³•-ä¸ºè¡¨æ·»åŠ æ“ä½œç¬¦</a></li>
<li><a href="#156-__call%E5%85%83%E6%96%B9%E6%B3%95">15.6 __callå…ƒæ–¹æ³•</a></li>
<li><a href="#157-__tostring-%E5%85%83%E6%96%B9%E6%B3%95">15.7 __tostring å…ƒæ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E5%85%AD-%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8Fcoroutine">åå…­ ååŒç¨‹åºï¼ˆcoroutineï¼‰ï¼ˆâ­â­â­ï¼‰</a>
<ul>
<li><a href="#161-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E5%90%8Ccoroutine">16.1 ä»€ä¹ˆæ˜¯ååŒï¼ˆcoroutineï¼‰</a></li>
<li><a href="#162-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">16.2 åŸºæœ¬è¯­æ³•</a></li>
<li><a href="#163-%E5%90%84%E4%B8%AA%E8%AF%AD%E6%B3%95%E7%9A%84%E7%94%A8%E6%B3%95%E5%AE%9E%E4%BE%8B">16.3 å„ä¸ªè¯­æ³•çš„ç”¨æ³•å®ä¾‹</a></li>
<li><a href="#164-%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98">16.4 ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</a></li>
<li><a href="#165-%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F%E5%8C%BA%E5%88%AB">16.5 çº¿ç¨‹å’ŒååŒç¨‹åºåŒºåˆ«</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%B8%83-%E6%96%87%E4%BB%B6io">åä¸ƒ æ–‡ä»¶I/O</a>
<ul>
<li><a href="#171-%E6%A6%82%E8%BF%B0%E5%8F%8A%E7%94%A8%E6%B3%95">17.1 æ¦‚è¿°åŠç”¨æ³•</a></li>
<li><a href="#172-%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8Fio%E8%B0%83%E7%94%A8">17.2 ç®€å•æ¨¡å¼ï¼ˆio.è°ƒç”¨ï¼‰</a></li>
<li><a href="#173-%E5%AE%8C%E5%85%A8%E6%A8%A1%E5%BC%8Ffile%E8%B0%83%E7%94%A8">17.3 å®Œå…¨æ¨¡å¼ï¼ˆfile:è°ƒç”¨ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E5%85%AB-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">åå…« é”™è¯¯å¤„ç†</a>
<ul>
<li><a href="#181-%E6%A6%82%E8%BF%B0">18.1 æ¦‚è¿°</a></li>
<li><a href="#182-%E8%AF%AD%E6%B3%95%E9%94%99%E8%AF%AF">18.2 è¯­æ³•é”™è¯¯</a></li>
<li><a href="#183-%E8%BF%90%E8%A1%8C%E9%94%99%E8%AF%AF">18.3 è¿è¡Œé”™è¯¯</a></li>
<li><a href="#184-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">18.4 é”™è¯¯å¤„ç†</a></li>
<li><a href="#185-pcall-%E5%92%8C-xpcalldebug">18.5 pcall å’Œ xpcallã€debug</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%B9%9D-%E8%B0%83%E8%AF%95debug">åä¹ è°ƒè¯•(Debug)</a>
<ul>
<li><a href="#191-%E6%A6%82%E8%BF%B0%E5%8F%8Adebug%E7%9A%84%E6%96%B9%E6%B3%95">19.1 æ¦‚è¿°åŠDebugçš„æ–¹æ³•</a></li>
<li><a href="#192-%E8%B0%83%E8%AF%95%E7%B1%BB%E5%9E%8B">19.2 è°ƒè¯•ç±»å‹</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%8D%81-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6">äºŒå åƒåœ¾å›æ”¶</a>
<ul>
<li><a href="#201-%E6%A6%82%E8%BF%B0">20.1 æ¦‚è¿°</a></li>
<li><a href="#202-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E5%87%BD%E6%95%B0">20.2 åƒåœ¾å›æ”¶å™¨å‡½æ•°</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%8D%81%E4%B8%80-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1">äºŒåä¸€ é¢å‘å¯¹è±¡ï¼ˆâ­ï¼‰</a>
<ul>
<li><a href="#211-%E6%A6%82%E8%BF%B0">21.1 æ¦‚è¿°</a></li>
<li><a href="#212-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%89%B9%E5%BE%81">21.2 é¢å‘å¯¹è±¡ç‰¹å¾</a></li>
<li><a href="#213-lua-%E4%B8%AD%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1">21.3 Lua ä¸­é¢å‘å¯¹è±¡</a></li>
<li><a href="#214-%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B">21.4 ç®€å•å®ä¾‹ï¼ˆâ­ï¼‰</a></li>
<li><a href="#215-%E7%82%B9%E8%B0%83%E7%94%A8%E5%92%8C%E5%86%92%E5%8F%B7%E8%B0%83%E7%94%A8%E7%9A%84%E5%8C%BA%E5%88%AB">21.5 ç‚¹è°ƒç”¨å’Œå†’å·è°ƒç”¨çš„åŒºåˆ«ï¼ˆâ­â­â­ï¼‰</a></li>
<li><a href="#216-lua-%E7%BB%A7%E6%89%BF">21.6 Lua ç»§æ‰¿(â­â­â­)</a></li>
<li><a href="#217-lua%E5%A4%9A%E6%80%81%E5%87%BD%E6%95%B0%E9%87%8D%E5%86%99">21.7 Luaå¤šæ€ï¼ˆå‡½æ•°é‡å†™ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%8D%81%E4%BA%8C-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AEluasql">äºŒåäºŒ æ•°æ®åº“è®¿é—®ï¼ˆLuaSQLï¼‰</a>
<ul>
<li><a href="#221-%E6%A6%82%E8%BF%B0">22.1 æ¦‚è¿°</a></li>
<li><a href="#222-%E5%AE%89%E8%A3%85">22.2 å®‰è£…</a></li>
<li><a href="#223-%E5%AE%9E%E4%BE%8B">22.3 å®ä¾‹</a></li>
</ul>
</li>
</ul>
<h1 id="%E9%9B%B6-%E5%BC%95%E7%94%A8" tabindex="-1">é›¶ å¼•ç”¨</h1>
<p>æœ¬æ–‡ä»¶å†…å®¹æ¥è‡ªä»¥ä¸‹ç½‘å€ï¼š</p>
<ol>
<li><a href="https://www.runoob.com/lua/lua-tutorial.html">Lua æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹ (runoob.com)</a></li>
<li><a href="https://www.runoob.com/manual/lua53doc/contents.html">Lua 5.3 ä¸­æ–‡å‚è€ƒæ‰‹å†Œ(èœé¸Ÿæ•™ç¨‹ç¿»è¯‘)</a></li>
<li><a href="https://blog.csdn.net/duanxuyun/article/details/4751118">lua çš„ioæ“ä½œï¼Œéå¸¸è¯¦ç»†ã€‚</a></li>
</ol>
<h1 id="%E4%B8%80-%E6%A6%82%E8%BF%B0" tabindex="-1">ä¸€ æ¦‚è¿°</h1>
<ol>
<li>Lua æ˜¯ä¸€ç§è½»é‡å°å·§çš„è„šæœ¬è¯­è¨€ï¼Œç”¨æ ‡å‡†Cè¯­è¨€ç¼–å†™å¹¶ä»¥æºä»£ç å½¢å¼å¼€æ”¾ï¼Œ å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚<br>
Lua æ˜¯å·´è¥¿é‡Œçº¦çƒ­å†…å¢å¤©ä¸»æ•™å¤§å­¦ï¼ˆPontifical Catholic University of Rio de Janeiroï¼‰é‡Œçš„ä¸€ä¸ªç ”ç©¶å°ç»„äº 1993 å¹´å¼€å‘çš„ï¼Œè¯¥å°ç»„æˆå‘˜æœ‰ï¼šRoberto Ierusalimschyã€Waldemar Celes å’Œ Luiz Henrique de Figueiredoã€‚</li>
<li>è®¾è®¡ç›®çš„<br>
å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚</li>
<li>ç‰¹æ€§</li>
</ol>
<ul>
<li>è½»é‡çº§: å®ƒç”¨æ ‡å‡†Cè¯­è¨€ç¼–å†™å¹¶ä»¥æºä»£ç å½¢å¼å¼€æ”¾ï¼Œç¼–è¯‘åä»…ä»…ä¸€ç™¾ä½™Kï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åµŒå…¥åˆ«çš„ç¨‹åºé‡Œã€‚</li>
<li>å¯æ‰©å±•: Luaæä¾›äº†éå¸¸æ˜“äºä½¿ç”¨çš„æ‰©å±•æ¥å£å’Œæœºåˆ¶ï¼šç”±å®¿ä¸»è¯­è¨€(é€šå¸¸æ˜¯Cæˆ–C++)æä¾›è¿™äº›åŠŸèƒ½ï¼ŒLuaå¯ä»¥ä½¿ç”¨å®ƒä»¬ï¼Œå°±åƒæ˜¯æœ¬æ¥å°±å†…ç½®çš„åŠŸèƒ½ä¸€æ ·ã€‚</li>
<li>å…¶å®ƒç‰¹æ€§:</li>
<li>
<ul>
<li>æ”¯æŒé¢å‘è¿‡ç¨‹(procedure-oriented)ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹(functional programming)ï¼›</li>
<li>è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼›åªæä¾›äº†ä¸€ç§é€šç”¨ç±»å‹çš„è¡¨ï¼ˆtableï¼‰ï¼Œç”¨å®ƒå¯ä»¥å®ç°æ•°ç»„ï¼Œå“ˆå¸Œè¡¨ï¼Œé›†åˆï¼Œå¯¹è±¡ï¼›</li>
<li>è¯­è¨€å†…ç½®æ¨¡å¼åŒ¹é…ï¼›é—­åŒ…(closure)ï¼›å‡½æ•°ä¹Ÿå¯ä»¥çœ‹åšä¸€ä¸ªå€¼ï¼›æä¾›å¤šçº¿ç¨‹ï¼ˆååŒè¿›ç¨‹ï¼Œå¹¶éæ“ä½œç³»ç»Ÿæ‰€æ”¯æŒçš„çº¿ç¨‹ï¼‰æ”¯æŒï¼›</li>
<li>é€šè¿‡é—­åŒ…å’Œtableå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹æ‰€éœ€è¦çš„ä¸€äº›å…³é”®æœºåˆ¶ï¼Œæ¯”å¦‚æ•°æ®æŠ½è±¡ï¼Œè™šå‡½æ•°ï¼Œç»§æ‰¿å’Œé‡è½½ç­‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="4">
<li>åº”ç”¨åœºæ™¯
<ul>
<li>æ¸¸æˆå¼€å‘</li>
<li>ç‹¬ç«‹åº”ç”¨è„šæœ¬</li>
<li>Web åº”ç”¨è„šæœ¬</li>
<li>æ‰©å±•å’Œæ•°æ®åº“æ’ä»¶å¦‚ï¼šMySQL Proxy å’Œ MySQL WorkBenchå®‰å…¨ç³»ç»Ÿï¼Œå¦‚å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ</li>
</ul>
</li>
</ol>
<h1 id="%E4%BA%8C-%E5%AE%89%E8%A3%85" tabindex="-1">äºŒ å®‰è£…</h1>
<p>é¦–å…ˆå®‰è£…Lua for Windows(exeåŒ…)ï¼š <a href="https://github.com/rjpcomputing/luaforwindows/releases">Releases Â· rjpcomputing/luaforwindows (github.com)</a><br>
<img src="/2024/08/20/lua-lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%AE%89%E8%A3%85%E6%88%AA%E5%9B%BE.jpg" alt><br>
ä½¿ç”¨IDEï¼šVSCodeã€IDEAã€LuaStudioã€‚è¿™é‡Œæˆ‘ä½¿ç”¨VSCodeè¿›è¡Œå¼€å‘é…ç½®ï¼Œç›¸å…³é…ç½®å†…å®¹ï¼ˆè¯¥å†…å®¹æˆ‘ä»¬å¿½ç•¥ 4. Lua ç¼–è¯‘ç¯å¢ƒé…ç½®ä¸­çš„1-6ï¼Œå› ä¸ºæˆ‘ä»¬ä¸‹è½½çš„exeå®‰è£…ç›´æ¥å¸®æˆ‘ä»¬é…ç½®å¥½äº†ç¯å¢ƒå˜é‡äº†ï¼‰ï¼š <a href="https://blog.csdn.net/yanwennian/article/details/103480938">(3æ¡æ¶ˆæ¯) Visual Studio Code -&gt; VSCode å¼€å‘ç¯å¢ƒæ­å»º ---- Lua å¼€å‘ç¯å¢ƒæ­å»º åŠ ä»£ç è¿è¡Œï¼ˆcode runner æ’ä»¶ï¼‰_vscodeå®‰è£…lua_YanWenniançš„åšå®¢-CSDNåšå®¢</a></p>
<h1 id="%E4%B8%89-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95" tabindex="-1">ä¸‰ åŸºæœ¬è¯­æ³•</h1>
<h3 id="3.1-%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%BC%96%E7%A8%8B" tabindex="-1">3.1 äº¤äº’å¼ç¼–ç¨‹</h3>
<p>ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ç¨‹åºå¹¶ç«‹å³æŸ¥çœ‹æ•ˆæœï¼Œé€šè¿‡lua -iæˆ–luaæ¥å¯ç”¨</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">$ lua -i </span><br><span class="line">$ Lua <span class="number">5.3</span><span class="number">.0</span>  Copyright (C) <span class="number">1994</span><span class="number">-2015</span> Lua.org, PUC-Rio</span><br><span class="line">&gt; </span><br><span class="line"><span class="comment">-- æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;Hello Worldï¼&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="3.2-%E8%84%9A%E6%9C%AC%E5%BC%8F%E7%BC%96%E7%A8%8B" tabindex="-1">3.2 è„šæœ¬å¼ç¼–ç¨‹</h3>
<ol>
<li>å°†ä»£ç å­˜å‚¨åœ¨æœ¬åœ°ä»¥.luaä¸ºæ‰©å±•åçš„æ–‡ä»¶ä¸­ï¼ˆ hello.lua ï¼‰ï¼Œå…¶ä¸­å†…å®¹ä¸ºï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;www.runoob.com&quot;</span>)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åœ¨æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»ˆç«¯(æˆ–cmd)æ‰§è¡Œè„šæœ¬</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">$ lua hello.lua</span><br><span class="line">Hello Worldï¼</span><br><span class="line">www.runoob.com</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä»£ç ä¿®æ”¹ä¸ºå¦‚ä¸‹å½¢å¼æ¥æ‰§è¡Œè„šæœ¬ï¼ˆåœ¨å¼€å¤´æ·»åŠ ï¼š#!/usr/local/bin/luaï¼‰ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">#!/usr/<span class="keyword">local</span>/bin/lua</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;www.runoob.com&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº† Lua çš„è§£é‡Šå™¨ /usr/local/bin å°±æ˜¯æŒ‡ä½ æœ¬åœ°luaçš„ä½ç½®ã€‚windowå®‰è£…åçš„luaå¯èƒ½ä¸å¤ªéœ€è¦ï¼Œä½†åœ¨linuxä¸‹éœ€è¦åœ¨å¤´éƒ¨æ·»åŠ #!/usr/local/bin/luaã€‚</p>
<h3 id="3.3-%E6%B3%A8%E9%87%8A" tabindex="-1">3.3 æ³¨é‡Š</h3>
<ol>
<li>å•è¡Œæ³¨é‡Š<br>
ä¸¤ä¸ªå‡å·</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å¤šè¡Œæ³¨é‡Š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment"> å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="comment"> å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="comment"> --]]</span></span><br></pre></td></tr></table></figure>
<h3 id="3.4-%E6%A0%87%E8%AF%86%E7%AC%A6" tabindex="-1">3.4 æ ‡è¯†ç¬¦</h3>
<ol>
<li>ä»¥å­—æ¯æˆ–ä¸‹åˆ’çº¿å¼€å¤´ + 0ä¸ªæˆ–è€…å¤šä¸ªå­—æ¯ã€ä¸‹åˆ’çº¿ã€æ•°å­—</li>
<li>æœ€å¥½ä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿åŠ å¤§å†™å­—æ¯çš„æ ‡ç¤ºç¬¦ï¼Œå› ä¸ºLuaçš„ä¿ç•™å­—ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚</li>
<li>Lua ä¸å…è®¸ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦å¦‚ @, $, å’Œ % æ¥å®šä¹‰æ ‡ç¤ºç¬¦</li>
<li>Lua åŒºåˆ†å¤§å°å†™ã€‚</li>
<li>ä¸€äº›æ­£ç¡®çš„å®šä¹‰</li>
</ol>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">mohd         zara      abc     move<span class="emphasis">_name    a_</span>123</span><br><span class="line">myname50     <span class="emphasis">_temp     j       a23b9        retVal</span></span><br></pre></td></tr></table></figure>
<ol start="6">
<li>å…³é”®å­—</li>
</ol>
<p><img src="/2024/08/20/lua-lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%85%B3%E9%94%AE%E5%AD%97.png" alt="å…³é”®å­—"><br>
ä¸€èˆ¬çº¦å®šï¼Œä»¥ä¸‹åˆ’çº¿å¼€å¤´è¿æ¥ä¸€ä¸²å¤§å†™å­—æ¯çš„åå­—ï¼ˆæ¯”å¦‚ _VERSIONï¼‰è¢«ä¿ç•™ç”¨äº Lua å†…éƒ¨å…¨å±€å˜é‡ã€‚</p>
<h1 id="%E5%9B%9B-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" tabindex="-1">å›› æ•°æ®ç±»å‹</h1>
<table>
<thead>
<tr>
<th>æ•°æ®ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>nil</td>
<td>è¿™ä¸ªæœ€ç®€å•ï¼Œåªæœ‰å€¼nilå±äºè¯¥ç±»ï¼Œ<strong>è¡¨ç¤ºä¸€ä¸ªæ— æ•ˆå€¼</strong>ï¼ˆåœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ç›¸å½“äºfalseï¼‰ã€‚</td>
</tr>
<tr>
<td>boolean</td>
<td>åŒ…å«ä¸¤ä¸ªå€¼ï¼šfalseå’Œtrueã€‚</td>
</tr>
<tr>
<td>number</td>
<td>è¡¨ç¤ºåŒç²¾åº¦ç±»å‹çš„<strong>å®æµ®ç‚¹æ•°</strong></td>
</tr>
<tr>
<td>string</td>
<td>å­—ç¬¦ä¸²ç”±ä¸€å¯¹<strong>åŒå¼•å·æˆ–å•å¼•å·</strong>æ¥è¡¨ç¤º</td>
</tr>
<tr>
<td>function</td>
<td>ç”± C æˆ– Lua ç¼–å†™çš„<strong>å‡½æ•°</strong></td>
</tr>
<tr>
<td>userdata</td>
<td>è¡¨ç¤ºä»»æ„å­˜å‚¨åœ¨å˜é‡ä¸­çš„<strong>Cæ•°æ®ç»“æ„</strong></td>
</tr>
<tr>
<td>thread</td>
<td>è¡¨ç¤ºæ‰§è¡Œçš„<strong>ç‹¬ç«‹çº¿è·¯</strong>ï¼Œç”¨äºæ‰§è¡Œ<strong>ååŒç¨‹åº</strong></td>
</tr>
<tr>
<td>table</td>
<td>Lua ä¸­çš„è¡¨ï¼ˆtableï¼‰å…¶å®æ˜¯ä¸€ä¸ª&quot;<strong>å…³è”æ•°ç»„</strong>&quot;ï¼ˆassociative arraysï¼‰ï¼Œæ•°ç»„çš„<strong>ç´¢å¼•</strong>å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è¡¨ç±»å‹ã€‚åœ¨ Lua é‡Œï¼Œtable çš„åˆ›å»ºæ˜¯é€šè¿‡&quot;<strong>æ„é€ è¡¨è¾¾å¼</strong>&quot;æ¥å®Œæˆï¼Œ<strong>æœ€ç®€å•æ„é€ è¡¨è¾¾å¼æ˜¯{}</strong>ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ª<strong>ç©ºè¡¨</strong>ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="4.1-nil(%E7%A9%BA)" tabindex="-1">4.1 nil(ç©º)</h3>
<ol>
<li>ç»™<strong>å…¨å±€</strong>å˜é‡æˆ–è€… <strong>table è¡¨</strong>é‡Œçš„å˜é‡<strong>èµ‹ä¸€ä¸ª nil</strong> å€¼ï¼Œç­‰åŒäºæŠŠå®ƒä»¬<strong>åˆ æ‰</strong></li>
<li>nil ä½œæ¯”è¾ƒæ—¶åº”è¯¥åŠ ä¸ŠåŒå¼•å· &quot;ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">type</span>(X)</span><br><span class="line"><span class="literal">nil</span></span><br><span class="line">&gt; <span class="built_in">type</span>(X)==<span class="literal">nil</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line">&gt; <span class="built_in">type</span>(X)==<span class="string">&quot;nil&quot;</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="comment">--- å› æ˜¯ type(X) å®è´¨æ˜¯è¿”å›çš„ &quot;nil&quot; å­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ª string ç±»å‹ï¼š</span></span><br><span class="line"><span class="comment">--- type(type(X))==string</span></span><br></pre></td></tr></table></figure>
<h3 id="4.2-boolean%EF%BC%88%E5%B8%83%E5%B0%94%EF%BC%89" tabindex="-1">4.2 booleanï¼ˆå¸ƒå°”ï¼‰</h3>
<p>boolean ç±»å‹åªæœ‰ä¸¤ä¸ªå¯é€‰å€¼ï¼štrueï¼ˆçœŸï¼‰ å’Œ falseï¼ˆå‡ï¼‰ï¼Œ<strong>Lua æŠŠ false å’Œ nil çœ‹ä½œæ˜¯ falseï¼Œå…¶ä»–çš„éƒ½ä¸º trueï¼Œ<font color="red">æ•°å­— 0 ä¹Ÿæ˜¯ true</font></strong></p>
<h3 id="4.3-number%EF%BC%88%E6%95%B0%E5%AD%97%EF%BC%89" tabindex="-1">4.3 numberï¼ˆæ•°å­—ï¼‰</h3>
<p>Lua é»˜è®¤åªæœ‰ä¸€ç§ number ç±»å‹ â€“ doubleï¼ˆåŒç²¾åº¦ï¼‰ç±»å‹ <strong>ï¼ˆé»˜è®¤ç±»å‹å¯ä»¥ä¿®æ”¹ luaconf.h é‡Œçš„å®šä¹‰ï¼‰</strong></p>
<h3 id="4.4-string%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89" tabindex="-1">4.4 stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h3>
<ol>
<li>å­—ç¬¦ä¸²ç”±ä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·æ¥è¡¨ç¤º</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">string1 = <span class="string">&quot;this is string1&quot;</span></span><br><span class="line">string2 = <span class="string">&#x27;this is string2&#x27;</span></span><br><span class="line"></span><br><span class="line">html = <span class="string">[[</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;http://www.runoob.com/&quot;&gt;èœé¸Ÿæ•™ç¨‹&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"><span class="built_in">print</span>(html)</span><br></pre></td></tr></table></figure>
<ol>
<li>åœ¨å¯¹ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ä¸Šè¿›è¡Œç®—æœ¯æ“ä½œæ—¶ï¼ŒLua ä¼šå°è¯•å°†è¿™ä¸ªæ•°å­—å­—ç¬¦ä¸²è½¬æˆä¸€ä¸ªæ•°å­—:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;2&quot;</span> + <span class="number">6</span>)</span><br><span class="line"><span class="number">8.0</span></span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;2&quot;</span> + <span class="string">&quot;6&quot;</span>)</span><br><span class="line"><span class="number">8.0</span></span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;2 + 6&quot;</span>)</span><br><span class="line"><span class="number">2</span> + <span class="number">6</span></span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;-2e2&quot;</span> * <span class="string">&quot;6&quot;</span>)</span><br><span class="line"><span class="number">-1200.0</span></span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;error&quot;</span> + <span class="number">1</span>)</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>: attempt to perform arithmetic on a <span class="built_in">string</span> value</span><br><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line">        <span class="built_in">stdin</span>:<span class="number">1</span>: <span class="keyword">in</span> main chunk</span><br><span class="line">        [C]: <span class="keyword">in</span> ?</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>è¿æ¥å­—ç¬¦ä¸²ä½¿ç”¨ â€¦</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="string">&quot;a&quot;</span> .. <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">ab</span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="number">157</span> .. <span class="number">428</span>)</span><br><span class="line"><span class="number">157428</span></span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure>
<ol>
<li>ä½¿ç”¨#æ¥è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">len</span> = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">&gt; <span class="built_in">print</span>(#<span class="built_in">len</span>)</span><br><span class="line"><span class="number">14</span></span><br><span class="line">&gt; <span class="built_in">print</span>(#<span class="string">&quot;www.runoob.com&quot;</span>)</span><br><span class="line"><span class="number">14</span></span><br></pre></td></tr></table></figure>
<h3 id="4.5-%E8%A1%A8" tabindex="-1">4.5 è¡¨</h3>
<p>åœ¨ Lua é‡Œï¼Œtable çš„åˆ›å»ºæ˜¯é€šè¿‡&quot;æ„é€ è¡¨è¾¾å¼&quot;æ¥å®Œæˆï¼Œæœ€ç®€å•æ„é€ è¡¨è¾¾å¼æ˜¯{}ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºè¡¨ã€‚</p>
<ol>
<li>ç›´æ¥åˆå§‹åŒ–è¡¨:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªç©ºçš„ table</span></span><br><span class="line"><span class="keyword">local</span> tbl1 = &#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- ç›´æ¥åˆå§‹è¡¨</span></span><br><span class="line"><span class="keyword">local</span> tbl2 = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;grape&quot;</span>&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Lua ä¸­çš„è¡¨ï¼ˆtableï¼‰å…¶å®æ˜¯ä¸€ä¸ª&quot;å…³è”æ•°ç»„&quot;ï¼ˆassociative arraysï¼‰ï¼Œæ•°ç»„çš„ç´¢å¼•å¯ä»¥æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—ç¬¦ä¸²</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- table_test.lua è„šæœ¬æ–‡ä»¶</span></span><br><span class="line">a = &#123;&#125;</span><br><span class="line">a[<span class="string">&quot;key&quot;</span>] = <span class="string">&quot;value&quot;</span></span><br><span class="line">key = <span class="number">10</span></span><br><span class="line">a[key] = <span class="number">22</span></span><br><span class="line">a[key] = a[key] + <span class="number">11</span></span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(a) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k .. <span class="string">&quot; : &quot;</span> .. v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ä¸åŒäºå…¶ä»–è¯­è¨€çš„æ•°ç»„æŠŠ 0 ä½œä¸ºæ•°ç»„çš„åˆå§‹ç´¢å¼•ï¼Œ<strong>åœ¨ Lua é‡Œè¡¨çš„é»˜è®¤åˆå§‹ç´¢å¼•ä¸€èˆ¬ä»¥ 1 å¼€å§‹</strong>ã€‚</li>
<li>table <strong>ä¸ä¼šå›ºå®šé•¿åº¦å¤§å°</strong>ï¼Œæœ‰<strong>æ–°æ•°æ®æ·»åŠ </strong>æ—¶ table é•¿åº¦ä¼š<strong>è‡ªåŠ¨å¢é•¿</strong>ï¼Œæ²¡<strong>åˆå§‹çš„ table éƒ½æ˜¯ nil</strong></li>
</ol>
<h3 id="4.6-function%EF%BC%88%E5%87%BD%E6%95%B0%EF%BC%89" tabindex="-1">4.6 functionï¼ˆå‡½æ•°ï¼‰</h3>
<ol>
<li>åœ¨ Lua ä¸­ï¼Œå‡½æ•°æ˜¯è¢«çœ‹ä½œæ˜¯&quot;ç¬¬ä¸€ç±»å€¼ï¼ˆFirst-Class Valueï¼‰&quot;ï¼Œå‡½æ•°å¯ä»¥å­˜åœ¨å˜é‡é‡Œ:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- function_test.lua è„šæœ¬æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial1</span><span class="params">(n)</span></span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> n * factorial1(n - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">print</span>(factorial1(<span class="number">5</span>))</span><br><span class="line">factorial2 = factorial1</span><br><span class="line"><span class="built_in">print</span>(factorial2(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>function å¯ä»¥ä»¥åŒ¿åå‡½æ•°ï¼ˆanonymous functionï¼‰çš„æ–¹å¼é€šè¿‡å‚æ•°ä¼ é€’:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- function_test2.lua è„šæœ¬æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span><span class="params">(tab,fun)</span></span></span><br><span class="line">        <span class="keyword">for</span> k ,v <span class="keyword">in</span> <span class="built_in">pairs</span>(tab) <span class="keyword">do</span></span><br><span class="line">                <span class="built_in">print</span>(fun(k,v));</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">tab=&#123;key1=<span class="string">&quot;val1&quot;</span>,key2=<span class="string">&quot;val2&quot;</span>&#125;;</span><br><span class="line">testFun(tab,</span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(key,val)</span></span><span class="comment">--åŒ¿åå‡½æ•°</span></span><br><span class="line">        <span class="keyword">return</span> key..<span class="string">&quot;=&quot;</span>..val;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="4.7-thread%EF%BC%88%E7%BA%BF%E7%A8%8B%EF%BC%89" tabindex="-1">4.7 threadï¼ˆçº¿ç¨‹ï¼‰</h3>
<p>åœ¨ Lua é‡Œï¼Œæœ€ä¸»è¦çš„çº¿ç¨‹æ˜¯ååŒç¨‹åºï¼ˆcoroutineï¼‰ã€‚å®ƒè·Ÿçº¿ç¨‹ï¼ˆthreadï¼‰å·®ä¸å¤šï¼Œ<strong>æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆã€å±€éƒ¨å˜é‡å’ŒæŒ‡ä»¤æŒ‡é’ˆï¼Œå¯ä»¥è·Ÿå…¶ä»–ååŒç¨‹åºå…±äº«å…¨å±€å˜é‡å’Œå…¶ä»–å¤§éƒ¨åˆ†ä¸œè¥¿</strong>ã€‚</p>
<p>çº¿ç¨‹è·Ÿåç¨‹çš„åŒºåˆ«ï¼š<strong>çº¿ç¨‹å¯ä»¥åŒæ—¶å¤šä¸ªè¿è¡Œï¼Œè€Œåç¨‹ä»»æ„æ—¶åˆ»åªèƒ½è¿è¡Œä¸€ä¸ª</strong>ï¼Œå¹¶ä¸”å¤„äº<strong>è¿è¡ŒçŠ¶æ€çš„åç¨‹åªæœ‰è¢«æŒ‚èµ·ï¼ˆsuspendï¼‰æ—¶æ‰ä¼šæš‚åœ</strong>ã€‚</p>
<h3 id="4.8-userdata%EF%BC%88%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%EF%BC%89" tabindex="-1">4.8 userdataï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰</h3>
<p>userdata æ˜¯ä¸€ç§<strong>ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®</strong>ï¼Œç”¨äºè¡¨ç¤ºä¸€ç§<strong>ç”±åº”ç”¨ç¨‹åºæˆ– C/C++ è¯­è¨€åº“æ‰€åˆ›å»ºçš„ç±»å‹</strong>ï¼Œå¯ä»¥å°†ä»»æ„ C/C++ çš„ä»»æ„æ•°æ®ç±»å‹çš„æ•°æ®ï¼ˆé€šå¸¸æ˜¯ struct å’Œ æŒ‡é’ˆï¼‰<strong>å­˜å‚¨åˆ° Lua å˜é‡ä¸­è°ƒç”¨</strong>ã€‚</p>
<h1 id="%E4%BA%94-%E5%8F%98%E9%87%8F" tabindex="-1">äº” å˜é‡</h1>
<h3 id="5.1-%E5%8F%98%E9%87%8F" tabindex="-1">5.1 å˜é‡</h3>
<ol>
<li>å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œéœ€è¦åœ¨ä»£ç ä¸­è¿›è¡Œå£°æ˜ï¼Œå³åˆ›å»ºè¯¥å˜é‡ã€‚</li>
<li>Lua å˜é‡æœ‰ä¸‰ç§ç±»å‹ï¼šå…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ã€è¡¨ä¸­çš„åŸŸã€‚
<ul>
<li>Lua ä¸­çš„<strong>å˜é‡å…¨æ˜¯å…¨å±€å˜é‡</strong>ï¼Œå“ªæ€•æ˜¯è¯­å¥å—æˆ–æ˜¯å‡½æ•°é‡Œï¼Œé™¤é<strong>ç”¨ local æ˜¾å¼å£°æ˜ä¸ºå±€éƒ¨å˜é‡</strong>ã€‚</li>
<li><strong>å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸ</strong>ä¸ºä»å£°æ˜ä½ç½®å¼€å§‹åˆ°æ‰€åœ¨è¯­å¥å—ç»“æŸã€‚</li>
</ul>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- test.lua æ–‡ä»¶è„šæœ¬</span></span><br><span class="line">a = <span class="number">5</span>               <span class="comment">-- å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">local</span> b = <span class="number">5</span>         <span class="comment">-- å±€éƒ¨å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">joke</span><span class="params">()</span></span></span><br><span class="line">    c = <span class="number">5</span>           <span class="comment">-- å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="keyword">local</span> d = <span class="number">6</span>     <span class="comment">-- å±€éƒ¨å˜é‡</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">joke()</span><br><span class="line"><span class="built_in">print</span>(c,d)          <span class="comment">--&gt; 5 nil</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">    <span class="keyword">local</span> a = <span class="number">6</span>     <span class="comment">-- å±€éƒ¨å˜é‡</span></span><br><span class="line">    b = <span class="number">6</span>           <span class="comment">-- å¯¹å±€éƒ¨å˜é‡é‡æ–°èµ‹å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(a,b);     <span class="comment">--&gt; 6 6</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a,b)      <span class="comment">--&gt; 5 6</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å˜é‡çš„é»˜è®¤å€¼å‡ä¸º nil</li>
</ol>
<h3 id="5.2-%E8%B5%8B%E5%80%BC%E8%AF%AD%E5%8F%A5" tabindex="-1">5.2 èµ‹å€¼è¯­å¥</h3>
<ol>
<li>èµ‹å€¼æ˜¯æ”¹å˜ä¸€ä¸ªå˜é‡çš„å€¼å’Œæ”¹å˜è¡¨åŸŸçš„æœ€åŸºæœ¬çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a = <span class="string">&quot;hello&quot;</span> .. <span class="string">&quot;world&quot;</span></span><br><span class="line">t.n = t.n + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Lua å¯ä»¥å¯¹<strong>å¤šä¸ªå˜é‡åŒæ—¶èµ‹å€¼</strong>ï¼Œå˜é‡åˆ—è¡¨å’Œå€¼åˆ—è¡¨çš„å„ä¸ªå…ƒç´ ç”¨é€—å·åˆ†å¼€ï¼Œ<strong>èµ‹å€¼è¯­å¥å³è¾¹çš„å€¼ä¼šä¾æ¬¡èµ‹ç»™å·¦è¾¹çš„å˜é‡</strong>ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a, b = <span class="number">10</span>, <span class="number">2</span>*x       &lt;<span class="comment">--&gt;       a=10; b=2*x</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>é‡åˆ°èµ‹å€¼è¯­å¥<strong>Luaä¼šå…ˆè®¡ç®—å³è¾¹æ‰€æœ‰çš„å€¼ç„¶åå†æ‰§è¡Œèµ‹å€¼æ“ä½œ</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥<strong>è¿™æ ·è¿›è¡Œäº¤æ¢å˜é‡çš„å€¼ï¼š</strong>(â­)</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">x, y = y, x                     <span class="comment">-- swap &#x27;x&#x27; for &#x27;y&#x27;</span></span><br><span class="line">a[i], a[j] = a[j], a[i]         <span class="comment">-- swap &#x27;a[i]&#x27; for &#x27;a[j]&#x27;</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å½“å˜é‡ä¸ªæ•°å’Œå€¼çš„ä¸ªæ•°ä¸ä¸€è‡´æ—¶ï¼ŒLuaä¼šä¸€ç›´ä»¥å˜é‡ä¸ªæ•°ä¸ºåŸºç¡€é‡‡å–ä»¥ä¸‹ç­–ç•¥ï¼š
<ul>
<li>a. å˜é‡ä¸ªæ•° &gt; å€¼çš„ä¸ªæ•°             æŒ‰å˜é‡ä¸ªæ•°è¡¥è¶³nil</li>
<li>b. å˜é‡ä¸ªæ•° &lt; å€¼çš„ä¸ªæ•°             å¤šä½™çš„å€¼ä¼šè¢«å¿½ç•¥</li>
</ul>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a, b, c = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(a,b,c)             <span class="comment">--&gt; 0   1   nil</span></span><br><span class="line"> </span><br><span class="line">a, b = a+<span class="number">1</span>, b+<span class="number">1</span>, b+<span class="number">2</span>     <span class="comment">-- value of b+2 is ignored</span></span><br><span class="line"><span class="built_in">print</span>(a,b)               <span class="comment">--&gt; 1   2</span></span><br><span class="line"> </span><br><span class="line">a, b, c = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(a,b,c)             <span class="comment">--&gt; 0   nil   nil</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li><strong>åº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</strong>
<ul>
<li><strong>é¿å…å‘½åå†²çª</strong>ã€‚</li>
<li>è®¿é—®å±€éƒ¨å˜é‡çš„<strong>é€Ÿåº¦</strong>æ¯”å…¨å±€å˜é‡<strong>æ›´å¿«</strong>ã€‚</li>
</ul>
</li>
</ol>
<h3 id="5.3-%E7%B4%A2%E5%BC%95" tabindex="-1">5.3 ç´¢å¼•</h3>
<ol>
<li>å¯¹ table çš„ç´¢å¼•ä½¿ç”¨æ–¹æ‹¬å· []ã€‚Lua ä¹Ÿæä¾›äº† <strong>. æ“ä½œ</strong>ã€‚</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">t[i]</span><br><span class="line">t.i                 -- å½“ç´¢å¼•ä¸ºå­—ç¬¦ä¸²ç±»å‹æ—¶çš„ä¸€ç§ç®€åŒ–å†™æ³•</span><br><span class="line">gettable<span class="emphasis">_event(t,i) -- é‡‡ç”¨ç´¢å¼•è®¿é—®æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„å‡½æ•°è°ƒç”¨</span></span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; site = &#123;&#125;</span><br><span class="line">&gt; site[<span class="string">&quot;key&quot;</span>] = <span class="string">&quot;www.runoob.com&quot;</span></span><br><span class="line">&gt; <span class="built_in">print</span>(site[<span class="string">&quot;key&quot;</span>])</span><br><span class="line">www.runoob.com</span><br><span class="line">&gt; <span class="built_in">print</span>(site.key)</span><br><span class="line">www.runoob.com</span><br></pre></td></tr></table></figure>
<h1 id="%E5%85%AD-%E5%BE%AA%E7%8E%AF" tabindex="-1">å…­ å¾ªç¯</h1>
<h3 id="6.1-%E5%BE%AA%E7%8E%AF%E6%96%B9%E5%BC%8F" tabindex="-1">6.1 å¾ªç¯æ–¹å¼</h3>
<ol>
<li>Lua è¯­è¨€æä¾›äº†ä»¥ä¸‹å‡ ç§å¾ªç¯å¤„ç†æ–¹å¼ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th>å¾ªç¯ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>while å¾ªç¯</td>
<td>åœ¨æ¡ä»¶ä¸º true æ—¶ï¼Œè®©ç¨‹åºé‡å¤åœ°æ‰§è¡ŒæŸäº›è¯­å¥ã€‚æ‰§è¡Œè¯­å¥å‰ä¼šå…ˆæ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸º trueã€‚</td>
</tr>
<tr>
<td>for å¾ªç¯</td>
<td>é‡å¤æ‰§è¡ŒæŒ‡å®šè¯­å¥ï¼Œé‡å¤æ¬¡æ•°å¯åœ¨ for è¯­å¥ä¸­æ§åˆ¶ã€‚</td>
</tr>
<tr>
<td>repeatâ€¦until</td>
<td>é‡å¤æ‰§è¡Œå¾ªç¯ï¼Œç›´åˆ° æŒ‡å®šçš„æ¡ä»¶ä¸ºçœŸæ—¶ä¸ºæ­¢</td>
</tr>
<tr>
<td>å¾ªç¯åµŒå¥—</td>
<td>å¯ä»¥åœ¨å¾ªç¯å†…åµŒå¥—ä¸€ä¸ªæˆ–å¤šä¸ªå¾ªç¯è¯­å¥ï¼ˆwhile do â€¦ end;for â€¦ do â€¦ end;repeat â€¦ until;ï¼‰</td>
</tr>
</tbody>
</table>
<h3 id="6.2-%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5" tabindex="-1">6.2 å¾ªç¯æ§åˆ¶è¯­å¥</h3>
<ol>
<li>Lua æ”¯æŒä»¥ä¸‹å¾ªç¯æ§åˆ¶è¯­å¥ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th>æ§åˆ¶è¯­å¥</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>break è¯­å¥</td>
<td>é€€å‡ºå½“å‰å¾ªç¯æˆ–è¯­å¥ï¼Œå¹¶å¼€å§‹è„šæœ¬æ‰§è¡Œç´§æ¥ç€çš„è¯­å¥ã€‚</td>
</tr>
<tr>
<td>goto è¯­å¥</td>
<td>å°†ç¨‹åºçš„æ§åˆ¶ç‚¹è½¬ç§»åˆ°ä¸€ä¸ªæ ‡ç­¾å¤„ã€‚</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>
<p>Luaä¸æ”¯æŒcontinueï¼Œä½†å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼å®ç°continueåŠŸèƒ½ï¼š</p>
<ul>
<li>ä½¿ç”¨repeat untilå®ç°</li>
</ul>
 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">10</span>, <span class="number">1</span>, <span class="number">-1</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">5</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;continue code here&quot;</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">print</span>(i, <span class="string">&quot;loop code here&quot;</span>)</span><br><span class="line"><span class="keyword">until</span> <span class="literal">true</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨gotoå®ç°</li>
</ul>
 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>, <span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">if</span> i &lt;= <span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(i, <span class="string">&quot;yes continue&quot;</span>)</span><br><span class="line">        <span class="keyword">goto</span> continue</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="built_in">print</span>(i, <span class="string">&quot; no continue&quot;</span>)</span><br><span class="line">    ::continue::</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">[[i&#x27;m end]]</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨if elseå®ç°</li>
</ul>
 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>, <span class="number">3</span> <span class="keyword">do</span> </span><br><span class="line">    <span class="built_in">print</span>(i)   </span><br><span class="line">    <span class="keyword">if</span> i &lt;= <span class="number">2</span> <span class="keyword">then</span>     </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;continue the loop&quot;</span>)  </span><br><span class="line">    <span class="keyword">else</span>  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot; loop area&quot;</span>)   </span><br><span class="line"><span class="keyword">end</span>   </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;end of loop&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="6.3-%E6%97%A0%E9%99%90%E5%BE%AA%E7%8E%AF" tabindex="-1">6.3 æ— é™å¾ªç¯</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>( <span class="literal">true</span> )</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;å¾ªç¯å°†æ°¸è¿œæ‰§è¡Œä¸‹å»&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="%E4%B8%83-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6-%EF%BC%88if-else%EF%BC%89" tabindex="-1">ä¸ƒ æµç¨‹æ§åˆ¶ ï¼ˆif elseï¼‰</h1>
<table>
<thead>
<tr>
<th>è¯­å¥</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>if è¯­å¥</td>
<td>if è¯­å¥ ç”±ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä½œä¸ºæ¡ä»¶åˆ¤æ–­ï¼Œå…¶åç´§è·Ÿå…¶ä»–è¯­å¥ç»„æˆã€‚</td>
</tr>
<tr>
<td>ifâ€¦else</td>
<td>è¯­å¥	if è¯­å¥ å¯ä»¥ä¸ else è¯­å¥æ­é…ä½¿ç”¨, åœ¨ if æ¡ä»¶è¡¨è¾¾å¼ä¸º false æ—¶æ‰§è¡Œ else è¯­å¥ä»£ç ã€‚</td>
</tr>
<tr>
<td>if åµŒå¥—è¯­å¥</td>
<td>ä½ å¯ä»¥åœ¨if æˆ– else ifä¸­ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª if æˆ– else if è¯­å¥ ã€‚</td>
</tr>
</tbody>
</table>
<p>æ§åˆ¶ç»“æ„çš„æ¡ä»¶è¡¨è¾¾å¼ç»“æœå¯ä»¥æ˜¯ä»»ä½•å€¼ï¼ŒLuaè®¤ä¸ºfalseå’Œnilä¸ºå‡ï¼Œtrueå’Œénilä¸ºçœŸã€‚</p>
<p><strong>è¦æ³¨æ„çš„æ˜¯Luaä¸­ 0 ä¸º trueï¼š</strong></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[ 0 ä¸º true ]</span></span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;0 ä¸º true&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="%E5%85%AB-%E5%87%BD%E6%95%B0" tabindex="-1">å…« å‡½æ•°</h1>
<h3 id="8.1-%E6%A6%82%E8%BF%B0" tabindex="-1">8.1 æ¦‚è¿°</h3>
<ol>
<li>
<p>åœ¨Luaä¸­ï¼Œå‡½æ•°æ˜¯å¯¹è¯­å¥å’Œè¡¨è¾¾å¼è¿›è¡ŒæŠ½è±¡çš„ä¸»è¦æ–¹æ³•ã€‚æ—¢å¯ä»¥ç”¨æ¥å¤„ç†ä¸€äº›ç‰¹æ®Šçš„å·¥ä½œï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è®¡ç®—ä¸€äº›å€¼ã€‚</p>
</li>
<li>
<p>Lua æä¾›äº†<strong>è®¸å¤šçš„å†…å»ºå‡½æ•°</strong>ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ç¨‹åºä¸­è°ƒç”¨å®ƒä»¬ï¼Œ<strong>å¦‚print()å‡½æ•°</strong>å¯ä»¥å°†ä¼ å…¥çš„å‚æ•°æ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚</p>
</li>
<li>
<p>Lua å‡½æ•°ä¸»è¦æœ‰ä¸¤ç§ç”¨é€”ï¼š</p>
<ul>
<li>å®ŒæˆæŒ‡å®šçš„ä»»åŠ¡ï¼Œè¿™ç§æƒ…å†µä¸‹å‡½æ•°ä½œä¸ºè°ƒç”¨è¯­å¥ä½¿ç”¨ï¼›</li>
<li>è®¡ç®—å¹¶è¿”å›å€¼ï¼Œè¿™ç§æƒ…å†µä¸‹å‡½æ•°ä½œä¸ºèµ‹å€¼è¯­å¥çš„è¡¨è¾¾å¼ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ol>
<h3 id="8.2-%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89" tabindex="-1">8.2 å‡½æ•°çš„å®šä¹‰</h3>
<ol>
<li>
<p>Lua ç¼–ç¨‹è¯­è¨€å‡½æ•°å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š</p>
<p><font color="red">optional_function_scope</font> function <font color="green">function_name</font> ( <font color="blue">argument1, argument2, argument3â€¦, argumentn</font>)<br>
<font color="pink">function_body</font><br>
return <font color="orange">result_params_comma_separated</font><br>
end</p>
</li>
<li>
<p>è§£æ</p>
</li>
</ol>
<ul>
<li>
<p><font color="red">optional_function_scope</font>: è¯¥å‚æ•°æ˜¯å¯é€‰çš„æŒ‡å®šå‡½æ•°æ˜¯å…¨å±€å‡½æ•°è¿˜æ˜¯å±€éƒ¨å‡½æ•°ï¼Œæœªè®¾ç½®è¯¥å‚æ•°é»˜è®¤ä¸ºå…¨å±€å‡½æ•°ï¼Œå¦‚æœä½ éœ€è¦è®¾ç½®å‡½æ•°ä¸ºå±€éƒ¨å‡½æ•°éœ€è¦ä½¿ç”¨å…³é”®å­— localã€‚</p>
</li>
<li>
<p><font color="green">function_name</font>: æŒ‡å®šå‡½æ•°åç§°ã€‚</p>
</li>
<li>
<p><font color="blue">argument1, argument2, argument3â€¦, argumentn</font>: å‡½æ•°å‚æ•°ï¼Œå¤šä¸ªå‚æ•°ä»¥é€—å·éš”å¼€ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ã€‚</p>
</li>
<li>
<p><font color="pink">function_body</font>: å‡½æ•°ä½“ï¼Œå‡½æ•°ä¸­éœ€è¦æ‰§è¡Œçš„ä»£ç è¯­å¥å—ã€‚</p>
</li>
<li>
<p><font color="orange">result_params_comma_separated</font>: å‡½æ•°è¿”å›å€¼ï¼ŒLuaè¯­è¨€å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œæ¯ä¸ªå€¼ä»¥é€—å·éš”å¼€ã€‚</p>
</li>
</ul>
<ol start="3">
<li>
<p>å®ä¾‹</p>
<ul>
<li>å®šä¹‰å‡½æ•° max()ï¼Œå‚æ•°ä¸º num1, num2ï¼Œç”¨äºæ¯”è¾ƒä¸¤å€¼çš„å¤§å°ï¼Œå¹¶è¿”å›æœ€å¤§å€¼</li>
</ul>
 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">--[[ å‡½æ•°è¿”å›ä¸¤ä¸ªå€¼çš„æœ€å¤§å€¼ --]]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">max</span><span class="params">(num1, num2)</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (num1 &gt; num2) <span class="keyword">then</span></span><br><span class="line">    result = num1;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    result = num2;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result; </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- è°ƒç”¨å‡½æ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ä¸¤å€¼æ¯”è¾ƒæœ€å¤§å€¼ä¸º &quot;</span>,<span class="built_in">max</span>(<span class="number">10</span>,<span class="number">4</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ä¸¤å€¼æ¯”è¾ƒæœ€å¤§å€¼ä¸º &quot;</span>,<span class="built_in">max</span>(<span class="number">5</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>Lua ä¸­æˆ‘ä»¬å¯ä»¥å°†<strong>å‡½æ•°ä½œä¸ºå‚æ•°</strong>ä¼ é€’ç»™å‡½æ•°</li>
</ul>
 <figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">myprint = <span class="function"><span class="keyword">function</span><span class="params">(param)</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿™æ˜¯æ‰“å°å‡½æ•° -   ##&quot;</span>,param,<span class="string">&quot;##&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(num1,num2,functionPrint)</span></span></span><br><span class="line">result = num1 + num2</span><br><span class="line"><span class="comment">-- è°ƒç”¨ä¼ é€’çš„å‡½æ•°å‚æ•°</span></span><br><span class="line">functionPrint(result)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">myprint(<span class="number">10</span>)</span><br><span class="line"><span class="comment">-- myprint å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</span></span><br><span class="line">add(<span class="number">2</span>,<span class="number">5</span>,myprint)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="8.3-%E5%A4%9A%E8%BF%94%E5%9B%9E%E5%80%BC" tabindex="-1">8.3 å¤šè¿”å›å€¼</h3>
<ol>
<li>Luaå‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªç»“æœå€¼ï¼Œæ¯”å¦‚string.findï¼Œå…¶è¿”å›åŒ¹é…ä¸²&quot;å¼€å§‹å’Œç»“æŸçš„ä¸‹æ ‡&quot;ï¼ˆå¦‚æœä¸å­˜åœ¨åŒ¹é…ä¸²è¿”å›nilï¼‰ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; s, e = <span class="built_in">string</span>.<span class="built_in">find</span>(<span class="string">&quot;www.runoob.com&quot;</span>, <span class="string">&quot;runoob&quot;</span>) </span><br><span class="line">&gt; <span class="built_in">print</span>(s, e)</span><br><span class="line"><span class="number">5</span>    <span class="number">10</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Luaå‡½æ•°ä¸­ï¼Œåœ¨<strong>returnååˆ—å‡ºè¦è¿”å›çš„å€¼</strong>çš„åˆ—è¡¨å³å¯è¿”å›å¤šå€¼ï¼ˆæ¯”å¦‚ç”¨ï¼Œéš”å¼€ï¼‰</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maximum</span> <span class="params">(a)</span></span></span><br><span class="line">    <span class="keyword">local</span> mi = <span class="number">1</span>             <span class="comment">-- æœ€å¤§å€¼ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">local</span> m = a[mi]          <span class="comment">-- æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i,val <span class="keyword">in</span> <span class="built_in">ipairs</span>(a) <span class="keyword">do</span></span><br><span class="line">       <span class="keyword">if</span> val &gt; m <span class="keyword">then</span></span><br><span class="line">           mi = i</span><br><span class="line">           m = val</span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> m, mi <span class="comment">--å¤šè¿”å›å€¼</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(maximum(&#123;<span class="number">8</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">5</span>&#125;))</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>æ³¨æ„ä¸€ä¸‹å¤šè¿”å›å€¼çš„å‡½æ•°åœ¨èµ‹å€¼æ—¶çš„æƒ…å†µï¼Œ<strong>ä»…ä»…åªæœ‰æ”¾åœ¨æ‰€æœ‰é€—å·ä¹‹åçš„é‚£ä¸ªå‡½æ•°ä¼šæŠŠè¿”å›å€¼å±•å¼€</strong>ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>,<span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> b,c,d,e = add(),add()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(b) <span class="comment">-- 1</span></span><br><span class="line"><span class="built_in">print</span>(c) <span class="comment">-- 1</span></span><br><span class="line"><span class="built_in">print</span>(d) <span class="comment">-- 0</span></span><br><span class="line"><span class="built_in">print</span>(e) <span class="comment">-- nil</span></span><br></pre></td></tr></table></figure>
<h3 id="8.4-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0" tabindex="-1">8.4 å¯å˜å‚æ•°</h3>
<ol>
<li>Lua å‡½æ•°å¯ä»¥æ¥å—å¯å˜æ•°ç›®çš„å‚æ•°ï¼Œå’Œ C è¯­è¨€ç±»ä¼¼ï¼Œåœ¨<strong>å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨ä¸‰ç‚¹ â€¦ è¡¨ç¤º</strong>å‡½æ•°æœ‰å¯å˜çš„å‚æ•°ã€‚ (<strong>å¯å˜å‚æ•°é€šè¿‡å¾ªç¯éå†â€¦è¿›è¡Œè¯»å–</strong>)</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(...)</span></span>  </span><br><span class="line"><span class="keyword">local</span> s = <span class="number">0</span>  </span><br><span class="line">  <span class="keyword">for</span> i, v <span class="keyword">in</span> <span class="built_in">ipairs</span>&#123;...&#125; <span class="keyword">do</span>   <span class="comment">--&gt; &#123;...&#125; è¡¨ç¤ºä¸€ä¸ªç”±æ‰€æœ‰å˜é•¿å‚æ•°æ„æˆçš„æ•°ç»„  </span></span><br><span class="line">    s = s + v  </span><br><span class="line">  <span class="keyword">end</span>  </span><br><span class="line">  <span class="keyword">return</span> s  </span><br><span class="line"><span class="keyword">end</span>  </span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>))  <span class="comment">---&gt;25</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>é€šè¿‡<strong>select(â€œ#â€,â€¦)</strong> æ¥è·å–å¯å˜å‚æ•°çš„æ•°é‡ï¼Œ<strong>é¿å…</strong>å‚æ•°ä¸­å­˜åœ¨ <strong>nilçš„å…ƒç´ </strong>å¯¼è‡´é•¿åº¦è®¡ç®—å‡ºé”™</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">average</span><span class="params">(...)</span></span></span><br><span class="line">   result = <span class="number">0</span></span><br><span class="line">   <span class="keyword">local</span> <span class="built_in">arg</span>=&#123;...&#125;</span><br><span class="line">   <span class="keyword">for</span> i,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(<span class="built_in">arg</span>) <span class="keyword">do</span></span><br><span class="line">      result = result + v</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&quot;æ€»å…±ä¼ å…¥ &quot;</span> .. <span class="built_in">select</span>(<span class="string">&quot;#&quot;</span>,...) .. <span class="string">&quot; ä¸ªæ•°&quot;</span>)</span><br><span class="line">   <span class="keyword">return</span> result/<span class="built_in">select</span>(<span class="string">&quot;#&quot;</span>,...)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å¹³å‡å€¼ä¸º&quot;</span>,average(<span class="number">10</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦<strong>å‡ ä¸ªå›ºå®šå‚æ•°åŠ ä¸Šå¯å˜å‚æ•°</strong>ï¼Œ<strong>å›ºå®šå‚æ•°å¿…é¡»æ”¾åœ¨å˜é•¿å‚æ•°ä¹‹å‰</strong>:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fwrite</span><span class="params">(fmt, ...)</span></span>  <span class="comment">---&gt; å›ºå®šçš„å‚æ•°fmt</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(fmt, ...))     </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">fwrite(<span class="string">&quot;runoob\n&quot;</span>)       <span class="comment">---&gt;fmt = &quot;runoob&quot;, æ²¡æœ‰å˜é•¿å‚æ•°ã€‚  </span></span><br><span class="line">fwrite(<span class="string">&quot;%d%d\n&quot;</span>, <span class="number">1</span>, <span class="number">2</span>)   <span class="comment">---&gt;fmt = &quot;%d%d&quot;, å˜é•¿å‚æ•°ä¸º 1 å’Œ 2</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>
<p>é€šå¸¸åœ¨éå†å˜é•¿å‚æ•°çš„æ—¶å€™åªéœ€è¦ä½¿ç”¨ {â€¦}ï¼Œç„¶è€Œ<strong>å˜é•¿å‚æ•°å¯èƒ½ä¼šåŒ…å«ä¸€äº› nil</strong>ï¼Œé‚£ä¹ˆå°±<strong>å¯ä»¥ç”¨ select å‡½æ•°æ¥è®¿é—®å˜é•¿å‚æ•°</strong>äº†ï¼šselect(â€˜#â€™, â€¦) æˆ–è€… select(n, â€¦)</p>
<ul>
<li><strong>select(â€˜#â€™, â€¦) è¿”å›å¯å˜å‚æ•°çš„é•¿åº¦</strong>ã€‚</li>
<li><strong>select(n, â€¦) ç”¨äºè¿”å›ä»èµ·ç‚¹ n å¼€å§‹åˆ°ç»“æŸä½ç½®çš„æ‰€æœ‰å‚æ•°åˆ—è¡¨ï¼Œè¿”å›çš„æ˜¯å¤šä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªtable</strong>ã€‚</li>
</ul>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">(...)</span></span></span><br><span class="line">    a = <span class="built_in">select</span>(<span class="number">3</span>,...)  <span class="comment">--&gt;ä»ç¬¬ä¸‰ä¸ªä½ç½®å¼€å§‹ï¼Œå˜é‡ a å¯¹åº”å³è¾¹å˜é‡åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    <span class="built_in">print</span> (a)</span><br><span class="line">    <span class="built_in">print</span> (<span class="built_in">select</span>(<span class="number">3</span>,...)) <span class="comment">--&gt;æ‰“å°æ‰€æœ‰åˆ—è¡¨å‚æ•°</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">f(<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="comment">--è¾“å‡º</span></span><br><span class="line"><span class="comment">--2</span></span><br><span class="line"><span class="comment">--2       3       4       5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span>  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(...)</span></span>  </span><br><span class="line">        <span class="keyword">for</span> i = <span class="number">1</span>, <span class="built_in">select</span>(<span class="string">&#x27;#&#x27;</span>, ...) <span class="keyword">do</span>  <span class="comment">--&gt;è·å–å‚æ•°æ€»æ•°</span></span><br><span class="line">            <span class="keyword">local</span> <span class="built_in">arg</span> = <span class="built_in">select</span>(i, ...); <span class="comment">--&gt;è¯»å–å‚æ•°ï¼Œarg å¯¹åº”çš„æ˜¯å³è¾¹å˜é‡åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;arg&quot;</span>, <span class="built_in">arg</span>);  </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">  </span><br><span class="line">    foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);  </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">è¾“å‡º</span></span><br><span class="line"><span class="comment">arg    1</span></span><br><span class="line"><span class="comment">arg    2</span></span><br><span class="line"><span class="comment">arg    3</span></span><br><span class="line"><span class="comment">arg    4</span></span><br><span class="line"><span class="comment">]]</span><span class="comment">--</span></span><br></pre></td></tr></table></figure>
<h1 id="%E4%B9%9D-%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1">ä¹ è¿ç®—ç¬¦</h1>
<h3 id="9.1-%E8%BF%90%E7%AE%97%E7%AC%A6%E7%B1%BB%E5%9E%8B" tabindex="-1">9.1 è¿ç®—ç¬¦ç±»å‹</h3>
<ul>
<li>ç®—æœ¯è¿ç®—ç¬¦</li>
<li>å…³ç³»è¿ç®—ç¬¦</li>
<li>é€»è¾‘è¿ç®—ç¬¦</li>
<li>å…¶ä»–è¿ç®—ç¬¦</li>
</ul>
<h3 id="9.2-%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1">9.2 ç®—æ•°è¿ç®—ç¬¦</h3>
<ol>
<li>ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„å¸¸ç”¨ç®—æœ¯è¿ç®—ç¬¦ï¼Œè®¾å®š A çš„å€¼ä¸º10ï¼ŒB çš„å€¼ä¸º 20ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>åŠ æ³•</td>
<td>A + B è¾“å‡ºç»“æœ 30</td>
</tr>
<tr>
<td>-</td>
<td>å‡æ³•</td>
<td>A - B è¾“å‡ºç»“æœ -10</td>
</tr>
<tr>
<td>*</td>
<td>ä¹˜æ³•</td>
<td>A * B è¾“å‡ºç»“æœ 200</td>
</tr>
<tr>
<td>/</td>
<td>é™¤æ³•</td>
<td>B / A è¾“å‡ºç»“æœ 2</td>
</tr>
<tr>
<td>%</td>
<td>å–ä½™</td>
<td>B % A è¾“å‡ºç»“æœ 0</td>
</tr>
<tr>
<td>^</td>
<td>ä¹˜å¹‚</td>
<td>A^2 è¾“å‡ºç»“æœ 100</td>
</tr>
<tr>
<td>-</td>
<td>è´Ÿå·</td>
<td>-A è¾“å‡ºç»“æœ -10</td>
</tr>
<tr>
<td>//</td>
<td>æ•´é™¤è¿ç®—ç¬¦(&gt;=lua5.3)</td>
<td>5//2 è¾“å‡ºç»“æœ 2</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>åœ¨ lua ä¸­ï¼Œ/ ç”¨ä½œé™¤æ³•è¿ç®—ï¼Œè®¡ç®—ç»“æœåŒ…å«å°æ•°éƒ¨åˆ†ï¼Œ<strong>// ç”¨ä½œæ•´é™¤è¿ç®—ï¼Œè®¡ç®—ç»“æœä¸åŒ…å«å°æ•°éƒ¨åˆ†</strong></li>
</ol>
<h3 id="9.3-%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1">9.3 å…³ç³»è¿ç®—ç¬¦</h3>
<p>ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„å¸¸ç”¨å…³ç³»è¿ç®—ç¬¦ï¼Œè®¾å®š A çš„å€¼ä¸º10ï¼ŒB çš„å€¼ä¸º 20ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>
<td>(A == B) ä¸º falseã€‚</td>
</tr>
<tr>
<td>~=</td>
<td>ä¸ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>
<td>(A ~= B) ä¸º trueã€‚</td>
</tr>
<tr>
<td>&gt;</td>
<td>å¤§äºï¼Œå¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>
<td>(A &gt; B) ä¸º falseã€‚</td>
</tr>
<tr>
<td>&lt;</td>
<td>å°äºï¼Œå¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼ï¼Œè¿”å› falseï¼Œå¦åˆ™è¿”å› true</td>
<td>(A &lt; B) ä¸º trueã€‚</td>
</tr>
<tr>
<td>&gt;=</td>
<td>å¤§äºç­‰äºï¼Œå¦‚æœå·¦è¾¹çš„å€¼å¤§äºç­‰äºå³è¾¹çš„å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>
<td>(A &gt;= B) è¿”å› falseã€‚</td>
</tr>
<tr>
<td>&lt;=</td>
<td>å°äºç­‰äºï¼Œ å¦‚æœå·¦è¾¹çš„å€¼å°äºç­‰äºå³è¾¹çš„å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false</td>
<td>(A &lt;= B) è¿”å› trueã€‚</td>
</tr>
</tbody>
</table>
<h3 id="9.4-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1">9.4 é€»è¾‘è¿ç®—ç¬¦</h3>
<p>ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„å¸¸ç”¨é€»è¾‘è¿ç®—ç¬¦ï¼Œè®¾å®š A çš„å€¼ä¸º trueï¼ŒB çš„å€¼ä¸º falseï¼š (<strong>luaé€»è¾‘è¿ç®—ç¬¦ä¹Ÿå…·æœ‰çŸ­è·¯çš„åŠŸèƒ½</strong>)</p>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>and</td>
<td>é€»è¾‘ä¸æ“ä½œç¬¦ã€‚ è‹¥ A ä¸º falseï¼Œåˆ™è¿”å› Aï¼Œå¦åˆ™è¿”å› Bã€‚</td>
<td>(A and B) ä¸º falseã€‚</td>
</tr>
<tr>
<td>or</td>
<td>é€»è¾‘æˆ–æ“ä½œç¬¦ã€‚ è‹¥ A ä¸º trueï¼Œåˆ™è¿”å› Aï¼Œå¦åˆ™è¿”å› Bã€‚</td>
<td>(A or B) ä¸º trueã€‚</td>
</tr>
<tr>
<td>not</td>
<td>é€»è¾‘éæ“ä½œç¬¦ã€‚ä¸é€»è¾‘è¿ç®—ç»“æœç›¸åï¼Œå¦‚æœæ¡ä»¶ä¸º trueï¼Œé€»è¾‘éä¸º falseã€‚</td>
<td>not(A and B) ä¸º trueã€‚</td>
</tr>
</tbody>
</table>
<h3 id="9.5-%E5%85%B6%E4%BB%96%E8%BF%90%E7%AE%97%E7%AC%A6" tabindex="-1">9.5 å…¶ä»–è¿ç®—ç¬¦</h3>
<p>ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„è¿æ¥è¿ç®—ç¬¦ä¸è®¡ç®—è¡¨æˆ–å­—ç¬¦ä¸²é•¿åº¦çš„è¿ç®—ç¬¦ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€¦</td>
<td>è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²</td>
<td>aâ€¦b ï¼Œå…¶ä¸­ a ä¸º &quot;Hello &quot; ï¼Œ b ä¸º â€œWorldâ€, è¾“å‡ºç»“æœä¸º â€œHello Worldâ€ã€‚</td>
</tr>
<tr>
<td>#</td>
<td>ä¸€å…ƒè¿ç®—ç¬¦ï¼Œè¿”å›å­—ç¬¦ä¸²æˆ–è¡¨çš„é•¿åº¦ã€‚</td>
<td>#â€œHelloâ€ è¿”å› 5</td>
</tr>
</tbody>
</table>
<h3 id="9.6-%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7" tabindex="-1">9.6 è¿ç®—ç¬¦ä¼˜å…ˆçº§</h3>
<ol>
<li>ä»é«˜åˆ°ä½çš„é¡ºåº</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">^</span><br><span class="line"><span class="keyword">not</span>    - (unary)</span><br><span class="line">*      /       %</span><br><span class="line">+      -</span><br><span class="line">..</span><br><span class="line">&lt;      &gt;      &lt;=     &gt;=     ~=     ==</span><br><span class="line"><span class="keyword">and</span></span><br><span class="line"><span class="keyword">or</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>é™¤äº† ^ å’Œ â€¦ å¤–æ‰€æœ‰çš„äºŒå…ƒè¿ç®—ç¬¦éƒ½æ˜¯<strong>å·¦è¿æ¥</strong>çš„ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">a+i &lt; b/<span class="number">2</span>+<span class="number">1</span>          &lt;<span class="comment">--&gt;       (a+i) &lt; ((b/2)+1)</span></span><br><span class="line"><span class="number">5</span>+x^<span class="number">2</span>*<span class="number">8</span>              &lt;<span class="comment">--&gt;       5+((x^2)*8)</span></span><br><span class="line">a &lt; y <span class="keyword">and</span> y &lt;= z     &lt;<span class="comment">--&gt;       (a &lt; y) and (y &lt;= z)</span></span><br><span class="line">-x^<span class="number">2</span>                 &lt;<span class="comment">--&gt;       -(x^2)</span></span><br><span class="line">x^y^z                &lt;<span class="comment">--&gt;       x^(y^z)</span></span><br></pre></td></tr></table></figure>
<h1 id="%E5%8D%81-%E5%AD%97%E7%AC%A6%E4%B8%B2" tabindex="-1">å å­—ç¬¦ä¸²</h1>
<h3 id="10.1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%A1%A8%E7%A4%BA" tabindex="-1">10.1 å­—ç¬¦ä¸²çš„è¡¨ç¤º</h3>
<ol>
<li>
<p>å­—ç¬¦ä¸²æˆ–ä¸²(String)æ˜¯ç”±æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ç»„æˆçš„ä¸€ä¸²å­—ç¬¦ã€‚</p>
</li>
<li>
<p>åœ¨ Lua ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸€ç§åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨æ–‡æœ¬æ•°æ®ã€‚</p>
</li>
<li>
<p>Lua ä¸­çš„å­—ç¬¦ä¸²å¯ä»¥åŒ…å«ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬å­—æ¯ã€æ•°å­—ã€ç¬¦å·ã€ç©ºæ ¼ä»¥åŠå…¶ä»–ç‰¹æ®Šå­—ç¬¦ã€‚</p>
</li>
<li>
<p>Lua è¯­è¨€ä¸­å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥è¡¨ç¤ºï¼š</p>
<ul>
<li>å•å¼•å·é—´çš„ä¸€ä¸²å­—ç¬¦ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> str1 = <span class="string">&#x27;This is a string.&#x27;</span></span><br><span class="line"><span class="keyword">local</span> str2 = <span class="string">&quot;This is also a string.&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åŒå¼•å·é—´çš„ä¸€ä¸²å­—ç¬¦ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> str = <span class="string">&quot;Hello, &quot;</span></span><br><span class="line"> str = str .. <span class="string">&quot;World!&quot;</span>  <span class="comment">-- åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¹¶å°†å…¶èµ‹å€¼ç»™str</span></span><br><span class="line"> <span class="built_in">print</span>(str)  <span class="comment">-- è¾“å‡º &quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>[[ ä¸ ]] é—´çš„ä¸€ä¸²å­—ç¬¦</strong>ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> multilineString = <span class="string">[[</span></span><br><span class="line"><span class="string"> This is a multiline string.</span></span><br><span class="line"><span class="string"> It can contain multiple lines of text.</span></span><br><span class="line"><span class="string"> No need for escape characters.</span></span><br><span class="line"><span class="string"> ]]</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">print</span>(multilineString)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="10.2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E8%AE%A1%E7%AE%97" tabindex="-1">10.2 å­—ç¬¦ä¸²é•¿åº¦è®¡ç®—</h3>
<ol>
<li>ä½¿ç”¨ string.lenå‡½æ•°æˆ– utf8.len å‡½æ•°ï¼ŒåŒ…å«<strong>ä¸­æ–‡çš„ä¸€èˆ¬ç”¨ utf8.len</strong>ï¼Œstring.len å‡½æ•°ç”¨äºè®¡ç®—<strong>åªåŒ…å« ASCII å­—ç¬¦ä¸²çš„é•¿åº¦</strong>ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> myString = <span class="string">&quot;Hello, ä¸–ç•Œ!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆå­—ç¬¦ä¸ªæ•°ï¼‰</span></span><br><span class="line"><span class="keyword">local</span> length1 = utf8.<span class="built_in">len</span>(myString)</span><br><span class="line"><span class="built_in">print</span>(length1) <span class="comment">-- è¾“å‡º 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- string.len å‡½æ•°ä¼šå¯¼è‡´ç»“æœä¸å‡†ç¡®</span></span><br><span class="line"><span class="keyword">local</span> length2 = <span class="built_in">string</span>.<span class="built_in">len</span>(myString)</span><br><span class="line"><span class="built_in">print</span>(length2) <span class="comment">-- è¾“å‡º 14</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>è½¬ä¹‰å­—ç¬¦ç”¨äºè¡¨ç¤ºä¸èƒ½ç›´æ¥æ˜¾ç¤ºçš„å­—ç¬¦</strong>ï¼Œæ¯”å¦‚åé€€é”®ï¼Œå›è½¦é”®ç­‰ï¼Œå¦‚åœ¨å­—ç¬¦ä¸²è½¬æ¢åŒå¼•å·å¯ä»¥ä½¿ç”¨ \</li>
<li>æ‰€æœ‰çš„è½¬ä¹‰å­—ç¬¦å’Œæ‰€å¯¹åº”çš„æ„ä¹‰ï¼š<br>
<img src="/2024/08/20/lua-lua%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6%E7%9A%84%E6%84%8F%E4%B9%89.png" alt="è½¬ä¹‰å­—ç¬¦çš„æ„ä¹‰"></li>
</ol>
<h3 id="10.3-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%88%E5%87%BD%E6%95%B0%EF%BC%89" tabindex="-1">10.3 å­—ç¬¦ä¸²çš„æ“ä½œï¼ˆå‡½æ•°ï¼‰</h3>
<p>Lua æä¾›äº†å¾ˆå¤šçš„æ–¹æ³•æ¥æ”¯æŒå­—ç¬¦ä¸²çš„æ“ä½œï¼š</p>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>æ–¹æ³• &amp; ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>string.upper(argument)<br><strong>å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå¤§å†™å­—æ¯</strong>ã€‚</td>
</tr>
<tr>
<td>2</td>
<td>string.lower(argument)<br><strong>å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™å­—æ¯</strong>ã€‚</td>
</tr>
<tr>
<td>3</td>
<td>string.gsub(mainString,findString,replaceString,num)<br><strong>åœ¨å­—ç¬¦ä¸²ä¸­æ›¿æ¢</strong>ã€‚ <br>mainString ä¸ºè¦æ“ä½œçš„å­—ç¬¦ä¸²ï¼Œ findString ä¸ºè¢«æ›¿æ¢çš„å­—ç¬¦ï¼ŒreplaceString è¦æ›¿æ¢çš„å­—ç¬¦ï¼Œnum æ›¿æ¢æ¬¡æ•°ï¼ˆå¯ä»¥å¿½ç•¥ï¼Œåˆ™å…¨éƒ¨æ›¿æ¢ï¼‰ï¼Œå¦‚ï¼š<br> &gt; string.gsub(â€œaaaaâ€,â€œaâ€,â€œzâ€,3);<br> zzza    3</td>
</tr>
<tr>
<td>4</td>
<td>string.find (str, substr, [init, [plain]])<br><strong>åœ¨ä¸€ä¸ªæŒ‡å®šçš„ç›®æ ‡å­—ç¬¦ä¸² str ä¸­æœç´¢æŒ‡å®šçš„å†…å®¹ substr</strong>ï¼Œ<strong>å¦‚æœæ‰¾åˆ°äº†ä¸€ä¸ªåŒ¹é…çš„å­ä¸²ï¼Œå°±ä¼šè¿”å›è¿™ä¸ªå­ä¸²çš„èµ·å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•ï¼Œä¸å­˜åœ¨åˆ™è¿”å› nil</strong>ã€‚<br>init æŒ‡å®šäº†æœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º 1ï¼Œå¯ä»¥ä¸€ä¸ªè´Ÿæ•°ï¼Œè¡¨ç¤ºä»åå¾€å‰æ•°çš„å­—ç¬¦ä¸ªæ•°ã€‚<br>plain è¡¨ç¤ºæ˜¯å¦ä½¿ç”¨ç®€å•æ¨¡å¼ï¼Œé»˜è®¤ä¸º falseï¼Œtrue åªåšç®€å•çš„æŸ¥æ‰¾å­ä¸²çš„æ“ä½œï¼Œfalse è¡¨ç¤ºä½¿ç”¨ä½¿ç”¨æ­£åˆ™æ¨¡å¼åŒ¹é…ã€‚<br>ä»¥ä¸‹å®ä¾‹æŸ¥æ‰¾å­—ç¬¦ä¸² â€œLuaâ€ çš„èµ·å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•ä½ç½®ï¼š<br> &gt; string.find(â€œHello Lua userâ€, â€œLuaâ€, 1) <br>7    9</td>
</tr>
<tr>
<td>5</td>
<td>string.reverse(arg)<br><strong>å­—ç¬¦ä¸²åè½¬</strong><br> &gt; string.reverse(â€œLuaâ€)<br>auL</td>
</tr>
<tr>
<td>6</td>
<td>string.format(â€¦)<br>è¿”å›ä¸€ä¸ª<strong>ç±»ä¼¼printfçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²</strong><br>&gt; string.format(â€œthe value is:%dâ€,4)<br>the value is:4</td>
</tr>
<tr>
<td>7</td>
<td>string.char(arg) å’Œ string.byte(arg[,int])<br>char <strong>å°†æ•´å‹æ•°å­—è½¬æˆå­—ç¬¦å¹¶è¿æ¥</strong>ï¼Œ <strong>byte è½¬æ¢å­—ç¬¦ä¸ºæ•´æ•°å€¼(å¯ä»¥æŒ‡å®šæŸä¸ªå­—ç¬¦ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªå­—ç¬¦)</strong>ã€‚<br>&gt; string.char(97,98,99,100)<br>abcd<br>&gt; string.byte(â€œABCDâ€,4)<br>68<br>&gt; string.byte(â€œABCDâ€)<br>65<br>&gt;</td>
</tr>
<tr>
<td>8</td>
<td>string.len(arg)<br><strong>è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦</strong>ã€‚<br>string.len(â€œabcâ€)<br>3</td>
</tr>
<tr>
<td>9</td>
<td>string.rep(string, n)<br><strong>è¿”å›å­—ç¬¦ä¸²stringçš„nä¸ªæ‹·è´</strong><br>&gt; string.rep(â€œabcdâ€,2)<br>abcdabcd</td>
</tr>
<tr>
<td>10</td>
<td>â€¦<br><strong>é“¾æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²</strong><br>&gt; print(â€œwww.runoob.â€â€¦â€œcomâ€)<br><a href="http://www.runoob.com">www.runoob.com</a></td>
</tr>
<tr>
<td>11</td>
<td>string.gmatch(str, pattern)<br><strong>è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•°ï¼Œæ¯ä¸€æ¬¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåœ¨å­—ç¬¦ä¸² str æ‰¾åˆ°çš„ä¸‹ä¸€ä¸ªç¬¦åˆ pattern æè¿°çš„å­ä¸²</strong>ã€‚å¦‚æœå‚æ•° pattern æè¿°çš„å­—ç¬¦ä¸²æ²¡æœ‰æ‰¾åˆ°ï¼Œè¿­ä»£å‡½æ•°è¿”å›nilã€‚<br>&gt; for word in string.gmatch(â€œHello Lua userâ€, â€œ%a+â€) do print(word) end<br>Hello<br>Lua<br>user<br></td>
</tr>
<tr>
<td>12</td>
<td>string.match(str, pattern, init)<br>string.match()<strong>åªå¯»æ‰¾æºå­—ä¸²strä¸­çš„ç¬¬ä¸€ä¸ªé…å¯¹. å‚æ•°initå¯é€‰, æŒ‡å®šæœå¯»è¿‡ç¨‹çš„èµ·ç‚¹, é»˜è®¤ä¸º1</strong>ã€‚<br>åœ¨æˆåŠŸé…å¯¹æ—¶, å‡½æ•°å°†è¿”å›é…å¯¹è¡¨è¾¾å¼ä¸­çš„æ‰€æœ‰æ•è·ç»“æœ; å¦‚æœæ²¡æœ‰è®¾ç½®æ•è·æ ‡è®°, åˆ™è¿”å›æ•´ä¸ªé…å¯¹å­—ç¬¦ä¸². å½“æ²¡æœ‰æˆåŠŸçš„é…å¯¹æ—¶, è¿”å›nilã€‚<br>&gt; = string.match(â€œI have 2 questions for you.â€, â€œ%d+ %a+â€)<br>2 questions<br>&gt; = string.format(â€œ%d, %qâ€, string.match(â€œI have 2 questions for you.â€, â€œ(%d+) (%a+)â€))<br>2, â€œquestionsâ€</td>
</tr>
</tbody>
</table>
<h3 id="10.4-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E5%8F%96" tabindex="-1">10.4 å­—ç¬¦ä¸²æˆªå–</h3>
<ol>
<li>å­—ç¬¦ä¸²æˆªå–ä½¿ç”¨ sub() æ–¹æ³•ã€‚<strong>string.sub() ç”¨äºæˆªå–å­—ç¬¦ä¸²</strong>ï¼ŒåŸå‹ä¸ºï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">sub</span>(s, i [, j])</span><br></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>sï¼šè¦æˆªå–çš„å­—ç¬¦ä¸²ã€‚</li>
<li>iï¼šæˆªå–å¼€å§‹ä½ç½®ã€‚</li>
<li>jï¼šæˆªå–ç»“æŸä½ç½®ï¼Œé»˜è®¤ä¸º -1ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦ã€‚</li>
<li></li>
</ul>
<ol start="2">
<li>å®ä¾‹</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">local</span> sourcestr = <span class="string">&quot;prefix--runoobgoogletaobao--suffix&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nåŸå§‹å­—ç¬¦ä¸²&quot;</span>, <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, sourcestr))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æˆªå–éƒ¨åˆ†ï¼Œç¬¬4ä¸ªåˆ°ç¬¬15ä¸ª</span></span><br><span class="line"><span class="keyword">local</span> first_sub = <span class="built_in">string</span>.<span class="built_in">sub</span>(sourcestr, <span class="number">4</span>, <span class="number">15</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nç¬¬ä¸€æ¬¡æˆªå–&quot;</span>, <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, first_sub))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å–å­—ç¬¦ä¸²å‰ç¼€ï¼Œç¬¬1ä¸ªåˆ°ç¬¬8ä¸ª</span></span><br><span class="line"><span class="keyword">local</span> second_sub = <span class="built_in">string</span>.<span class="built_in">sub</span>(sourcestr, <span class="number">1</span>, <span class="number">8</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nç¬¬äºŒæ¬¡æˆªå–&quot;</span>, <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, second_sub))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æˆªå–æœ€å10ä¸ª</span></span><br><span class="line"><span class="keyword">local</span> third_sub = <span class="built_in">string</span>.<span class="built_in">sub</span>(sourcestr, <span class="number">-10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nç¬¬ä¸‰æ¬¡æˆªå–&quot;</span>, <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, third_sub))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç´¢å¼•è¶Šç•Œï¼Œè¾“å‡ºåŸå§‹å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">local</span> fourth_sub = <span class="built_in">string</span>.<span class="built_in">sub</span>(sourcestr, <span class="number">-100</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\nç¬¬å››æ¬¡æˆªå–&quot;</span>, <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, fourth_sub))</span><br></pre></td></tr></table></figure>
<h3 id="10.5-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2" tabindex="-1">10.5 å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">string1 = <span class="string">&quot;Lua&quot;</span>;</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">upper</span>(string1))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">lower</span>(string1))</span><br></pre></td></tr></table></figure>
<h3 id="10.6-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E6%89%BE%E4%B8%8E%E5%8F%8D%E8%BD%AC" tabindex="-1">10.6 å­—ç¬¦ä¸²æŸ¥æ‰¾ä¸åè½¬</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> = <span class="string">&quot;Lua Tutorial&quot;</span></span><br><span class="line"><span class="comment">-- æŸ¥æ‰¾å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">find</span>(<span class="built_in">string</span>,<span class="string">&quot;Tutorial&quot;</span>))</span><br><span class="line">reversedString = <span class="built_in">string</span>.<span class="built_in">reverse</span>(<span class="built_in">string</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ–°å­—ç¬¦ä¸²ä¸º&quot;</span>,reversedString)</span><br></pre></td></tr></table></figure>
<h3 id="10.7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96" tabindex="-1">10.7 å­—ç¬¦ä¸²æ ¼å¼åŒ–</h3>
<ol>
<li>æ ¼å¼å­—ç¬¦ä¸²å¯èƒ½åŒ…å«ä»¥ä¸‹çš„è½¬ä¹‰ç :
<ul>
<li>%c - æ¥å—ä¸€ä¸ªæ•°å­—, å¹¶å°†å…¶<strong>è½¬åŒ–ä¸ºASCIIç è¡¨ä¸­å¯¹åº”çš„å­—ç¬¦</strong></li>
<li>%d, %i - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†<strong>å…¶è½¬åŒ–ä¸ºæœ‰ç¬¦å·çš„æ•´æ•°æ ¼å¼</strong></li>
<li>%o - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>å…«è¿›åˆ¶æ•°æ ¼å¼</strong></li>
<li>%u - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>æ— ç¬¦å·æ•´æ•°æ ¼å¼</strong></li>
<li>%x - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>åå…­è¿›åˆ¶æ•°æ ¼å¼, ä½¿ç”¨å°å†™å­—æ¯</strong></li>
<li>%X - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>åå…­è¿›åˆ¶æ•°æ ¼å¼, ä½¿ç”¨å¤§å†™å­—æ¯</strong></li>
<li>%e - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>ç§‘å­¦è®°æ•°æ³•æ ¼å¼, ä½¿ç”¨å°å†™å­—æ¯e</strong></li>
<li>%E - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>ç§‘å­¦è®°æ•°æ³•æ ¼å¼, ä½¿ç”¨å¤§å†™å­—æ¯E</strong></li>
<li>%f - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>æµ®ç‚¹æ•°æ ¼å¼</strong></li>
<li>%g(%G) - æ¥å—ä¸€ä¸ªæ•°å­—å¹¶å°†å…¶è½¬åŒ–<strong>ä¸º%e(%E, å¯¹åº”%G)åŠ%fä¸­è¾ƒçŸ­çš„ä¸€ç§æ ¼å¼</strong></li>
<li>%q - æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶å°†å…¶è½¬åŒ–ä¸º<strong>å¯å®‰å…¨è¢«Luaç¼–è¯‘å™¨è¯»å…¥çš„æ ¼å¼</strong></li>
<li>%s - æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶<strong>æŒ‰ç…§ç»™å®šçš„å‚æ•°æ ¼å¼åŒ–è¯¥å­—ç¬¦ä¸²</strong></li>
</ul>
</li>
<li>ä¸ºè¿›ä¸€æ­¥ç»†åŒ–æ ¼å¼, å¯ä»¥åœ¨ <strong>%å·åæ·»åŠ å‚æ•°. å‚æ•°å°†ä»¥å¦‚ä¸‹çš„é¡ºåºè¯»å…¥</strong> :<br>
(1) <strong>ç¬¦å·</strong>: ä¸€ä¸ª+å·è¡¨ç¤ºå…¶åçš„æ•°å­—è½¬ä¹‰ç¬¦å°†è®©æ­£æ•°æ˜¾ç¤ºæ­£å·. é»˜è®¤æƒ…å†µä¸‹åªæœ‰è´Ÿæ•°æ˜¾ç¤ºç¬¦å·.<br>
(2) <strong>å ä½ç¬¦</strong>: ä¸€ä¸ª0, åœ¨åé¢æŒ‡å®šäº†å­—ä¸²å®½åº¦æ—¶å ä½ç”¨. ä¸å¡«æ—¶çš„é»˜è®¤å ä½ç¬¦æ˜¯ç©ºæ ¼.<br>
(3) <strong>å¯¹é½æ ‡è¯†</strong>: åœ¨æŒ‡å®šäº†å­—ä¸²å®½åº¦æ—¶, é»˜è®¤ä¸ºå³å¯¹é½, å¢åŠ -å·å¯ä»¥æ”¹ä¸ºå·¦å¯¹é½.<br>
(4) <strong>å®½åº¦æ•°å€¼</strong><br>
(5) <strong>å°æ•°ä½æ•°/å­—ä¸²è£åˆ‡</strong>: åœ¨å®½åº¦æ•°å€¼åå¢åŠ çš„å°æ•°éƒ¨åˆ†n, è‹¥åæ¥f(æµ®ç‚¹æ•°è½¬ä¹‰ç¬¦, å¦‚%6.3f)åˆ™è®¾å®šè¯¥æµ®ç‚¹æ•°çš„å°æ•°åªä¿ç•™nä½, è‹¥åæ¥s(å­—ç¬¦ä¸²è½¬ä¹‰ç¬¦, å¦‚%5.3s)åˆ™è®¾å®šè¯¥å­—ç¬¦ä¸²åªæ˜¾ç¤ºå‰nä½.<strong>%5.3sè¡¨ç¤ºå®½åº¦ä¸º5ï¼Œä¸”ä¿ç•™3ä½å°æ•°</strong></li>
<li>å®ä¾‹</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">string1 = <span class="string">&quot;Lua&quot;</span></span><br><span class="line">string2 = <span class="string">&quot;Tutorial&quot;</span></span><br><span class="line">number1 = <span class="number">10</span></span><br><span class="line">number2 = <span class="number">20</span></span><br><span class="line"><span class="comment">-- åŸºæœ¬å­—ç¬¦ä¸²æ ¼å¼åŒ–</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;åŸºæœ¬æ ¼å¼åŒ– %s %s&quot;</span>,string1,string2))</span><br><span class="line"><span class="comment">-- æ—¥æœŸæ ¼å¼åŒ–</span></span><br><span class="line"><span class="built_in">date</span> = <span class="number">2</span>; month = <span class="number">1</span>; year = <span class="number">2014</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;æ—¥æœŸæ ¼å¼åŒ– %02d/%02d/%04d&quot;</span>, <span class="built_in">date</span>, month, year))</span><br><span class="line"><span class="comment">-- åè¿›åˆ¶æ ¼å¼åŒ–</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.4f&quot;</span>,<span class="number">1</span>/<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%c&quot;</span>, <span class="number">83</span>)                 <span class="comment">-- è¾“å‡ºS</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%+d&quot;</span>, <span class="number">17.0</span>)              <span class="comment">-- è¾“å‡º+17</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%05d&quot;</span>, <span class="number">17</span>)               <span class="comment">-- è¾“å‡º00017</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%o&quot;</span>, <span class="number">17</span>)                 <span class="comment">-- è¾“å‡º21</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%u&quot;</span>, <span class="number">3.14</span>)               <span class="comment">-- è¾“å‡º3</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%x&quot;</span>, <span class="number">13</span>)                 <span class="comment">-- è¾“å‡ºd</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%X&quot;</span>, <span class="number">13</span>)                 <span class="comment">-- è¾“å‡ºD</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%e&quot;</span>, <span class="number">1000</span>)               <span class="comment">-- è¾“å‡º1.000000e+03</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%E&quot;</span>, <span class="number">1000</span>)               <span class="comment">-- è¾“å‡º1.000000E+03</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%6.3f&quot;</span>, <span class="number">13</span>)              <span class="comment">-- è¾“å‡º13.000</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%q&quot;</span>, <span class="string">&quot;One\nTwo&quot;</span>)         <span class="comment">-- è¾“å‡º&quot;One\</span></span><br><span class="line">                                        <span class="comment">-- ã€€ã€€Two&quot;</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)           <span class="comment">-- è¾“å‡ºmonkey</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%10s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)         <span class="comment">-- è¾“å‡º    monkey</span></span><br><span class="line"><span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%5.3s&quot;</span>, <span class="string">&quot;monkey&quot;</span>)        <span class="comment">-- è¾“å‡º  mon</span></span><br></pre></td></tr></table></figure>
<h3 id="10.8-%E5%AD%97%E7%AC%A6%E4%B8%8E%E6%95%B4%E6%95%B0%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2" tabindex="-1">10.8 å­—ç¬¦ä¸æ•´æ•°ç›¸äº’è½¬æ¢</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å­—ç¬¦è½¬æ¢</span></span><br><span class="line"><span class="comment">-- è½¬æ¢ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;Lua&quot;</span>))</span><br><span class="line"><span class="comment">-- è½¬æ¢ç¬¬ä¸‰ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;Lua&quot;</span>,<span class="number">3</span>))</span><br><span class="line"><span class="comment">-- è½¬æ¢æœ«å°¾ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;Lua&quot;</span>,<span class="number">-1</span>))</span><br><span class="line"><span class="comment">-- ç¬¬äºŒä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;Lua&quot;</span>,<span class="number">2</span>))</span><br><span class="line"><span class="comment">-- è½¬æ¢æœ«å°¾ç¬¬äºŒä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">byte</span>(<span class="string">&quot;Lua&quot;</span>,<span class="number">-2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ•´æ•° ASCII ç è½¬æ¢ä¸ºå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">97</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">76</span></span><br><span class="line"><span class="comment">97</span></span><br><span class="line"><span class="comment">97</span></span><br><span class="line"><span class="comment">117</span></span><br><span class="line"><span class="comment">117</span></span><br><span class="line"><span class="comment">a</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<h3 id="10.9-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E4%B8%8E%E5%A4%8D%E5%88%B6" tabindex="-1">10.9 å­—ç¬¦ä¸²è¿æ¥ä¸å¤åˆ¶</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">string1 = <span class="string">&quot;www.&quot;</span></span><br><span class="line">string2 = <span class="string">&quot;runoob&quot;</span></span><br><span class="line">string3 = <span class="string">&quot;.com&quot;</span></span><br><span class="line"><span class="comment">-- ä½¿ç”¨ .. è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿æ¥å­—ç¬¦ä¸²&quot;</span>,string1..string2..string3)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å­—ç¬¦ä¸²é•¿åº¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å­—ç¬¦ä¸²é•¿åº¦ &quot;</span>,<span class="built_in">string</span>.<span class="built_in">len</span>(string2))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å­—ç¬¦ä¸²å¤åˆ¶ 2 æ¬¡</span></span><br><span class="line">repeatedString = <span class="built_in">string</span>.<span class="built_in">rep</span>(string2,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(repeatedString)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">è¿æ¥å­—ç¬¦ä¸²    www.runoob.com</span></span><br><span class="line"><span class="comment">å­—ç¬¦ä¸²é•¿åº¦     6</span></span><br><span class="line"><span class="comment">runoobrunoob    </span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<h3 id="10.10-%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F" tabindex="-1">10.10 åŒ¹é…æ¨¡å¼</h3>
<ol>
<li>
<p>Lua ä¸­çš„åŒ¹é…æ¨¡å¼ç›´æ¥ç”¨å¸¸è§„çš„å­—ç¬¦ä¸²æ¥æè¿°ã€‚ å®ƒç”¨äºæ¨¡å¼åŒ¹é…å‡½æ•° string.find, string.gmatch, string.gsub, string.matchã€‚ä½ <strong>è¿˜å¯ä»¥åœ¨æ¨¡å¼ä¸²ä¸­ä½¿ç”¨å­—ç¬¦ç±»</strong>ã€‚</p>
</li>
<li>
<p>å­—ç¬¦ç±»<strong>æŒ‡å¯ä»¥åŒ¹é…ä¸€ä¸ªç‰¹å®šå­—ç¬¦é›†åˆå†…ä»»ä½•å­—ç¬¦çš„æ¨¡å¼é¡¹</strong>ã€‚æ¯”å¦‚ï¼Œ<strong>å­—ç¬¦ç±» %d åŒ¹é…ä»»æ„æ•°å­—</strong>ã€‚æ‰€ä»¥ä½ å¯ä»¥<strong>ä½¿ç”¨æ¨¡å¼ä¸² %d%d/%d%d/%d%d%d%d æœç´¢ dd/mm/yyyy æ ¼å¼çš„æ—¥æœŸ</strong>ï¼š</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">s = <span class="string">&quot;Deadline is 30/05/1999, firm&quot;</span></span><br><span class="line"><span class="built_in">date</span> = <span class="string">&quot;%d%d/%d%d/%d%d%d%d&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(s, <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="built_in">date</span>)))    <span class="comment">--&gt; 30/05/1999</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ä¸‹é¢çš„è¡¨åˆ—å‡ºäº†Luaæ”¯æŒçš„æ‰€æœ‰å­—ç¬¦ç±»ï¼š<br>
å•ä¸ªå­—ç¬¦ <strong>(é™¤ ^$()%.[]*Â±? å¤–)</strong>: ä¸è¯¥å­—ç¬¦è‡ªèº«é…å¯¹</li>
</ol>
<ul>
<li>.(ç‚¹): ä¸ä»»ä½•å­—ç¬¦é…å¯¹</li>
<li>%a: ä¸ä»»ä½•å­—æ¯é…å¯¹</li>
<li>%c: ä¸ä»»ä½•æ§åˆ¶ç¬¦é…å¯¹(ä¾‹å¦‚\n)</li>
<li>%d: ä¸ä»»ä½•æ•°å­—é…å¯¹</li>
<li>%l: ä¸ä»»ä½•å°å†™å­—æ¯é…å¯¹</li>
<li>%p: ä¸ä»»ä½•æ ‡ç‚¹(punctuation)é…å¯¹</li>
<li>%s: ä¸ç©ºç™½å­—ç¬¦é…å¯¹</li>
<li>%u: ä¸ä»»ä½•å¤§å†™å­—æ¯é…å¯¹</li>
<li>%w: ä¸ä»»ä½•å­—æ¯/æ•°å­—é…å¯¹</li>
<li>%x: ä¸ä»»ä½•åå…­è¿›åˆ¶æ•°é…å¯¹</li>
<li>%z: ä¸ä»»ä½•ä»£è¡¨0çš„å­—ç¬¦é…å¯¹</li>
<li>%x(æ­¤å¤„xæ˜¯éå­—æ¯éæ•°å­—å­—ç¬¦): ä¸å­—ç¬¦xé…å¯¹. ä¸»è¦ç”¨æ¥å¤„ç†è¡¨è¾¾å¼ä¸­æœ‰åŠŸèƒ½çš„å­—ç¬¦(^$()%.[]*Â±?)çš„é…å¯¹é—®é¢˜, ä¾‹å¦‚%%ä¸%é…å¯¹</li>
<li>[æ•°ä¸ªå­—ç¬¦ç±»]: ä¸ä»»ä½•[]ä¸­åŒ…å«çš„å­—ç¬¦ç±»é…å¯¹. ä¾‹å¦‚[%w_]ä¸ä»»ä½•å­—æ¯/æ•°å­—, æˆ–ä¸‹åˆ’çº¿ç¬¦å·(_)é…å¯¹</li>
<li>[^æ•°ä¸ªå­—ç¬¦ç±»]: ä¸ä»»ä½•ä¸åŒ…å«åœ¨[]ä¸­çš„å­—ç¬¦ç±»é…å¯¹. ä¾‹å¦‚[^%s]ä¸ä»»ä½•éç©ºç™½å­—ç¬¦é…å¯¹</li>
</ul>
<p><strong>å½“ä¸Šè¿°çš„å­—ç¬¦ç±»ç”¨å¤§å†™ä¹¦å†™æ—¶, è¡¨ç¤ºä¸éæ­¤å­—ç¬¦ç±»çš„ä»»ä½•å­—ç¬¦é…å¯¹. ä¾‹å¦‚, %Sè¡¨ç¤ºä¸ä»»ä½•éç©ºç™½å­—ç¬¦é…å¯¹.ä¾‹å¦‚ï¼Œ'%Aâ€™éå­—æ¯çš„å­—ç¬¦:</strong></p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello, up-down!&quot;</span>, <span class="string">&quot;%A&quot;</span>, <span class="string">&quot;.&quot;</span>))</span><br><span class="line">hello..up.down.    <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p><strong>æ•°å­—4ä¸æ˜¯å­—ç¬¦ä¸²ç»“æœçš„ä¸€éƒ¨åˆ†ï¼Œä»–æ˜¯gsubè¿”å›çš„ç¬¬äºŒä¸ªç»“æœï¼Œä»£è¡¨å‘ç”Ÿæ›¿æ¢çš„æ¬¡æ•°ã€‚</strong><br>
åœ¨<strong>æ¨¡å¼åŒ¹é…ä¸­æœ‰ä¸€äº›ç‰¹æ®Šå­—ç¬¦</strong>ï¼Œä»–ä»¬æœ‰ç‰¹æ®Šçš„æ„ä¹‰ï¼ŒLuaä¸­çš„ç‰¹æ®Šå­—ç¬¦å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">( ) . % + - * ? [ ^ $</span><br></pre></td></tr></table></figure>
<p><strong>â€˜%â€™ ç”¨ä½œç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰å­—ç¬¦ï¼Œå› æ­¤ â€˜%.â€™ åŒ¹é…ç‚¹ï¼›â€˜%%â€™ åŒ¹é…å­—ç¬¦ â€˜%â€™ã€‚è½¬ä¹‰å­—ç¬¦ '%'ä¸ä»…å¯ä»¥ç”¨æ¥è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œè¿˜å¯ä»¥ç”¨äºæ‰€æœ‰çš„éå­—æ¯çš„å­—ç¬¦ã€‚</strong></p>
<ol start="4">
<li>æ¨¡å¼æ¡ç›®å¯ä»¥æ˜¯ï¼š</li>
</ol>
<ul>
<li>å•ä¸ªå­—ç¬¦ç±»åŒ¹é…è¯¥ç±»åˆ«ä¸­ä»»æ„å•ä¸ªå­—ç¬¦ï¼›</li>
<li>å•ä¸ªå­—ç¬¦ç±»è·Ÿä¸€ä¸ª â€˜*â€™ï¼Œ å°†åŒ¹é…<strong>é›¶æˆ–å¤šä¸ªè¯¥ç±»çš„å­—</strong>ç¬¦ã€‚ è¿™ä¸ªæ¡ç›®<strong>æ€»æ˜¯åŒ¹é…å°½å¯èƒ½é•¿çš„ä¸²</strong>ï¼›</li>
<li>å•ä¸ªå­—ç¬¦ç±»è·Ÿä¸€ä¸ª â€˜+â€™ï¼Œ å°†åŒ¹é…<strong>ä¸€æˆ–æ›´å¤šä¸ªè¯¥ç±»çš„å­—ç¬¦</strong>ã€‚ è¿™ä¸ªæ¡ç›®æ€»æ˜¯åŒ¹é…<strong>å°½å¯èƒ½é•¿</strong>çš„ä¸²ï¼›</li>
<li>å•ä¸ªå­—ç¬¦ç±»è·Ÿä¸€ä¸ª â€˜-â€™ï¼Œ å°†åŒ¹é…<strong>é›¶æˆ–æ›´å¤šä¸ªè¯¥ç±»çš„å­—ç¬¦</strong>ã€‚ å’Œ â€˜*â€™ ä¸åŒï¼Œ è¿™ä¸ªæ¡ç›®æ€»æ˜¯åŒ¹é…<strong>å°½å¯èƒ½çŸ­</strong>çš„ä¸²ï¼›</li>
<li>å•ä¸ªå­—ç¬¦ç±»è·Ÿä¸€ä¸ª â€˜?â€™ï¼Œ å°†åŒ¹é…<strong>é›¶æˆ–ä¸€ä¸ªè¯¥ç±»çš„å­—ç¬¦</strong>ã€‚ åªè¦æœ‰å¯èƒ½ï¼Œå®ƒä¼šåŒ¹é…ä¸€ä¸ªï¼›</li>
<li>%nï¼Œ è¿™é‡Œçš„ n å¯ä»¥ä» 1 åˆ° 9ï¼› è¿™ä¸ªæ¡ç›®åŒ¹é…<strong>ä¸€ä¸ªç­‰äº n å·æ•è·ç‰©ï¼ˆåé¢æœ‰æè¿°ï¼‰çš„å­ä¸²</strong>ã€‚</li>
<li>%bxyï¼Œ è¿™é‡Œçš„ x å’Œ y æ˜¯ä¸¤ä¸ªæ˜ç¡®çš„å­—ç¬¦ï¼› è¿™ä¸ªæ¡ç›®åŒ¹é…ä»¥ x å¼€å§‹ y ç»“æŸï¼Œ ä¸”å…¶ä¸­ x å’Œ y ä¿æŒ å¹³è¡¡ çš„å­—ç¬¦ä¸²ã€‚ æ„æ€æ˜¯ï¼Œå¦‚æœä»å·¦åˆ°å³è¯»è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹æ¯æ¬¡è¯»åˆ°ä¸€ä¸ª x å°± +1 ï¼Œè¯»åˆ°ä¸€ä¸ª y å°± -1ï¼Œ æœ€ç»ˆç»“æŸå¤„çš„é‚£ä¸ª y æ˜¯ç¬¬ä¸€ä¸ªè®°æ•°åˆ° 0 çš„ yã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¡ç›® %b() å¯ä»¥åŒ¹é…åˆ°æ‹¬å·å¹³è¡¡çš„è¡¨è¾¾å¼ã€‚</li>
<li>%f[set]ï¼Œ æŒ‡ è¾¹å¢ƒæ¨¡å¼ï¼› è¿™ä¸ªæ¡ç›®ä¼šåŒ¹é…åˆ°ä¸€ä¸ªä½äº set å†…æŸä¸ªå­—ç¬¦ä¹‹å‰çš„ä¸€ä¸ªç©ºä¸²ï¼Œ ä¸”è¿™ä¸ªä½ç½®çš„å‰ä¸€ä¸ªå­—ç¬¦ä¸å±äº set ã€‚ é›†åˆ set çš„å«ä¹‰å¦‚å‰é¢æ‰€è¿°ã€‚ åŒ¹é…å‡ºçš„é‚£ä¸ªç©ºä¸²ä¹‹å¼€å§‹å’Œç»“æŸç‚¹çš„è®¡ç®—å°±çœ‹æˆè¯¥å¤„æœ‰ä¸ªå­—ç¬¦ â€˜\0â€™ ä¸€æ ·ã€‚</li>
</ul>
<ol start="5">
<li>æ¨¡å¼ï¼š</li>
</ol>
<p>æ¨¡å¼ æŒ‡ä¸€ä¸ªæ¨¡å¼æ¡ç›®çš„åºåˆ—ã€‚ <strong>åœ¨æ¨¡å¼æœ€å‰é¢åŠ ä¸Šç¬¦å· â€˜^â€™ å°†é”šå®šä»å­—ç¬¦ä¸²çš„å¼€å§‹å¤„åšåŒ¹é…</strong>ã€‚ åœ¨æ¨¡å¼æœ€åé¢åŠ ä¸Š<strong>ç¬¦å·â€™$'<strong>å°†ä½¿åŒ¹é…è¿‡ç¨‹é”šå®šåˆ°</strong>å­—ç¬¦ä¸²çš„ç»“å°¾</strong>ã€‚<br>
å¦‚æœ <strong>â€˜^â€™ å’Œ â€˜$â€™ å‡ºç°åœ¨å…¶å®ƒä½ç½®</strong>ï¼Œå®ƒä»¬å‡æ²¡æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œ<strong>åªè¡¨ç¤ºè‡ªèº«</strong>ã€‚</p>
<ol start="6">
<li>æ•è·ï¼š</li>
</ol>
<p><strong>æ¨¡å¼å¯ä»¥åœ¨å†…éƒ¨ç”¨å°æ‹¬å·æ‹¬èµ·ä¸€ä¸ªå­æ¨¡å¼</strong>ï¼› è¿™äº›å­æ¨¡å¼è¢«<strong>ç§°ä¸º æ•è·ç‰©</strong>ã€‚ å½“åŒ¹é…æˆåŠŸæ—¶ï¼Œç”± æ•è·ç‰© åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä¸­çš„å­ä¸²è¢«ä¿å­˜èµ·æ¥ç”¨äºæœªæ¥çš„ç”¨é€”ã€‚ æ•è·ç‰©ä»¥å®ƒä»¬å·¦æ‹¬å·çš„æ¬¡åºæ¥ç¼–å·ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºæ¨¡å¼ â€œ(a*(.)%w(%s*))â€ ï¼Œ å­—ç¬¦ä¸²ä¸­åŒ¹é…åˆ° â€œa*(.)%w(%s*)â€ çš„éƒ¨åˆ†ä¿å­˜åœ¨ç¬¬ä¸€ä¸ªæ•è·ç‰©ä¸­ ï¼ˆå› æ­¤æ˜¯ç¼–å· 1 ï¼‰ï¼› ç”± â€œ.â€ åŒ¹é…åˆ°çš„å­—ç¬¦æ˜¯ 2 å·æ•è·ç‰©ï¼Œ åŒ¹é…åˆ° â€œ%s*â€ çš„é‚£éƒ¨åˆ†æ˜¯ 3 å·ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªç‰¹ä¾‹ï¼Œ<strong>ç©ºçš„æ•è· () å°†æ•è·åˆ°å½“å‰å­—ç¬¦ä¸²çš„ä½ç½®ï¼ˆå®ƒæ˜¯ä¸€ä¸ªæ•°å­—ï¼‰</strong>ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå°†æ¨¡å¼ â€œ()aa()â€ ä½œç”¨åˆ°å­—ç¬¦ä¸² â€œflaaapâ€ ä¸Šï¼Œå°†äº§ç”Ÿä¸¤ä¸ªæ•è·ç‰©ï¼š 3 å’Œ 5 ã€‚</p>
<h1 id="%E5%8D%81%E4%B8%80-lua%E6%95%B0%E7%BB%84" tabindex="-1">åä¸€ Luaæ•°ç»„</h1>
<h3 id="11.1-%E6%A6%82%E8%BF%B0" tabindex="-1">11.1 æ¦‚è¿°</h3>
<ol>
<li>
<p>æ•°ç»„ï¼Œå°±æ˜¯ç›¸<strong>åŒæ•°æ®ç±»å‹çš„å…ƒç´ æŒ‰ä¸€å®šé¡ºåºæ’åˆ—çš„é›†åˆ</strong>ï¼Œå¯ä»¥æ˜¯<strong>ä¸€ç»´</strong>æ•°ç»„å’Œ<strong>å¤šç»´</strong>æ•°ç»„ã€‚</p>
</li>
<li>
<p>åœ¨Luaä¸­ï¼Œæ•°ç»„<strong>ä¸æ˜¯ä¸€ç§ç‰¹å®šçš„æ•°æ®ç±»å‹</strong>ï¼Œè€Œæ˜¯ä¸€ç§ç”¨æ¥<strong>å­˜å‚¨ä¸€ç»„å€¼çš„æ•°æ®ç»“æ„</strong>ã€‚</p>
</li>
<li>
<p>å®é™…ä¸Šï¼Œ<strong>Lua ä¸­å¹¶æ²¡æœ‰ä¸“é—¨çš„æ•°ç»„ç±»å‹</strong>ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ç§è¢«ç§°ä¸º <strong>â€œtableâ€ çš„æ•°æ®ç»“æ„æ¥å®ç°æ•°ç»„</strong>çš„åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>Lua æ•°ç»„çš„ç´¢å¼•é”®å€¼å¯ä»¥ä½¿ç”¨æ•´æ•°è¡¨ç¤ºï¼Œæ•°ç»„çš„å¤§å°ä¸æ˜¯å›ºå®šçš„ã€‚</p>
</li>
<li>
<p>åœ¨ <strong>Lua ç´¢å¼•å€¼æ˜¯ä»¥ 1 ä¸ºèµ·å§‹ï¼Œä½†ä½ ä¹Ÿå¯ä»¥æŒ‡å®š 0 å¼€å§‹</strong>ã€‚</p>
</li>
</ol>
<h3 id="11.2-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84" tabindex="-1">11.2 ä¸€ç»´æ•°ç»„</h3>
<ol>
<li>ç´¢å¼•è®¿é—®</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">local</span> myArray = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¿é—®æ•°ç»„å…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(myArray[<span class="number">1</span>])  <span class="comment">-- è¾“å‡º 10</span></span><br><span class="line"><span class="built_in">print</span>(myArray[<span class="number">3</span>])  <span class="comment">-- è¾“å‡º 30</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è¦è®¡ç®—æ•°ç»„çš„é•¿åº¦ï¼ˆå³æ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ # æ“ä½œç¬¦ï¼š(ä½†æ³¨æ„ å¦‚æœå­˜åœ¨è¿ç»­ä¸¤ä¸ªnilå¤¹åœ¨æ•°ç»„ä¸­é—´ï¼Œ#åªä¼šè®¡ç®—å‰åŠæˆªçš„é•¿åº¦)</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> myArray = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¡ç®—æ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="keyword">local</span> length = #myArray</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(length) <span class="comment">-- è¾“å‡º 5</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ä¸€ç»´æ•°ç»„å¯ä»¥ç”¨ for å¾ªç¯å‡ºæ•°ç»„ä¸­çš„å…ƒç´ </li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">local</span> myArray = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¾ªç¯éå†æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, #myArray <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(myArray[i])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>luaç´¢å¼•é»˜è®¤ä»1å¼€å§‹</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">array = &#123;<span class="string">&quot;Lua&quot;</span>, <span class="string">&quot;Tutorial&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i= <span class="number">0</span>, <span class="number">2</span> <span class="keyword">do</span></span><br><span class="line">   <span class="built_in">print</span>(array[i])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>æ·»åŠ å…ƒç´ </li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">local</span> myArray = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ æ–°å…ƒç´ åˆ°æ•°ç»„æœ«å°¾</span></span><br><span class="line">myArray[#myArray + <span class="number">1</span>] = <span class="number">60</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¾ªç¯éå†æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, #myArray <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(myArray[i])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="6">
<li>åˆ é™¤å…ƒç´ </li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºä¸€ä¸ªæ•°ç»„</span></span><br><span class="line"><span class="keyword">local</span> myArray = &#123;<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤ç¬¬ä¸‰ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">remove</span>(myArray, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¾ªç¯éå†æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, #myArray <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(myArray[i])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="11.3-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84" tabindex="-1">11.3 å¤šç»´æ•°ç»„</h3>
<ol>
<li>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¸‰è¡Œä¸‰åˆ—çš„é˜µåˆ—å¤šç»´æ•°ç»„ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">array = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">   array[i] = &#123;&#125;</span><br><span class="line">      <span class="keyword">for</span> j=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">         array[i][j] = i*j</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¿é—®æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">   <span class="keyword">for</span> j=<span class="number">1</span>,<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">      <span class="built_in">print</span>(array[i][j])</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ä¸åŒç´¢å¼•é”®çš„ä¸‰è¡Œä¸‰åˆ—é˜µåˆ—å¤šç»´æ•°ç»„ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">array = &#123;&#125;</span><br><span class="line">maxRows = <span class="number">3</span></span><br><span class="line">maxColumns = <span class="number">3</span></span><br><span class="line"><span class="keyword">for</span> row=<span class="number">1</span>,maxRows <span class="keyword">do</span></span><br><span class="line">   <span class="keyword">for</span> col=<span class="number">1</span>,maxColumns <span class="keyword">do</span></span><br><span class="line">      array[row*maxColumns +col] = row*col</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¿é—®æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> row=<span class="number">1</span>,maxRows <span class="keyword">do</span></span><br><span class="line">   <span class="keyword">for</span> col=<span class="number">1</span>,maxColumns <span class="keyword">do</span></span><br><span class="line">      <span class="built_in">print</span>(array[row*maxColumns +col])</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä»¥ä¸Šçš„å®ä¾‹ä¸­ï¼Œ<strong>æ•°ç»„è®¾å®šäº†æŒ‡å®šçš„ç´¢å¼•å€¼ï¼Œè¿™æ ·å¯ä»¥é¿å…å‡ºç° nil å€¼ï¼Œæœ‰åˆ©äºèŠ‚çœå†…å­˜ç©ºé—´</strong>ã€‚</p>
<h1 id="%E5%8D%81%E4%BA%8C-%E8%BF%AD%E4%BB%A3%E5%99%A8%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">åäºŒ è¿­ä»£å™¨ï¼ˆâ­ï¼‰</h1>
<h3 id="12.1-%E6%A6%82%E8%BF%B0" tabindex="-1">12.1 æ¦‚è¿°</h3>
<p>è¿­ä»£å™¨ï¼ˆiteratorï¼‰æ˜¯ä¸€ç§å¯¹è±¡ï¼Œå®ƒèƒ½å¤Ÿ<strong>ç”¨æ¥éå†æ ‡å‡†æ¨¡æ¿åº“å®¹å™¨ä¸­çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ </strong>ï¼Œæ¯ä¸ªè¿­ä»£å™¨å¯¹è±¡ä»£è¡¨å®¹å™¨ä¸­çš„ç¡®å®šçš„åœ°å€ã€‚</p>
<p>åœ¨ Lua ä¸­è¿­ä»£å™¨æ˜¯ä¸€ç§æ”¯<strong>æŒæŒ‡é’ˆç±»å‹çš„ç»“æ„</strong>ï¼Œå®ƒå¯ä»¥éå†é›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚</p>
<h3 id="12.2-%E6%B3%9B%E5%9E%8Bfor%E8%BF%AD%E4%BB%A3%E5%99%A8" tabindex="-1">12.2 æ³›å‹forè¿­ä»£å™¨</h3>
<ol>
<li><strong>æ³›å‹ for</strong> åœ¨è‡ªå·±å†…éƒ¨ä¿å­˜è¿­ä»£å‡½æ•°ï¼Œå®é™…ä¸Šå®ƒä¿å­˜ä¸‰ä¸ªå€¼ï¼š <strong>è¿­ä»£å‡½æ•°ã€çŠ¶æ€å¸¸é‡ã€æ§åˆ¶å˜é‡</strong>ã€‚æ³›å‹ for è¿­ä»£å™¨<strong>æä¾›äº†é›†åˆçš„ key/value</strong> å¯¹ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œk, vä¸ºå˜é‡åˆ—è¡¨ï¼›pairs(t)ä¸ºè¡¨è¾¾å¼åˆ—è¡¨ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">array = &#123;<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">ipairs</span>(array) </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">print</span>(key, value)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº† Lua é»˜è®¤æä¾›çš„è¿­ä»£å‡½æ•° ipairsã€‚(<strong>å»ºè®®æœ€å¥½éƒ½ç”¨pairs</strong>ï¼Œå› ä¸ºipairsä¸èƒ½æ‰¾åˆ°0å’Œ0ä»¥ä¸‹çš„è‡ªå®šä¹‰ç´¢å¼•å†…å®¹,å¦‚æœä»1å¼€å§‹ ç´¢å¼•é¡ºåºæ–­äº† åé¢çš„å†…å®¹ä¹Ÿæ‰¾ä¸åˆ°)ã€‚</p>
<ol start="2">
<li>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹<strong>æ³›å‹ for çš„æ‰§è¡Œè¿‡ç¨‹</strong>ï¼š</li>
</ol>
<ul>
<li>é¦–å…ˆï¼Œåˆå§‹åŒ–ï¼Œ<strong>è®¡ç®— in åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œè¡¨è¾¾å¼åº”è¯¥è¿”å›æ³›å‹ for éœ€è¦çš„ä¸‰ä¸ªå€¼ï¼šè¿­ä»£å‡½æ•°ã€çŠ¶æ€å¸¸é‡ã€æ§åˆ¶å˜é‡</strong>ï¼›ä¸å¤šå€¼èµ‹å€¼ä¸€æ ·ï¼Œå¦‚æœè¡¨è¾¾å¼è¿”å›çš„ç»“æœä¸ªæ•°ä¸è¶³ä¸‰ä¸ªä¼šè‡ªåŠ¨ç”¨ nil è¡¥è¶³ï¼Œå¤šå‡ºéƒ¨åˆ†ä¼šè¢«å¿½ç•¥ã€‚</li>
<li>ç¬¬äºŒï¼Œå°†<strong>çŠ¶æ€å¸¸é‡å’Œæ§åˆ¶å˜é‡</strong>ä½œä¸º<strong>å‚æ•°è°ƒç”¨è¿­ä»£å‡½æ•°</strong>ï¼ˆæ³¨æ„ï¼šå¯¹äº for ç»“æ„æ¥è¯´ï¼Œ<strong>çŠ¶æ€å¸¸é‡</strong>æ²¡æœ‰ç”¨å¤„ï¼Œä»…ä»…<strong>åœ¨åˆå§‹åŒ–æ—¶è·å–ä»–çš„å€¼å¹¶ä¼ é€’ç»™è¿­ä»£å‡½æ•°</strong>ï¼‰ã€‚</li>
<li>ç¬¬ä¸‰ï¼Œå°†è¿­<strong>ä»£å‡½æ•°è¿”å›çš„å€¼èµ‹ç»™å˜é‡åˆ—è¡¨</strong>ã€‚</li>
<li>ç¬¬å››ï¼Œå¦‚æœ<strong>è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼ä¸ºnilå¾ªç¯ç»“æŸ</strong>ï¼Œå¦åˆ™æ‰§è¡Œå¾ªç¯ä½“ã€‚</li>
<li>ç¬¬äº”ï¼Œå›åˆ°<strong>ç¬¬äºŒæ­¥å†æ¬¡è°ƒç”¨è¿­ä»£å‡½æ•°</strong></li>
</ul>
<ol start="3">
<li>åœ¨Luaä¸­æˆ‘ä»¬å¸¸å¸¸<strong>ä½¿ç”¨å‡½æ•°æ¥æè¿°è¿­ä»£å™¨</strong>ï¼Œ<strong>æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°å°±è¿”å›é›†åˆçš„ä¸‹ä¸€ä¸ªå…ƒç´ </strong>ã€‚Lua çš„è¿­ä»£å™¨åŒ…å«ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š
<ul>
<li>æ— çŠ¶æ€çš„è¿­ä»£å™¨</li>
<li>å¤šçŠ¶æ€çš„è¿­ä»£å™¨</li>
</ul>
</li>
</ol>
<h3 id="12.2-%E6%97%A0%E7%8A%B6%E6%80%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8" tabindex="-1">12.2 æ— çŠ¶æ€çš„è¿­ä»£å™¨</h3>
<ol>
<li>æ— çŠ¶æ€çš„è¿­ä»£å™¨æ˜¯<strong>æŒ‡ä¸ä¿ç•™ä»»ä½•çŠ¶æ€çš„è¿­ä»£å™¨</strong>ï¼Œå› æ­¤åœ¨å¾ªç¯ä¸­æˆ‘ä»¬å¯ä»¥<strong>åˆ©ç”¨æ— çŠ¶æ€è¿­ä»£å™¨é¿å…åˆ›å»ºé—­åŒ…èŠ±è´¹é¢å¤–çš„ä»£ä»·</strong>ã€‚</li>
<li>æ¯ä¸€æ¬¡è¿­ä»£ï¼Œ<strong>è¿­ä»£å‡½æ•°éƒ½æ˜¯ç”¨ä¸¤ä¸ªå˜é‡ï¼ˆçŠ¶æ€å¸¸é‡å’Œæ§åˆ¶å˜é‡ï¼‰çš„å€¼ä½œä¸ºå‚æ•°è¢«è°ƒç”¨</strong>ï¼Œä¸€ä¸ª<strong>æ— çŠ¶æ€çš„è¿­ä»£å™¨åªåˆ©ç”¨è¿™ä¸¤ä¸ªå€¼</strong>å¯ä»¥<strong>è·å–ä¸‹ä¸€ä¸ªå…ƒç´ </strong>ã€‚</li>
<li>è¿™ç§<strong>æ— çŠ¶æ€è¿­ä»£å™¨çš„å…¸å‹çš„ç®€å•çš„ä¾‹å­æ˜¯ ipairs</strong>ï¼Œå®ƒ<strong>éå†æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ çš„ç´¢å¼•éœ€è¦æ˜¯æ•°å€¼</strong>ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span><span class="params">(iteratorMaxCount,currentNumber)</span></span></span><br><span class="line">   <span class="keyword">if</span> currentNumber&lt;iteratorMaxCount</span><br><span class="line">   <span class="keyword">then</span></span><br><span class="line">      currentNumber = currentNumber+<span class="number">1</span></span><br><span class="line">   <span class="keyword">return</span> currentNumber, currentNumber*currentNumber</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- square,3,0 è¿­ä»£å‡½æ•°ã€çŠ¶æ€å¸¸é‡ã€æ§åˆ¶å˜é‡ currentNumber==currentNumberæ—¶ å‡½æ•°squareå°±æ²¡æœ‰è¿”å›å€¼äº†</span></span><br><span class="line"><span class="keyword">for</span> i,n <span class="keyword">in</span> square,<span class="number">3</span>,<span class="number">0</span> </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">print</span>(i,n)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>ipairsçš„å®ç°ï¼ˆâ­ï¼‰</strong><br>
<strong>è¿­ä»£çš„çŠ¶æ€åŒ…æ‹¬è¢«éå†çš„è¡¨ï¼ˆå¾ªç¯è¿‡ç¨‹ä¸­ä¸ä¼šæ”¹å˜çš„çŠ¶æ€å¸¸é‡ï¼‰å’Œå½“å‰çš„ç´¢å¼•ä¸‹æ ‡ï¼ˆæ§åˆ¶å˜é‡ï¼‰</strong>ï¼Œipairs å’Œè¿­ä»£å‡½æ•°éƒ½å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨ Lua ä¸­å¯ä»¥è¿™æ ·å®ç°ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">iter</span> <span class="params">(a, i)</span></span></span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">    <span class="keyword">local</span> v = a[i]</span><br><span class="line">    <span class="keyword">if</span> v <span class="keyword">then</span></span><br><span class="line">       <span class="keyword">return</span> i, v</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ipairs</span> <span class="params">(a)</span></span></span><br><span class="line">    <span class="keyword">return</span> iter, a, <span class="number">0</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>å½“ Lua è°ƒç”¨ ipairs(a) å¼€å§‹å¾ªç¯æ—¶ï¼Œä»–è·å–ä¸‰ä¸ªå€¼ï¼šè¿­ä»£å‡½æ•° iterã€çŠ¶æ€å¸¸é‡ aã€æ§åˆ¶å˜é‡åˆå§‹å€¼ 0ï¼›ç„¶å Lua è°ƒç”¨ iter(a,0) è¿”å› 1, a[1]ï¼ˆé™¤é a[1]=nilï¼‰ï¼›ç¬¬äºŒæ¬¡è¿­ä»£è°ƒç”¨ iter(a,1) è¿”å› 2, a[2]â€¦â€¦ç›´åˆ°ç¬¬ä¸€ä¸ª nil å…ƒç´ ã€‚</strong></p>
<h3 id="12.3-%E5%A4%9A%E7%8A%B6%E6%80%81%E7%9A%84%E8%BF%AD%E4%BB%A3%E5%99%A8" tabindex="-1">12.3 å¤šçŠ¶æ€çš„è¿­ä»£å™¨</h3>
<ol>
<li>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œ<strong>è¿­ä»£å™¨éœ€è¦ä¿å­˜å¤šä¸ªçŠ¶æ€ä¿¡æ¯è€Œä¸æ˜¯ç®€å•çš„çŠ¶æ€å¸¸é‡å’Œæ§åˆ¶å˜é‡</strong>ï¼Œæœ€<strong>ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨é—­åŒ…</strong>ï¼Œ<strong>è¿˜æœ‰ä¸€ç§æ–¹æ³•</strong>å°±æ˜¯å°†æ‰€æœ‰çš„çŠ¶æ€<strong>ä¿¡æ¯å°è£…åˆ° table å†…</strong>ï¼Œå°† table <strong>ä½œä¸ºè¿­ä»£å™¨çš„çŠ¶æ€å¸¸é‡</strong>ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹å¯ä»¥å°†æ‰€æœ‰çš„ä¿¡æ¯å­˜æ”¾åœ¨ table å†…ï¼Œ<strong>æ‰€ä»¥è¿­ä»£å‡½æ•°é€šå¸¸ä¸éœ€è¦ç¬¬äºŒä¸ªå‚æ•°</strong>ã€‚</li>
<li>åˆ›å»ºè‡ªå·±çš„è¿­ä»£å™¨</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">array = &#123;<span class="string">&quot;Google&quot;</span>, <span class="string">&quot;Runoob&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">elementIterator</span> <span class="params">(collection)</span></span></span><br><span class="line">   <span class="keyword">local</span> index = <span class="number">0</span></span><br><span class="line">   <span class="keyword">local</span> count = #collection</span><br><span class="line">   <span class="comment">-- é—­åŒ…å‡½æ•°</span></span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">      index = index + <span class="number">1</span></span><br><span class="line">      <span class="keyword">if</span> index &lt;= count</span><br><span class="line">      <span class="keyword">then</span></span><br><span class="line">         <span class="comment">--  è¿”å›è¿­ä»£å™¨çš„å½“å‰å…ƒç´ </span></span><br><span class="line">         <span class="keyword">return</span> collection[index]</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> element <span class="keyword">in</span> elementIterator(array)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   <span class="built_in">print</span>(element)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">Google</span></span><br><span class="line"><span class="comment">Runoob    </span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<strong>elementIterator å†…ä½¿ç”¨äº†é—­åŒ…å‡½æ•°ï¼Œå®ç°è®¡ç®—é›†åˆå¤§å°å¹¶è¾“å‡ºå„ä¸ªå…ƒç´ </strong>ã€‚</p>
<h1 id="%E5%8D%81%E4%B8%89-table%EF%BC%88%E8%A1%A8%EF%BC%89%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">åä¸‰ tableï¼ˆè¡¨ï¼‰ï¼ˆâ­ï¼‰</h1>
<h3 id="13.1-%E6%A6%82%E8%BF%B0" tabindex="-1">13.1 æ¦‚è¿°</h3>
<ol>
<li>
<p>table æ˜¯ Lua çš„<strong>ä¸€ç§æ•°æ®ç»“æ„ç”¨æ¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸åŒçš„æ•°æ®ç±»å‹</strong>ï¼Œå¦‚ï¼š<strong>æ•°ç»„ã€å­—å…¸</strong>ç­‰ã€‚</p>
</li>
<li>
<p>Lua table <strong>ä½¿ç”¨å…³è”å‹æ•°ç»„</strong>ï¼Œä½ å¯ä»¥<strong>ç”¨ä»»æ„ç±»å‹çš„å€¼æ¥ä½œæ•°ç»„çš„ç´¢å¼•</strong>ï¼Œä½†è¿™ä¸ªå€¼<strong>ä¸èƒ½æ˜¯ nil</strong>ã€‚</p>
</li>
<li>
<p>Lua table æ˜¯<strong>ä¸å›ºå®šå¤§å°çš„</strong>ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚</p>
</li>
<li>
<p>Luaä¹Ÿæ˜¯ <strong>é€šè¿‡tableæ¥è§£å†³æ¨¡å—ï¼ˆmoduleï¼‰ã€åŒ…ï¼ˆpackageï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰</strong> çš„ã€‚ ä¾‹å¦‚string.formatè¡¨ç¤ºä½¿ç”¨&quot;format&quot;æ¥ç´¢å¼•table stringã€‚</p>
</li>
</ol>
<h3 id="13.2-%E8%A1%A8%EF%BC%88table%EF%BC%89%E7%9A%84%E6%9E%84%E9%80%A0" tabindex="-1">13.2 è¡¨ï¼ˆTableï¼‰çš„æ„é€ </h3>
<ol>
<li>æ„é€ å™¨æ˜¯åˆ›å»ºå’Œåˆå§‹åŒ–è¡¨çš„è¡¨è¾¾å¼ã€‚è¡¨æ˜¯Luaç‰¹æœ‰çš„åŠŸèƒ½å¼ºå¤§çš„ä¸œè¥¿ã€‚<strong>æœ€ç®€å•çš„æ„é€ å‡½æ•°æ˜¯{}</strong>ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºè¡¨ã€‚å¯ä»¥ç›´æ¥åˆå§‹åŒ–æ•°ç»„:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- åˆå§‹åŒ–è¡¨</span></span><br><span class="line">mytable = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŒ‡å®šå€¼</span></span><br><span class="line">mytable[<span class="number">1</span>]= <span class="string">&quot;Lua&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç§»é™¤å¼•ç”¨</span></span><br><span class="line">mytable = <span class="literal">nil</span></span><br><span class="line"><span class="comment">-- lua åƒåœ¾å›æ”¶ä¼šé‡Šæ”¾å†…å­˜</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>å½“æˆ‘ä»¬ä¸º <strong>table a å¹¶è®¾ç½®å…ƒç´ ï¼Œç„¶åå°† a èµ‹å€¼ç»™ bï¼Œåˆ™ a ä¸ b éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜</strong>ã€‚å¦‚æœ <strong>a è®¾ç½®ä¸º nil ï¼Œåˆ™ b åŒæ ·èƒ½è®¿é—® table çš„å…ƒç´ </strong>ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šçš„å˜é‡æŒ‡å‘aï¼ŒLuaçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šæ¸…ç†ç›¸å¯¹åº”çš„å†…å­˜ã€‚<br>
ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†ä»¥ä¸Šçš„æè¿°æƒ…å†µï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ç®€å•çš„ table</span></span><br><span class="line">mytable = &#123;&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mytable çš„ç±»å‹æ˜¯ &quot;</span>,<span class="built_in">type</span>(mytable))</span><br><span class="line"></span><br><span class="line">mytable[<span class="number">1</span>]= <span class="string">&quot;Lua&quot;</span></span><br><span class="line">mytable[<span class="string">&quot;wow&quot;</span>] = <span class="string">&quot;ä¿®æ”¹å‰&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mytable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯ &quot;</span>, mytable[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ &quot;</span>, mytable[<span class="string">&quot;wow&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">-- alternatetableå’Œmytableçš„æ˜¯æŒ‡åŒä¸€ä¸ª table</span></span><br><span class="line">alternatetable = mytable</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;alternatetable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯ &quot;</span>, alternatetable[<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;alternatetable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ &quot;</span>, alternatetable[<span class="string">&quot;wow&quot;</span>])</span><br><span class="line"></span><br><span class="line">alternatetable[<span class="string">&quot;wow&quot;</span>] = <span class="string">&quot;ä¿®æ”¹å&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ &quot;</span>, mytable[<span class="string">&quot;wow&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">-- é‡Šæ”¾å˜é‡</span></span><br><span class="line">alternatetable = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;alternatetable æ˜¯ &quot;</span>, alternatetable)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- mytable ä»ç„¶å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ &quot;</span>, mytable[<span class="string">&quot;wow&quot;</span>])</span><br><span class="line"></span><br><span class="line">mytable = <span class="literal">nil</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mytable æ˜¯ &quot;</span>, mytable)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">mytable çš„ç±»å‹æ˜¯        table</span></span><br><span class="line"><span class="comment">mytable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯       Lua</span></span><br><span class="line"><span class="comment">mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯     ä¿®æ”¹å‰</span></span><br><span class="line"><span class="comment">alternatetable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯        Lua</span></span><br><span class="line"><span class="comment">alternatetable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯      ä¿®æ”¹å‰</span></span><br><span class="line"><span class="comment">mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯     ä¿®æ”¹å</span></span><br><span class="line"><span class="comment">alternatetable æ˜¯       nil</span></span><br><span class="line"><span class="comment">mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯     ä¿®æ”¹å</span></span><br><span class="line"><span class="comment">mytable æ˜¯      nil</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    --]]</span></span><br></pre></td></tr></table></figure>
<h3 id="13.3-table%E6%93%8D%E4%BD%9C" tabindex="-1">13.3 Tableæ“ä½œ</h3>
<ol>
<li>å¸¸ç”¨æ–¹æ³•</li>
</ol>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>æ–¹æ³• &amp; ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><strong>table.concat (table [, sep [, start [, end]]])</strong><br>concatæ˜¯concatenate(è¿é”, è¿æ¥)çš„ç¼©å†™. table.concat()å‡½æ•°åˆ—å‡ºå‚æ•°ä¸­<strong>æŒ‡å®štableçš„æ•°ç»„éƒ¨åˆ†ä»startä½ç½®åˆ°endä½ç½®çš„æ‰€æœ‰å…ƒç´ , å…ƒç´ é—´ä»¥æŒ‡å®šçš„åˆ†éš”ç¬¦(sep)éš”å¼€</strong>ã€‚</td>
</tr>
<tr>
<td>2</td>
<td><strong>table.insert (table, [pos,] value)</strong><br>åœ¨tableçš„æ•°ç»„éƒ¨åˆ†<strong>æŒ‡å®šä½ç½®(pos)æ’å…¥å€¼ä¸ºvalueçš„ä¸€ä¸ªå…ƒç´ </strong>. poså‚æ•°å¯é€‰, é»˜è®¤ä¸ºæ•°ç»„éƒ¨åˆ†æœ«å°¾.</td>
</tr>
<tr>
<td>3</td>
<td><strong>table.maxn (table)</strong><br>æŒ‡å®štableä¸­<strong>æ‰€æœ‰æ­£æ•°keyå€¼ä¸­æœ€å¤§çš„keyå€¼</strong>. å¦‚æœ<strong>ä¸å­˜åœ¨</strong>keyå€¼ä¸ºæ­£æ•°çš„å…ƒç´ , <strong>åˆ™è¿”å›0</strong>ã€‚(<strong>Lua5.2ä¹‹åè¯¥æ–¹æ³•å·²ç»ä¸å­˜åœ¨äº†</strong>,æœ¬æ–‡ä½¿ç”¨äº†è‡ªå®šä¹‰å‡½æ•°å®ç°)</td>
</tr>
<tr>
<td>4</td>
<td><strong>table.remove (table [, pos])</strong><br><strong>è¿”å›tableæ•°ç»„éƒ¨åˆ†ä½äºposä½ç½®çš„å…ƒç´ </strong>. å…¶åçš„å…ƒç´ ä¼šè¢«å‰ç§». <strong>poså‚æ•°å¯é€‰, é»˜è®¤ä¸ºtableé•¿åº¦, å³ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ èµ·</strong>ã€‚</td>
</tr>
<tr>
<td>5</td>
<td><strong>table.sort (table [, comp])</strong><br>å¯¹ç»™å®šçš„tableè¿›è¡Œ<strong>å‡åºæ’åº</strong>ã€‚</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>Tableè¿æ¥<br>
ä½¿ç”¨ concat() è¾“å‡ºä¸€ä¸ªåˆ—è¡¨ä¸­å…ƒç´ è¿æ¥æˆçš„å­—ç¬¦ä¸²:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">fruits = &#123;<span class="string">&quot;banana&quot;</span>,<span class="string">&quot;orange&quot;</span>,<span class="string">&quot;apple&quot;</span>&#125;</span><br><span class="line"><span class="comment">-- è¿”å› table è¿æ¥åçš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿æ¥åçš„å­—ç¬¦ä¸² &quot;</span>,<span class="built_in">table</span>.<span class="built_in">concat</span>(fruits))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŒ‡å®šè¿æ¥å­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿æ¥åçš„å­—ç¬¦ä¸² &quot;</span>,<span class="built_in">table</span>.<span class="built_in">concat</span>(fruits,<span class="string">&quot;, &quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŒ‡å®šç´¢å¼•æ¥è¿æ¥ table</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿æ¥åçš„å­—ç¬¦ä¸² &quot;</span>,<span class="built_in">table</span>.<span class="built_in">concat</span>(fruits,<span class="string">&quot;, &quot;</span>, <span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">è¿æ¥åçš„å­—ç¬¦ä¸²     bananaorangeapple</span></span><br><span class="line"><span class="comment">è¿æ¥åçš„å­—ç¬¦ä¸²     banana, orange, apple</span></span><br><span class="line"><span class="comment">è¿æ¥åçš„å­—ç¬¦ä¸²     orange, apple</span></span><br><span class="line"><span class="comment">    --]]</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æ’å…¥å’Œç§»é™¤</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">fruits = &#123;<span class="string">&quot;banana&quot;</span>,<span class="string">&quot;orange&quot;</span>,<span class="string">&quot;apple&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœ¨æœ«å°¾æ’å…¥</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(fruits,<span class="string">&quot;mango&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç´¢å¼•ä¸º 4 çš„å…ƒç´ ä¸º &quot;</span>,fruits[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœ¨ç´¢å¼•ä¸º 2 çš„é”®å¤„æ’å…¥</span></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">insert</span>(fruits,<span class="number">2</span>,<span class="string">&quot;grapes&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç´¢å¼•ä¸º 2 çš„å…ƒç´ ä¸º &quot;</span>,fruits[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æœ€åä¸€ä¸ªå…ƒç´ ä¸º &quot;</span>,fruits[<span class="number">5</span>])</span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">remove</span>(fruits)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç§»é™¤åæœ€åä¸€ä¸ªå…ƒç´ ä¸º &quot;</span>,fruits[<span class="number">5</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸º 4 çš„å…ƒç´ ä¸º     mango</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸º 2 çš„å…ƒç´ ä¸º     grapes</span></span><br><span class="line"><span class="comment">æœ€åä¸€ä¸ªå…ƒç´ ä¸º     mango</span></span><br><span class="line"><span class="comment">ç§»é™¤åæœ€åä¸€ä¸ªå…ƒç´ ä¸º     nil</span></span><br><span class="line"><span class="comment">    --]]</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>Tableæ’åº<br>
ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº† sort() æ–¹æ³•çš„ä½¿ç”¨ï¼Œç”¨äºå¯¹ Table è¿›è¡Œæ’åºï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">fruits = &#123;<span class="string">&quot;banana&quot;</span>,<span class="string">&quot;orange&quot;</span>,<span class="string">&quot;apple&quot;</span>,<span class="string">&quot;grapes&quot;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ’åºå‰&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(fruits) <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">table</span>.<span class="built_in">sort</span>(fruits)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ’åºå&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(fruits) <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="%E5%8D%81%E5%9B%9B-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">åå›› æ¨¡å—ä¸åŒ…ï¼ˆâ­ï¼‰</h1>
<h3 id="14.1-%E6%A6%82%E8%BF%B0%E5%8F%8A%E5%AE%9A%E4%B9%89" tabindex="-1">14.1 æ¦‚è¿°åŠå®šä¹‰</h3>
<ol>
<li>
<p><strong>æ¨¡å—ç±»ä¼¼äºä¸€ä¸ªå°è£…åº“</strong>ï¼Œä» Lua 5.1 å¼€å§‹ï¼ŒLua åŠ å…¥äº†æ ‡å‡†çš„æ¨¡å—ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥æŠŠä¸€äº›<strong>å…¬ç”¨çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œ</strong>ï¼Œ<strong>ä»¥ API æ¥å£çš„å½¢å¼åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨</strong>ï¼Œæœ‰åˆ©äºä»£ç çš„é‡ç”¨å’Œé™ä½ä»£ç è€¦åˆåº¦</p>
</li>
<li>
<p><strong>Lua çš„æ¨¡å—æ˜¯ç”±å˜é‡ã€å‡½æ•°ç­‰å·²çŸ¥å…ƒç´ ç»„æˆçš„ table</strong>ï¼Œå› æ­¤<strong>åˆ›å»ºä¸€ä¸ªæ¨¡å—</strong>å¾ˆç®€å•ï¼Œ<strong>å°±æ˜¯åˆ›å»ºä¸€ä¸ª table</strong>ï¼Œç„¶åæŠŠéœ€è¦å¯¼å‡ºçš„å¸¸é‡ã€å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ª table å°±è¡Œã€‚ä»¥ä¸‹ä¸ºåˆ›å»ºè‡ªå®šä¹‰æ¨¡å— module.luaï¼Œæ–‡ä»¶ä»£ç æ ¼å¼å¦‚ä¸‹ï¼š</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ–‡ä»¶åä¸º module.lua</span></span><br><span class="line"><span class="comment">-- å®šä¹‰ä¸€ä¸ªåä¸º module çš„æ¨¡å—</span></span><br><span class="line"><span class="built_in">module</span> = &#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- å®šä¹‰ä¸€ä¸ªå¸¸é‡</span></span><br><span class="line"><span class="built_in">module</span>.constant = <span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªå¸¸é‡&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- å®šä¹‰ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">module.func1</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªå…¬æœ‰å‡½æ•°ï¼\n&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">func2</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">module.func3</span><span class="params">()</span></span></span><br><span class="line">    func2()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">return</span> <span class="built_in">module</span></span><br></pre></td></tr></table></figure>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œæ¨¡å—çš„ç»“æ„å°±æ˜¯ä¸€ä¸ª table çš„ç»“æ„ï¼Œå› æ­¤å¯ä»¥<strong>åƒæ“ä½œè°ƒç”¨ table é‡Œçš„å…ƒç´ é‚£æ ·æ¥æ“ä½œè°ƒç”¨æ¨¡å—é‡Œçš„å¸¸é‡æˆ–å‡½æ•°</strong>ã€‚</p>
<p><strong>ä¸Šé¢çš„ func2</strong> å£°æ˜ä¸ºç¨‹åºå—çš„å±€éƒ¨å˜é‡ï¼Œå³<strong>è¡¨ç¤ºä¸€ä¸ªç§æœ‰å‡½æ•°</strong>ï¼Œå› æ­¤æ˜¯ä¸èƒ½ä»å¤–éƒ¨è®¿é—®æ¨¡å—é‡Œçš„è¿™ä¸ªç§æœ‰å‡½æ•°ï¼Œ<strong>å¿…é¡»é€šè¿‡æ¨¡å—é‡Œçš„å…¬æœ‰å‡½æ•°æ¥è°ƒç”¨</strong>.</p>
<h3 id="14.2-%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9D%97%EF%BC%88require%E5%87%BD%E6%95%B0%EF%BC%89" tabindex="-1">14.2 åŠ è½½æ¨¡å—ï¼ˆrequireå‡½æ•°ï¼‰</h3>
<ol>
<li>Luaæä¾›äº†ä¸€ä¸ªåä¸º<strong>requireçš„å‡½æ•°ç”¨æ¥åŠ è½½æ¨¡å—</strong>ã€‚è¦åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œåªéœ€è¦ç®€å•åœ°è°ƒç”¨å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼š</li>
<li>æ‰§è¡Œ <strong>require åä¼šè¿”å›ä¸€ä¸ªç”±æ¨¡å—å¸¸é‡æˆ–å‡½æ•°ç»„æˆçš„ table</strong>ï¼Œå¹¶ä¸”<strong>è¿˜ä¼šå®šä¹‰ä¸€ä¸ªåŒ…å«è¯¥table çš„å…¨å±€å˜é‡</strong>ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- test_module.lua æ–‡ä»¶</span></span><br><span class="line"><span class="comment">-- module æ¨¡å—ä¸ºä¸Šæ–‡æåˆ°åˆ° module.lua</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;module&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">module</span>.constant)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">module</span>.func3()</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">è¿™æ˜¯ä¸€ä¸ªå¸¸é‡</span></span><br><span class="line"><span class="comment">è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼</span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ç»™åŠ è½½çš„æ¨¡å—å®šä¹‰ä¸€ä¸ªåˆ«åå˜é‡ï¼Œæ–¹ä¾¿è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- test_module2.lua æ–‡ä»¶</span></span><br><span class="line"><span class="comment">-- module æ¨¡å—ä¸ºä¸Šæ–‡æåˆ°åˆ° module.lua</span></span><br><span class="line"><span class="comment">-- åˆ«åå˜é‡ m</span></span><br><span class="line"><span class="keyword">local</span> m = <span class="built_in">require</span>(<span class="string">&quot;module&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(m.constant)</span><br><span class="line"> </span><br><span class="line">m.func3()</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>åŠ è½½æœºåˆ¶ï¼ˆâ­ï¼‰</strong></li>
</ol>
<ul>
<li>
<p>å¯¹äº<strong>è‡ªå®šä¹‰çš„æ¨¡å—</strong>ï¼Œæ¨¡å—æ–‡ä»¶<strong>ä¸æ˜¯æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ç›®å½•éƒ½è¡Œ</strong>ï¼Œå‡½æ•° require æœ‰å®ƒè‡ªå·±çš„æ–‡ä»¶è·¯å¾„åŠ è½½ç­–ç•¥ï¼Œå®ƒä¼šå°è¯•ä» Lua æ–‡ä»¶æˆ– C ç¨‹åºåº“ä¸­åŠ è½½æ¨¡å—ã€‚</p>
</li>
<li>
<p><strong>require ç”¨äºæœç´¢ Lua æ–‡ä»¶çš„è·¯å¾„æ˜¯å­˜æ”¾åœ¨å…¨å±€å˜é‡ package.path</strong> ä¸­ï¼Œå½“ <strong>Lua å¯åŠ¨å</strong>ï¼Œä¼š<strong>ä»¥ç¯å¢ƒå˜é‡ LUA_PATH çš„å€¼æ¥åˆå§‹è¿™ä¸ªç¯å¢ƒå˜é‡</strong>ã€‚å¦‚æœ<strong>æ²¡æœ‰æ‰¾åˆ°è¯¥ç¯å¢ƒå˜é‡</strong>ï¼Œ<strong>åˆ™ä½¿ç”¨ä¸€ä¸ªç¼–è¯‘æ—¶å®šä¹‰çš„é»˜è®¤è·¯å¾„æ¥åˆå§‹åŒ–</strong>ã€‚</p>
</li>
<li>
<p>å½“ç„¶ï¼Œ<strong>å¦‚æœæ²¡æœ‰ LUA_PATH è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¾ç½®ï¼Œåœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹æ‰“å¼€ .profile æ–‡ä»¶</strong>ï¼ˆ<strong>æ²¡æœ‰åˆ™åˆ›å»ºï¼Œæ‰“å¼€ .bashrc æ–‡ä»¶ä¹Ÿå¯ä»¥</strong>ï¼‰ï¼Œä¾‹å¦‚æŠŠ <strong>â€œ~/lua/â€ è·¯å¾„åŠ å…¥ LUA_PATH ç¯å¢ƒå˜é‡é‡Œï¼š</strong></p>
</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">#LUA_PATH</span><br><span class="line">export LUA_PATH=<span class="string">&quot;~/lua/?.lua;;&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><strong>æ–‡ä»¶è·¯å¾„ä»¥ â€œ;â€ å·åˆ†éš”</strong>ï¼Œæœ€åçš„ 2 ä¸ª â€œ;;â€ è¡¨ç¤ºæ–°åŠ çš„è·¯å¾„åé¢åŠ ä¸ŠåŸæ¥çš„é»˜è®¤è·¯å¾„ã€‚</p>
</li>
<li>
<p>æ¥ç€ï¼Œ<strong>æ›´æ–°ç¯å¢ƒå˜é‡å‚æ•°</strong>ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆã€‚</p>
</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™æ—¶å‡è®¾ package.path çš„å€¼æ˜¯ï¼š</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">/Users/dengjoe/lua/?.lua;./?.lua;/usr/<span class="keyword">local</span>/share/lua/<span class="number">5.1</span>/?.lua;/usr/<span class="keyword">local</span>/share/lua/<span class="number">5.1</span>/?/init.lua;/usr/<span class="keyword">local</span>/lib/lua/<span class="number">5.1</span>/?.lua;/usr/<span class="keyword">local</span>/lib/lua/<span class="number">5.1</span>/?/init.lua</span><br></pre></td></tr></table></figure>
<ul>
<li>é‚£ä¹ˆè°ƒç”¨ require(â€œmoduleâ€) æ—¶å°±ä¼šå°è¯•æ‰“å¼€ä»¥ä¸‹æ–‡ä»¶ç›®å½•å»æœç´¢ç›®æ ‡ã€‚</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">/Users/dengjoe/lua/<span class="built_in">module</span>.lua;</span><br><span class="line">./<span class="built_in">module</span>.lua</span><br><span class="line">/usr/<span class="keyword">local</span>/share/lua/<span class="number">5.1</span>/<span class="built_in">module</span>.lua</span><br><span class="line">/usr/<span class="keyword">local</span>/share/lua/<span class="number">5.1</span>/<span class="built_in">module</span>/init.lua</span><br><span class="line">/usr/<span class="keyword">local</span>/lib/lua/<span class="number">5.1</span>/<span class="built_in">module</span>.lua</span><br><span class="line">/usr/<span class="keyword">local</span>/lib/lua/<span class="number">5.1</span>/<span class="built_in">module</span>/init.lua</span><br></pre></td></tr></table></figure>
<h3 id="14.3-c%E5%8C%85" tabindex="-1">14.3 CåŒ…</h3>
<ol>
<li>
<p>Luaå’ŒCæ˜¯å¾ˆå®¹æ˜“ç»“åˆçš„ï¼Œä½¿ç”¨ C ä¸º Lua å†™åŒ…ã€‚</p>
</li>
<li>
<p>ä¸Luaä¸­å†™åŒ…ä¸åŒï¼Œ<strong>CåŒ…åœ¨ä½¿ç”¨ä»¥å‰å¿…é¡»é¦–å…ˆåŠ è½½å¹¶è¿æ¥</strong>ï¼Œåœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­æœ€å®¹æ˜“çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡åŠ¨æ€è¿æ¥åº“æœºåˆ¶ã€‚</p>
</li>
<li>
<p>Luaåœ¨ä¸€ä¸ªå«<strong>loadlibçš„å‡½æ•°å†…æä¾›äº†æ‰€æœ‰çš„åŠ¨æ€è¿æ¥çš„åŠŸèƒ½</strong>ã€‚è¿™ä¸ªå‡½æ•°æœ‰<strong>ä¸¤ä¸ªå‚æ•°:åº“çš„ç»å¯¹è·¯å¾„å’Œåˆå§‹åŒ–å‡½æ•°</strong>ã€‚æ‰€ä»¥å…¸å‹çš„è°ƒç”¨çš„ä¾‹å­å¦‚ä¸‹:</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">path</span> = <span class="string">&quot;/usr/local/lua/lib/libluasocket.so&quot;</span></span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">loadlib</span>(<span class="built_in">path</span>, <span class="string">&quot;luaopen_socket&quot;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>loadlib å‡½æ•°<strong>åŠ è½½æŒ‡å®šçš„åº“å¹¶ä¸”è¿æ¥åˆ° Lua</strong>ï¼Œç„¶è€Œå®ƒ<strong>å¹¶ä¸æ‰“å¼€åº“</strong>ï¼ˆä¹Ÿå°±æ˜¯è¯´<strong>æ²¡æœ‰è°ƒç”¨åˆå§‹åŒ–å‡½æ•°</strong>ï¼‰ï¼Œåä¹‹ä»–<strong>è¿”å›åˆå§‹åŒ–å‡½æ•°ä½œä¸º Lua çš„ä¸€ä¸ªå‡½æ•°</strong>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥<strong>ç›´æ¥åœ¨Luaä¸­è°ƒç”¨ä»–</strong>ã€‚</li>
<li>å¦‚æœåŠ è½½åŠ¨æ€åº“æˆ–è€…æŸ¥æ‰¾åˆå§‹åŒ–å‡½æ•°æ—¶<strong>å‡ºé”™</strong>ï¼Œ<strong>loadlib å°†è¿”å› nil å’Œé”™è¯¯ä¿¡æ¯</strong>ã€‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹å‰é¢ä¸€æ®µä»£ç ï¼Œä½¿å…¶<strong>æ£€æµ‹é”™è¯¯ç„¶åè°ƒç”¨åˆå§‹åŒ–å‡½æ•°</strong>ï¼š</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="built_in">path</span> = <span class="string">&quot;/usr/local/lua/lib/libluasocket.so&quot;</span></span><br><span class="line"><span class="comment">-- æˆ–è€… path = &quot;C:\\windows\\luasocket.dll&quot;ï¼Œè¿™æ˜¯ Window å¹³å°ä¸‹</span></span><br><span class="line"><span class="keyword">local</span> f = <span class="built_in">assert</span>(<span class="built_in">loadlib</span>(<span class="built_in">path</span>, <span class="string">&quot;luaopen_socket&quot;</span>))</span><br><span class="line">f()  <span class="comment">-- çœŸæ­£æ‰“å¼€åº“</span></span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æœŸæœ›äºŒè¿›åˆ¶çš„å‘å¸ƒåº“åŒ…å«ä¸€ä¸ªä¸å‰é¢ä»£ç æ®µç›¸ä¼¼çš„ stub æ–‡ä»¶ï¼Œå®‰è£…äºŒè¿›åˆ¶åº“çš„æ—¶å€™å¯ä»¥éšä¾¿æ”¾åœ¨æŸä¸ªç›®å½•ï¼Œåªéœ€è¦ä¿®æ”¹ stub æ–‡ä»¶å¯¹åº”äºŒè¿›åˆ¶åº“çš„å®é™…è·¯å¾„å³å¯ã€‚</p>
<p><strong>å°† stub æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•åŠ å…¥åˆ° LUA_PATHï¼Œè¿™æ ·è®¾å®šåå°±å¯ä»¥ä½¿ç”¨ require å‡½æ•°åŠ è½½ C åº“äº†</strong>ã€‚</p>
<h1 id="%E5%8D%81%E4%BA%94-%E5%85%83%E8%A1%A8(metatable)%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">åäº” å…ƒè¡¨(Metatable)ï¼ˆâ­ï¼‰</h1>
<h3 id="15.1-%E6%A6%82%E8%BF%B0" tabindex="-1">15.1 æ¦‚è¿°</h3>
<ol>
<li>
<p>åœ¨ Lua table ä¸­æˆ‘ä»¬å¯ä»¥è®¿é—®å¯¹åº”çš„ key æ¥å¾—åˆ° value å€¼ï¼Œä½†æ˜¯å´æ— æ³•å¯¹ä¸¤ä¸ª table è¿›è¡Œæ“ä½œ(æ¯”å¦‚ç›¸åŠ )ã€‚</p>
</li>
<li>
<p>å› æ­¤ <strong>Lua æä¾›äº†å…ƒè¡¨(Metatable)</strong>ï¼Œå…è®¸æˆ‘ä»¬æ”¹å˜ table çš„è¡Œä¸ºï¼Œæ¯ä¸ªè¡Œä¸ºå…³è”äº†å¯¹åº”çš„<strong>å…ƒæ–¹æ³•</strong>ã€‚<br>
ä¾‹å¦‚ï¼Œ<strong>ä½¿ç”¨å…ƒè¡¨æˆ‘ä»¬å¯ä»¥å®šä¹‰ Lua å¦‚ä½•è®¡ç®—ä¸¤ä¸ª table çš„ç›¸åŠ æ“ä½œ a+b</strong>ã€‚</p>
</li>
<li>
<p>å½“ Lua è¯•å›¾<strong>å¯¹ä¸¤ä¸ªè¡¨è¿›è¡Œç›¸åŠ </strong>æ—¶ï¼Œå…ˆ<strong>æ£€æŸ¥ä¸¤è€…ä¹‹ä¸€æ˜¯å¦æœ‰å…ƒè¡¨</strong>ï¼Œ<strong>ä¹‹åæ£€æŸ¥</strong>æ˜¯å¦æœ‰ä¸€ä¸ªå« <strong>__add çš„å­—æ®µ</strong>ï¼Œè‹¥<strong>æ‰¾åˆ°ï¼Œåˆ™è°ƒç”¨å¯¹åº”çš„å€¼</strong>ã€‚ <strong>__add ç­‰å³æ—¶å­—æ®µ</strong>ï¼Œå…¶å¯¹åº”çš„å€¼ï¼ˆ<strong>å¾€å¾€æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ˜¯ table</strong>ï¼‰å°±æ˜¯ <strong>â€œå…ƒæ–¹æ³•â€</strong> ã€‚<br>
æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„å‡½æ•°æ¥å¤„ç†å…ƒè¡¨ï¼ˆâ­ï¼‰ï¼š</p>
</li>
</ol>
<ul>
<li><strong>setmetatable(table,metatable)</strong>: å¯¹æŒ‡å®š table <strong>è®¾ç½®å…ƒè¡¨</strong>(metatable)ï¼Œ<strong>å¦‚æœ</strong>å…ƒè¡¨(metatable)ä¸­<strong>å­˜åœ¨ __metatable é”®å€¼</strong>ï¼Œsetmetatable <strong>ä¼šå¤±è´¥</strong>ã€‚</li>
<li><strong>getmetatable(table)</strong>: <strong>è¿”å›å¯¹è±¡çš„å…ƒè¡¨</strong>(metatable)ã€‚</li>
</ul>
<ol start="4">
<li>ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•å¯¹æŒ‡å®šçš„è¡¨è®¾ç½®å…ƒè¡¨ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mytable = &#123;&#125;                          <span class="comment">-- æ™®é€šè¡¨ </span></span><br><span class="line">mymetatable = &#123;&#125;                      <span class="comment">-- å…ƒè¡¨</span></span><br><span class="line"><span class="built_in">setmetatable</span>(mytable,mymetatable)     <span class="comment">-- æŠŠ mymetatable è®¾ä¸º mytable çš„å…ƒè¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--ä»¥ä¸Šä»£ç å†™æˆä¸€è¡Œ</span></span><br><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123;&#125;,&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="15.2-__index-%E5%85%83%E6%96%B9%E6%B3%95%EF%BC%88%E2%AD%90%E2%AD%90%E2%AD%90%EF%BC%89" tabindex="-1">15.2 __index å…ƒæ–¹æ³•ï¼ˆâ­â­â­ï¼‰</h3>
<ol>
<li>
<p><strong>è¿™æ˜¯ metatable æœ€å¸¸ç”¨çš„é”®</strong>ã€‚</p>
</li>
<li>
<p>å½“ä½ <strong>é€šè¿‡é”®æ¥è®¿é—®</strong> table çš„æ—¶å€™ï¼Œå¦‚æœ<strong>è¿™ä¸ªé”®æ²¡æœ‰å€¼</strong>ï¼Œé‚£ä¹ˆLuaå°±ä¼š<strong>å¯»æ‰¾è¯¥tableçš„metatable</strong>ï¼ˆå‡å®šæœ‰metatableï¼‰ä¸­çš„**__index é”®**ã€‚å¦‚æœ**__indexåŒ…å«ä¸€ä¸ªè¡¨æ ¼ï¼ŒLuaä¼šåœ¨è¡¨æ ¼ä¸­æŸ¥æ‰¾ç›¸åº”çš„é”®**ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨ lua å‘½ä»¤è¿›å…¥äº¤äº’æ¨¡å¼æŸ¥çœ‹ï¼š</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">$ lua</span><br><span class="line">Lua <span class="number">5.3</span><span class="number">.0</span>  Copyright (C) <span class="number">1994</span><span class="number">-2015</span> Lua.org, PUC-Rio</span><br><span class="line">&gt; other = &#123; foo = <span class="number">3</span> &#125; </span><br><span class="line">&gt; t = <span class="built_in">setmetatable</span>(&#123;&#125;, &#123; <span class="built_in">__index</span> = other &#125;) </span><br><span class="line">&gt; t.foo</span><br><span class="line"><span class="number">3</span></span><br><span class="line">&gt; t.bar</span><br><span class="line"><span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å¦‚æœ <strong>__indexåŒ…å«ä¸€ä¸ªå‡½æ•°çš„è¯ï¼ŒLuaå°±ä¼šè°ƒç”¨é‚£ä¸ªå‡½æ•°ï¼Œtableå’Œé”®ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°</strong>ã€‚</li>
</ol>
<p><strong>__index å…ƒæ–¹æ³•æŸ¥çœ‹è¡¨ä¸­å…ƒç´ æ˜¯å¦å­˜åœ¨</strong>ï¼Œå¦‚æœ<strong>ä¸å­˜åœ¨</strong>ï¼Œè¿”å›ç»“æœ<strong>ä¸º nil</strong>ï¼›å¦‚æœ<strong>å­˜åœ¨</strong>åˆ™<strong>ç”± __index è¿”å›ç»“æœ</strong>ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123;key1 = <span class="string">&quot;value1&quot;</span>&#125;, &#123;</span><br><span class="line">  <span class="built_in">__index</span> = <span class="function"><span class="keyword">function</span><span class="params">(mytable, key)</span></span></span><br><span class="line">    <span class="keyword">if</span> key == <span class="string">&quot;key2&quot;</span> <span class="keyword">then</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;metatablevalue&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(mytable.key1,mytable.key2)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">value1    metatablevalue  </span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å®ä¾‹è§£æï¼ˆâ­ï¼‰ï¼š</li>
</ol>
<ul>
<li>
<p>mytable è¡¨èµ‹å€¼ä¸º {key1 = â€œvalue1â€}ã€‚</p>
</li>
<li>
<p>mytable è®¾ç½®äº†å…ƒè¡¨ï¼Œå…ƒæ–¹æ³•ä¸º __indexã€‚</p>
</li>
<li>
<p>åœ¨mytableè¡¨ä¸­æŸ¥æ‰¾ key1ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œè¿”å›è¯¥å…ƒç´ ï¼Œæ‰¾ä¸åˆ°åˆ™ç»§ç»­ã€‚</p>
</li>
<li>
<p>åœ¨mytableè¡¨ä¸­æŸ¥æ‰¾ key2ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œè¿”å› metatablevalueï¼Œæ‰¾ä¸åˆ°åˆ™ç»§ç»­ã€‚</p>
</li>
<li>
<p>åˆ¤æ–­å…ƒè¡¨æœ‰æ²¡æœ‰__indexæ–¹æ³•ï¼Œå¦‚æœ__indexæ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è°ƒç”¨è¯¥å‡½æ•°ã€‚</p>
</li>
<li>
<p>å…ƒæ–¹æ³•ä¸­æŸ¥çœ‹æ˜¯å¦ä¼ å…¥ â€œkey2â€ é”®çš„å‚æ•°ï¼ˆmytable.key2å·²è®¾ç½®ï¼‰ï¼Œå¦‚æœä¼ å…¥ â€œkey2â€ å‚æ•°è¿”å› â€œmetatablevalueâ€ï¼Œå¦åˆ™è¿”å› mytable å¯¹åº”çš„é”®å€¼ã€‚</p>
</li>
</ul>
<p>5.æˆ‘ä»¬å¯ä»¥å°†ä»¥ä¸Šä»£ç ç®€å•å†™æˆï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123;key1 = <span class="string">&quot;value1&quot;</span>&#125;, &#123; <span class="built_in">__index</span> = &#123; key2 = <span class="string">&quot;metatablevalue&quot;</span> &#125; &#125;)</span><br><span class="line"><span class="built_in">print</span>(mytable.key1,mytable.key2)</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>æ€»ç»“ï¼ˆâ­ï¼‰</li>
</ol>
<p>Lua æŸ¥æ‰¾ä¸€ä¸ªè¡¨å…ƒç´ æ—¶çš„è§„åˆ™ï¼Œå…¶å®å°±æ˜¯å¦‚ä¸‹ 3 ä¸ªæ­¥éª¤:</p>
<ul>
<li><strong>åœ¨è¡¨ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œè¿”å›è¯¥å…ƒç´ ï¼Œæ‰¾ä¸åˆ°åˆ™ç»§ç»­</strong></li>
<li><strong>åˆ¤æ–­è¯¥è¡¨æ˜¯å¦æœ‰å…ƒè¡¨ï¼Œå¦‚æœæ²¡æœ‰å…ƒè¡¨ï¼Œè¿”å› nilï¼Œæœ‰å…ƒè¡¨åˆ™ç»§ç»­ã€‚</strong></li>
<li><strong>åˆ¤æ–­å…ƒè¡¨æœ‰æ²¡æœ‰ __index æ–¹æ³•ï¼Œ</strong>
<ul>
<li>å¦‚æœ __index æ–¹æ³•ä¸º <strong>nil</strong>ï¼Œåˆ™è¿”å›<strong>nil</strong>ï¼›</li>
<li>å¦‚æœ __index æ–¹æ³•æ˜¯ä¸€ä¸ª<strong>è¡¨</strong>ï¼Œåˆ™<strong>é‡å¤ 1ã€2ã€3</strong>ï¼›</li>
<li>å¦‚æœ __index æ–¹æ³•æ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œåˆ™è¿”å›<strong>è¯¥å‡½æ•°çš„è¿”å›å€¼</strong>ã€‚</li>
</ul>
</li>
</ul>
<h3 id="15.3-__newindex-%E5%85%83%E6%96%B9%E6%B3%95%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">15.3 __newindex å…ƒæ–¹æ³•ï¼ˆâ­ï¼‰</h3>
<ol>
<li><strong>__newindex å…ƒæ–¹æ³•ç”¨æ¥å¯¹è¡¨æ›´æ–°ï¼ˆèµ‹å€¼ä¿®æ”¹ï¼‰</strong>ï¼Œ<strong>__index</strong>åˆ™ç”¨æ¥<strong>å¯¹è¡¨è®¿é—®</strong> ã€‚</li>
<li>å½“ä½ ç»™è¡¨çš„ä¸€ä¸ª<strong>ç¼ºå°‘çš„ç´¢å¼•èµ‹å€¼</strong>ï¼Œè§£é‡Šå™¨å°±ä¼š<strong>æŸ¥æ‰¾å…ƒè¡¨çš„__newindex å…ƒæ–¹æ³•</strong>ï¼šå¦‚æœ<strong>å­˜åœ¨åˆ™è°ƒç”¨è¿™ä¸ªå‡½æ•°è€Œä¸è¿›è¡Œèµ‹å€¼æ“ä½œ</strong>ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mymetatable = &#123;&#125;</span><br><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123;key1 = <span class="string">&quot;value1&quot;</span>&#125;, &#123; <span class="built_in">__newindex</span> = mymetatable &#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(mytable.key1)</span><br><span class="line"></span><br><span class="line">mytable.newkey = <span class="string">&quot;æ–°å€¼2&quot;</span></span><br><span class="line"><span class="built_in">print</span>(mytable.newkey,mymetatable.newkey)</span><br><span class="line"></span><br><span class="line">mytable.key1 = <span class="string">&quot;æ–°å€¼1&quot;</span></span><br><span class="line"><span class="built_in">print</span>(mytable.key1,mymetatable.key1)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">value1</span></span><br><span class="line"><span class="comment">nil    æ–°å€¼2</span></span><br><span class="line"><span class="comment">æ–°å€¼1    nil</span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå®ä¾‹ä¸­è¡¨<strong>è®¾ç½®äº†å…ƒæ–¹æ³• __newindex</strong>ï¼Œåœ¨å¯¹æ–°ç´¢å¼•é”® <strong>ï¼ˆnewkeyï¼‰èµ‹å€¼</strong>æ—¶ï¼ˆmytable.newkey = â€œæ–°å€¼2â€ï¼‰ï¼Œ<strong>ä¼šè°ƒç”¨å…ƒæ–¹æ³•</strong>ï¼Œè€Œä¸è¿›è¡Œèµ‹å€¼ã€‚è€Œå¦‚æœå¯¹<strong>å·²å­˜åœ¨çš„ç´¢å¼•é”®ï¼ˆkey1ï¼‰</strong>ï¼Œåˆ™<strong>ä¼šè¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸è°ƒç”¨å…ƒæ–¹æ³•</strong> __newindexã€‚</p>
<h3 id="15.4-rawget%E5%92%8Crawset" tabindex="-1">15.4 rawgetå’Œrawset</h3>
<ol>
<li>rawget</li>
</ol>
<ul>
<li>ç»•å¼€__index åªè·å–è¡¨è‡ªèº«å±æ€§æœ‰æ²¡æœ‰ ï¼ˆä¸å…³å¿ƒå…ƒè¡¨çš„ï¼‰</li>
</ul>
<ol start="2">
<li>rawset</li>
</ol>
<ul>
<li>ç»•å¼€__newindex åªè®¾ç½®è¡¨è‡ªèº«å±æ€§ ï¼ˆä¸é‡å®šå‘åˆ°å…ƒè¡¨__newindexå¯¹åº”çš„è¡¨ï¼‰</li>
</ul>
<h3 id="15.5-%E8%BF%90%E7%AE%97%E5%85%83%E6%96%B9%E6%B3%95-%E4%B8%BA%E8%A1%A8%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C%E7%AC%A6" tabindex="-1">15.5 è¿ç®—å…ƒæ–¹æ³•-ä¸ºè¡¨æ·»åŠ æ“ä½œç¬¦</h3>
<ol>
<li>è¡¨ä¸­å¯¹åº”çš„æ“ä½œåˆ—è¡¨å¦‚ä¸‹ï¼š(æ³¨æ„ï¼š__æ˜¯ä¸¤ä¸ªä¸‹åˆ’çº¿)</li>
</ol>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>__add</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜+â€™.</td>
</tr>
<tr>
<td>__sub</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜-â€™.</td>
</tr>
<tr>
<td>__mul</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜*â€™.</td>
</tr>
<tr>
<td>__div</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜/â€™.</td>
</tr>
<tr>
<td>__mod</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜%â€™.</td>
</tr>
<tr>
<td>__unm</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜-â€™.</td>
</tr>
<tr>
<td>__concat</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜â€¦â€™.</td>
</tr>
<tr>
<td>__eq</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜==â€™.</td>
</tr>
<tr>
<td>__lt</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜&lt;â€™.</td>
</tr>
<tr>
<td>__le</td>
<td>å¯¹åº”çš„è¿ç®—ç¬¦ â€˜&lt;=â€™.</td>
</tr>
</tbody>
</table>
<ol start="2">
<li>ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†ä¸¤è¡¨ç›¸åŠ æ“ä½œï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è®¡ç®—è¡¨ä¸­æœ€å¤§å€¼ï¼Œtable.maxnåœ¨Lua5.2ä»¥ä¸Šç‰ˆæœ¬ä¸­å·²æ— æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="comment">-- è‡ªå®šä¹‰è®¡ç®—è¡¨ä¸­æœ€å¤§é”®å€¼å‡½æ•° table_maxnï¼Œå³è¿”å›è¡¨æœ€å¤§é”®å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">table_maxn</span><span class="params">(t)</span></span></span><br><span class="line">    <span class="keyword">local</span> mn = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> mn &lt; k <span class="keyword">then</span></span><br><span class="line">            mn = k</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> mn</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸¤è¡¨ç›¸åŠ æ“ä½œ</span></span><br><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;, &#123;</span><br><span class="line">  <span class="built_in">__add</span> = <span class="function"><span class="keyword">function</span><span class="params">(mytable, newtable)</span></span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span>, table_maxn(newtable) <span class="keyword">do</span></span><br><span class="line">      <span class="built_in">table</span>.<span class="built_in">insert</span>(mytable, table_maxn(mytable)+<span class="number">1</span>,newtable[i])</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> mytable</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">secondtable = &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line"></span><br><span class="line">mytable = mytable + secondtable</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">ipairs</span>(mytable) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k,v)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">1    1</span></span><br><span class="line"><span class="comment">2    2</span></span><br><span class="line"><span class="comment">3    3</span></span><br><span class="line"><span class="comment">4    4</span></span><br><span class="line"><span class="comment">5    5</span></span><br><span class="line"><span class="comment">6    6</span></span><br><span class="line"><span class="comment">--]]</span></span><br><span class="line"><span class="built_in">__add</span> é”®åŒ…å«åœ¨å…ƒè¡¨ä¸­ï¼Œå¹¶è¿›è¡Œç›¸åŠ æ“ä½œã€‚ </span><br></pre></td></tr></table></figure>
<h3 id="15.6-__call%E5%85%83%E6%96%B9%E6%B3%95" tabindex="-1">15.6 __callå…ƒæ–¹æ³•</h3>
<ol>
<li>__call å…ƒæ–¹æ³•åœ¨ <strong>Lua è°ƒç”¨ä¸€ä¸ªå€¼æ—¶è°ƒç”¨ï¼ˆå½“å­è¡¨åšä¸ºå‡½æ•°åå­—çš„å½¢å¼è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚mytable(newtable)ï¼Œä¼šè°ƒç”¨__callå‡½æ•°ï¼‰</strong>ã€‚ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†è®¡ç®—è¡¨ä¸­å…ƒç´ çš„å’Œï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è®¡ç®—è¡¨ä¸­æœ€å¤§å€¼ï¼Œtable.maxnåœ¨Lua5.2ä»¥ä¸Šç‰ˆæœ¬ä¸­å·²æ— æ³•ä½¿ç”¨</span></span><br><span class="line"><span class="comment">-- è‡ªå®šä¹‰è®¡ç®—è¡¨ä¸­æœ€å¤§é”®å€¼å‡½æ•° table_maxnï¼Œå³è®¡ç®—è¡¨çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">table_maxn</span><span class="params">(t)</span></span></span><br><span class="line">    <span class="keyword">local</span> mn = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> mn &lt; k <span class="keyword">then</span></span><br><span class="line">            mn = k</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> mn</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®šä¹‰å…ƒæ–¹æ³•__call</span></span><br><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123;<span class="number">10</span>&#125;, &#123;</span><br><span class="line">  <span class="built_in">__call</span> = <span class="function"><span class="keyword">function</span><span class="params">(mytable, newtable)</span></span></span><br><span class="line">        sum = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i = <span class="number">1</span>, table_maxn(mytable) <span class="keyword">do</span></span><br><span class="line">                sum = sum + mytable[i]</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">for</span> i = <span class="number">1</span>, table_maxn(newtable) <span class="keyword">do</span></span><br><span class="line">                sum = sum + newtable[i]</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">return</span> sum</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line">newtable = &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(mytable(newtable))</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">70</span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<h3 id="15.7-__tostring-%E5%85%83%E6%96%B9%E6%B3%95" tabindex="-1">15.7 __tostring å…ƒæ–¹æ³•</h3>
<ol>
<li>__tostring å…ƒæ–¹æ³•ç”¨äºä¿®æ”¹è¡¨çš„è¾“å‡ºè¡Œä¸ºã€‚ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬è‡ªå®šä¹‰äº†è¡¨çš„è¾“å‡ºå†…å®¹ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mytable = <span class="built_in">setmetatable</span>(&#123; <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span> &#125;, &#123;</span><br><span class="line">  <span class="built_in">__tostring</span> = <span class="function"><span class="keyword">function</span><span class="params">(mytable)</span></span></span><br><span class="line">    sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(mytable) <span class="keyword">do</span></span><br><span class="line">                sum = sum + v</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;è¡¨æ‰€æœ‰å…ƒç´ çš„å’Œä¸º &quot;</span> .. sum</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">print</span>(mytable)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">è¡¨æ‰€æœ‰å…ƒç´ çš„å’Œä¸º 60    </span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<h1 id="%E5%8D%81%E5%85%AD-%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F%EF%BC%88coroutine%EF%BC%89%EF%BC%88%E2%AD%90%E2%AD%90%E2%AD%90%EF%BC%89" tabindex="-1">åå…­ ååŒç¨‹åºï¼ˆcoroutineï¼‰ï¼ˆâ­â­â­ï¼‰</h1>
<h3 id="16.1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%8F%E5%90%8C%EF%BC%88coroutine%EF%BC%89" tabindex="-1">16.1 ä»€ä¹ˆæ˜¯ååŒï¼ˆcoroutineï¼‰</h3>
<ol>
<li>Lua ååŒç¨‹åº(coroutine)ä¸çº¿ç¨‹æ¯”è¾ƒç±»ä¼¼ï¼š<strong>æ‹¥æœ‰ç‹¬ç«‹çš„å †æ ˆï¼Œç‹¬ç«‹çš„å±€éƒ¨å˜é‡ï¼Œç‹¬ç«‹çš„æŒ‡ä»¤æŒ‡é’ˆï¼ŒåŒæ—¶åˆä¸å…¶å®ƒååŒç¨‹åºå…±äº«å…¨å±€å˜é‡å’Œå…¶å®ƒå¤§éƒ¨åˆ†ä¸œè¥¿</strong>ã€‚</li>
<li>ååŒç¨‹åºå¯ä»¥ç†è§£ä¸º<strong>ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹</strong>ï¼Œå¯ä»¥<strong>æš‚åœå’Œæ¢å¤å…¶æ‰§è¡Œ</strong>ï¼Œä»è€Œå…è®¸éæŠ¢å å¼çš„å¤šä»»åŠ¡å¤„ç†ã€‚</li>
<li>ååŒæ˜¯éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½†æ˜¯ç”¨èµ·æ¥ä¹Ÿå¾ˆå¤æ‚ã€‚</li>
</ol>
<h3 id="16.2-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95" tabindex="-1">16.2 åŸºæœ¬è¯­æ³•</h3>
<ol>
<li>
<p><strong>ååŒç¨‹åºç”± coroutine æ¨¡å—</strong>æä¾›æ”¯æŒã€‚</p>
</li>
<li>
<p>ä½¿ç”¨ååŒç¨‹åºï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨ <strong>coroutine.create åˆ›å»ºä¸€ä¸ªæ–°çš„ååŒç¨‹åºå¯¹è±¡</strong>ï¼Œå¹¶ä½¿ç”¨ <strong>coroutine.resume å¯åŠ¨å®ƒçš„æ‰§è¡Œ</strong>ã€‚ååŒç¨‹åºå¯ä»¥é€šè¿‡è°ƒç”¨ <strong>coroutine.yield æ¥ä¸»åŠ¨æš‚åœè‡ªå·±çš„æ‰§è¡Œ</strong>ï¼Œå¹¶å°†æ§åˆ¶æƒäº¤è¿˜ç»™è°ƒç”¨è€…ã€‚</p>
</li>
<li>
<p>å…·ä½“å‡½æ•°æ–¹æ³•</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>coroutine.create()</td>
<td><strong>åˆ›å»º coroutineï¼Œè¿”å› coroutine</strong>ï¼Œ å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“å’Œ resume é…åˆä½¿ç”¨çš„æ—¶å€™å°±å”¤é†’å‡½æ•°è°ƒç”¨</td>
</tr>
<tr>
<td>coroutine.resume()</td>
<td><strong>é‡å¯ coroutine</strong>ï¼Œå’Œ create é…åˆä½¿ç”¨ã€‚<strong>æ­£å¸¸ç»“æŸè¿”å›true+yieldçš„è¿”å›å€¼ï¼Œå¦åˆ™è¿”å›false+yieldçš„è¿”å›å€¼ï¼ˆä¸€èˆ¬å¯¹å·²ç»“æŸçš„åç¨‹resumeå°±ä¼šfalseï¼‰</strong>ã€‚<strong>è¿”å›å€¼æ˜¯yield()çš„å‚æ•°ã€‚</strong></td>
</tr>
<tr>
<td>coroutine.yield()</td>
<td><strong>æŒ‚èµ· coroutine</strong>ï¼Œå°† coroutine è®¾ç½®ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¿™ä¸ªå’Œ resume é…åˆä½¿ç”¨èƒ½æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ•ˆæœã€‚<strong>è¿”å›å€¼æ˜¯resumeè°ƒç”¨æ—¶ä¼ å…¥çš„å€¼</strong>ã€‚</td>
</tr>
<tr>
<td>coroutine.status()</td>
<td><strong>æŸ¥çœ‹ coroutine çš„çŠ¶æ€</strong><br>æ³¨ï¼šcoroutine çš„çŠ¶æ€æœ‰ä¸‰ç§ï¼šdeadï¼Œsuspendedï¼Œrunning(å·²ç»“æŸã€å·²æŒ‚èµ·ã€è¿è¡Œä¸­),å…·ä½“ä»€ä¹ˆæ—¶å€™æœ‰è¿™æ ·çš„çŠ¶æ€è¯·å‚è€ƒä¸‹é¢çš„ç¨‹åºã€‚</td>
</tr>
<tr>
<td>coroutine.wrap()</td>
<td><strong>åˆ›å»º coroutineï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¸€æ—¦ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±è¿›å…¥ coroutineï¼Œå’Œ create åŠŸèƒ½é‡å¤</strong></td>
</tr>
<tr>
<td>coroutine.running()</td>
<td><strong>è¿”å›æ­£åœ¨è·‘çš„ coroutine</strong>ï¼Œä¸€ä¸ª coroutine å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“ä½¿ç”¨runningçš„æ—¶å€™ï¼Œå°±æ˜¯<strong>è¿”å›ä¸€ä¸ª coroutine çš„çº¿ç¨‹å·</strong> + <strong>true/false</strong></td>
</tr>
</tbody>
</table>
<ol start="4">
<li>ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Lua ååŒç¨‹åºï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ååŒç¨‹åº foo å¼€å§‹æ‰§è¡Œ&quot;</span>)</span><br><span class="line">    <span class="keyword">local</span> value = <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(<span class="string">&quot;æš‚åœ foo çš„æ‰§è¡Œ&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ååŒç¨‹åº foo æ¢å¤æ‰§è¡Œï¼Œä¼ å…¥çš„å€¼ä¸º: &quot;</span> .. <span class="built_in">tostring</span>(value))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ååŒç¨‹åº foo ç»“æŸæ‰§è¡Œ&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºååŒç¨‹åº</span></span><br><span class="line"><span class="keyword">local</span> co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(foo)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¯åŠ¨ååŒç¨‹åº</span></span><br><span class="line"><span class="keyword">local</span> <span class="built_in">status</span>, result = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co)</span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment">-- è¾“å‡º: æš‚åœ foo çš„æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ¢å¤ååŒç¨‹åºçš„æ‰§è¡Œï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå€¼</span></span><br><span class="line"><span class="built_in">status</span>, result = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="number">42</span>)</span><br><span class="line"><span class="built_in">print</span>(result) <span class="comment">-- è¾“å‡º: ååŒç¨‹åº foo æ¢å¤æ‰§è¡Œï¼Œä¼ å…¥çš„å€¼ä¸º: 42</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œæˆ‘ä»¬<strong>å®šä¹‰äº†ä¸€ä¸ªåä¸º foo çš„å‡½æ•°ä½œä¸ºååŒç¨‹åº</strong>ã€‚åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬<strong>ä½¿ç”¨ coroutine.yield æš‚åœäº†ååŒç¨‹åºçš„æ‰§è¡Œï¼Œå¹¶è¿”å›äº†ä¸€ä¸ªå€¼</strong></p>
</li>
<li>
<p>åœ¨ä¸»ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <strong>coroutine.create åˆ›å»ºäº†ä¸€ä¸ªååŒç¨‹åºå¯¹è±¡</strong>ï¼Œå¹¶ä½¿ç”¨ <strong>coroutine.resume å¯åŠ¨äº†å®ƒçš„æ‰§è¡Œ</strong>ã€‚</p>
</li>
<li>
<p>åœ¨<strong>ç¬¬ä¸€æ¬¡è°ƒç”¨ coroutine.resume åï¼ŒååŒç¨‹åºæ‰§è¡Œåˆ° coroutine.yield å¤„æš‚åœ</strong>ï¼Œ<strong>å¹¶å°†å€¼è¿”å›ç»™ä¸»ç¨‹åº</strong>ã€‚ç„¶åï¼Œæˆ‘ä»¬<strong>å†æ¬¡è°ƒç”¨ coroutine.resumeï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå€¼ä½œä¸ºååŒç¨‹åºæ¢å¤æ‰§è¡Œæ—¶çš„å‚æ•°</strong>ã€‚</p>
</li>
</ul>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">ååŒç¨‹åº foo å¼€å§‹æ‰§è¡Œ</span><br><span class="line">æš‚åœ foo çš„æ‰§è¡Œ</span><br><span class="line">ååŒç¨‹åº foo æ¢å¤æ‰§è¡Œï¼Œä¼ å…¥çš„å€¼ä¸º: <span class="number">42</span></span><br><span class="line">ååŒç¨‹åº foo ç»“æŸæ‰§è¡Œ</span><br><span class="line"><span class="literal">nil</span></span><br></pre></td></tr></table></figure>
<h3 id="16.3-%E5%90%84%E4%B8%AA%E8%AF%AD%E6%B3%95%E7%9A%84%E7%94%A8%E6%B3%95%E5%AE%9E%E4%BE%8B" tabindex="-1">16.3 å„ä¸ªè¯­æ³•çš„ç”¨æ³•å®ä¾‹</h3>
<ol>
<li>å®ä¾‹1</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- coroutine_test.lua æ–‡ä»¶</span></span><br><span class="line"><span class="comment">-- åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ååŒç¨‹åºå¯¹è±¡ coï¼Œå…¶ä¸­ååŒç¨‹åºå‡½æ•°æ‰“å°ä¼ å…¥çš„å‚æ•° i</span></span><br><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">(i)</span></span></span><br><span class="line">        <span class="built_in">print</span>(i);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">-- ä½¿ç”¨ coroutine.resume å¯åŠ¨ååŒç¨‹åº co çš„æ‰§è¡Œï¼Œå¹¶ä¼ å…¥å‚æ•° 1ã€‚ååŒç¨‹åºå¼€å§‹æ‰§è¡Œï¼Œæ‰“å°è¾“å‡ºä¸º 1</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="number">1</span>)   <span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é€šè¿‡ coroutine.status æ£€æŸ¥ååŒç¨‹åº co çš„çŠ¶æ€ï¼Œè¾“å‡ºä¸º deadï¼Œè¡¨ç¤ºååŒç¨‹åºå·²ç»æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co))  <span class="comment">-- dead</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;----------&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨ coroutine.wrap åˆ›å»ºäº†ä¸€ä¸ªååŒç¨‹åºåŒ…è£…å™¨ï¼Œå°†ååŒç¨‹åºå‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªå¯ç›´æ¥è°ƒç”¨çš„å‡½æ•°å¯¹è±¡</span></span><br><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">wrap</span>(</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">(i)</span></span></span><br><span class="line">        <span class="built_in">print</span>(i);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line">co(<span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;----------&quot;</span>)</span><br><span class="line"><span class="comment">-- åˆ›å»ºäº†å¦ä¸€ä¸ªååŒç¨‹åºå¯¹è±¡ co2ï¼Œå…¶ä¸­çš„ååŒç¨‹åºå‡½æ•°é€šè¿‡å¾ªç¯æ‰“å°æ•°å­— 1 åˆ° 10ï¼Œåœ¨å¾ªç¯åˆ° 3 çš„æ—¶å€™è¾“å‡ºå½“å‰ååŒç¨‹åºçš„çŠ¶æ€å’Œæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹</span></span><br><span class="line">co2 = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(</span><br><span class="line">    <span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">        <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">print</span>(i)</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co2))  <span class="comment">--running</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">running</span>()) <span class="comment">--thread:XXXXXX</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="built_in">coroutine</span>.<span class="built_in">yield</span>()</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿ç»­è°ƒç”¨ coroutine.resume å¯åŠ¨ååŒç¨‹åº co2 çš„æ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co2) <span class="comment">--1</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co2) <span class="comment">--2</span></span><br><span class="line"><span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co2) <span class="comment">--3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- é€šè¿‡ coroutine.status æ£€æŸ¥ååŒç¨‹åº co2 çš„çŠ¶æ€ï¼Œè¾“å‡ºä¸º suspendedï¼Œè¡¨ç¤ºååŒç¨‹åºæš‚åœæ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">status</span>(co2))   <span class="comment">-- suspended</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">coroutine</span>.<span class="built_in">running</span>())</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;----------&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœä¸º</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line">dead</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment">----------</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="built_in">running</span></span><br><span class="line">thread: <span class="number">0x7fb801c05868</span>    <span class="literal">false</span></span><br><span class="line">suspended</span><br><span class="line">thread: <span class="number">0x7fb801c04c88</span>    <span class="literal">true</span></span><br><span class="line"><span class="comment">----------</span></span><br></pre></td></tr></table></figure>
<p>coroutine.runningå°±å¯ä»¥çœ‹å‡ºæ¥,<strong>coroutineåœ¨åº•å±‚å®ç°å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹</strong>ã€‚</p>
<p>å½“<strong>createä¸€ä¸ªcoroutineçš„æ—¶å€™å°±æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­æ³¨å†Œäº†ä¸€ä¸ªäº‹ä»¶</strong>ã€‚</p>
<p>å½“<strong>ä½¿ç”¨resumeè§¦å‘äº‹ä»¶çš„æ—¶å€™</strong>ï¼Œcreateçš„<strong>coroutineå‡½æ•°å°±è¢«æ‰§è¡Œäº†</strong>ï¼Œå½“<strong>é‡åˆ°yieldçš„æ—¶å€™å°±ä»£è¡¨æŒ‚èµ·å½“å‰çº¿ç¨‹</strong>ï¼Œ<strong>ç­‰å€™å†æ¬¡resumeè§¦å‘äº‹ä»¶</strong>ã€‚</p>
<ol start="2">
<li>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸€ä¸ªæ›´è¯¦ç»†çš„å®ä¾‹ï¼š</li>
</ol>
<figure class="highlight lua"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> <span class="params">(a)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;foo å‡½æ•°è¾“å‡º&quot;</span>, a)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(<span class="number">2</span> * a) <span class="comment">-- è¿”å›  2*a çš„å€¼</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">co = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(<span class="function"><span class="keyword">function</span> <span class="params">(a , b)</span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç¬¬ä¸€æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º&quot;</span>, a, b) <span class="comment">-- co-body 1 10</span></span><br><span class="line">    <span class="keyword">local</span> r = foo(a + <span class="number">1</span>)</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç¬¬äºŒæ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º&quot;</span>, r)</span><br><span class="line">    <span class="keyword">local</span> r, s = <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(a + b, a - b)  <span class="comment">-- aï¼Œbçš„å€¼ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ååŒç¨‹åºæ—¶ä¼ å…¥</span></span><br><span class="line">     </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç¬¬ä¸‰æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º&quot;</span>, r, s)</span><br><span class="line">    <span class="keyword">return</span> b, <span class="string">&quot;ç»“æŸååŒç¨‹åº&quot;</span>                   <span class="comment">-- bçš„å€¼ä¸ºç¬¬äºŒæ¬¡è°ƒç”¨ååŒç¨‹åºæ—¶ä¼ å…¥</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line">        </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;main&quot;</span>, <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="number">1</span>, <span class="number">10</span>)) <span class="comment">-- true, 4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;--åˆ†å‰²çº¿----&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;main&quot;</span>, <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="string">&quot;r&quot;</span>)) <span class="comment">-- true 11 -9</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---åˆ†å‰²çº¿---&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;main&quot;</span>, <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>)) <span class="comment">-- true 10 end</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---åˆ†å‰²çº¿---&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;main&quot;</span>, <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(co, <span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>)) <span class="comment">-- cannot resume dead coroutine</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;---åˆ†å‰²çº¿---&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º    1    10</span></span><br><span class="line"><span class="comment">foo å‡½æ•°è¾“å‡º    2</span></span><br><span class="line"><span class="comment">main    true    4</span></span><br><span class="line"><span class="comment">--åˆ†å‰²çº¿----</span></span><br><span class="line"><span class="comment">ç¬¬äºŒæ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º    r</span></span><br><span class="line"><span class="comment">main    true    11    -9</span></span><br><span class="line"><span class="comment">---åˆ†å‰²çº¿---</span></span><br><span class="line"><span class="comment">ç¬¬ä¸‰æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º    x    y</span></span><br><span class="line"><span class="comment">main    true    10    ç»“æŸååŒç¨‹åº</span></span><br><span class="line"><span class="comment">---åˆ†å‰²çº¿---</span></span><br><span class="line"><span class="comment">main    false    cannot resume dead coroutine</span></span><br><span class="line"><span class="comment">---åˆ†å‰²çº¿---</span></span><br><span class="line"><span class="comment">--]]</span></span><br></pre></td></tr></table></figure>
<p>å¯¹ä»¥ä¸Šç¨‹åºè¿›è¡Œè¯¦ç»†æµç¨‹è¯´æ˜ï¼ˆâ­â­â­ï¼‰:</p>
<ul>
<li>é¦–å…ˆæŒ‰æ­£å¸¸æµç¨‹èµ°åˆ°ç¬¬6è¡Œåˆ›å»ºåç¨‹ï¼Œä½†æ²¡æœ‰å¯åŠ¨</li>
<li>è¿è¡Œ<strong>17è¡Œ</strong>å¯åŠ¨åç¨‹coã€‚ä¼ å…¥å‚æ•°1ï¼Œ10ã€‚</li>
<li>æ­¤æ—¶<strong>6è¡Œ</strong>çš„åŒ¿åå‡½æ•°å‚æ•°aï¼Œbçš„å€¼ä¸º1ï¼Œ10</li>
<li>è¿è¡Œ<strong>7è¡Œ</strong> è¾“å‡º <strong><font color="red">ç¬¬ä¸€æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º    1    10</font></strong></li>
<li>è¿è¡Œ<strong>8è¡Œ</strong>æ‰§è¡Œå‡½æ•°1è¡Œfooï¼Œä¼ å…¥å‚æ•°a+1 (å³1+1 ä¸º2)</li>
<li>æ­¤æ—¶<strong>1è¡Œ</strong>çš„å‡½æ•°fooå‚æ•°açš„å€¼ä¸º2</li>
<li>è¿è¡Œ<strong>2è¡Œ</strong> è¾“å‡º <strong><font color="red">foo å‡½æ•°è¾“å‡º    2</font></strong></li>
<li>è¿è¡Œ<strong>3è¡Œ</strong> <strong>ä¸­æ–­åç¨‹</strong>ï¼Œæ­¤æ—¶è¿”å›ç»™<strong>17è¡Œ</strong>çš„coroutine.resume(co, 1, 10) è¿”å›å€¼ã€‚ è¿”å›å€¼æ„æˆä¸ºä¸¤éƒ¨åˆ†ï¼š
<ul>
<li>true(æ­£å¸¸ç»“æŸè¿”å›trueï¼Œ<strong>ä¸€èˆ¬å¯¹å·²ç»“æŸçš„åç¨‹resumeå°±ä¼šfalse</strong>)</li>
<li>3è¡Œä¸­coroutine.yield(2 * a)ä¸­çš„æ‰€æœ‰å‚æ•°ï¼Œè¿™é‡Œä¸º 2*a ï¼ˆå³ 2*2 ä¸º 4ï¼‰</li>
<li>æœ€ç»ˆè¿”å›å€¼ä¸º true, 4</li>
</ul>
</li>
<li>è¿”å›åˆ°<strong>17è¡Œ</strong> è¾“å‡º <strong><font color="red">main    true    4</font></strong></li>
<li>è¿è¡Œ<strong>18è¡Œ</strong> è¾“å‡º <strong><font color="red">â€“åˆ†å‰²çº¿----</font></strong></li>
<li>--------------------------------------------------------------------------------------------------------</li>
<li>è¿è¡Œ<strong>19è¡Œ</strong>å†æ¬¡å¯åŠ¨åç¨‹coï¼Œä¼ å…¥å‚æ•°â€œrâ€ï¼Œå¹¶ä»ä¸Šä¸€æ¬¡ç»ˆç«¯çš„ä½ç½®å¼€å§‹è¿è¡Œï¼Œå³<strong>3è¡Œ</strong></li>
<li>è¿è¡Œ<strong>3è¡Œ</strong> æ­¤æ—¶ <strong>coroutine.yield(2 * a)</strong> çš„å€¼<strong>ä¸ºå†æ¬¡å¯åŠ¨åç¨‹æ—¶ä¼ å…¥çš„å‚æ•°</strong>ï¼Œå³<strong>19è¡Œä¼ å…¥çš„å‚æ•° â€œrâ€</strong>
<ul>
<li><strong>å› æ­¤3è¡Œæ‰§è¡Œçš„ä»£ç ä¸º return â€œrâ€</strong></li>
</ul>
</li>
<li>è¿è¡Œ<strong>4è¡Œ</strong> end</li>
<li>è¿”å›<strong>8è¡Œ</strong> å¾—åˆ°fooï¼ˆa+1ï¼‰çš„è¿”å›å€¼ä¸º3è¡Œçš„è¿”å›å€¼ <strong>â€œrâ€</strong>,å¹¶èµ‹å€¼ç»™æœ¬åœ°å˜é‡r</li>
<li>è¿è¡Œ<strong>10è¡Œ</strong> è¾“å‡º <strong><font color="red">ç¬¬äºŒæ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º    r</font></strong></li>
<li>è¿è¡Œ<strong>11è¡Œ</strong> <strong>ä¸­æ–­åç¨‹</strong>ï¼Œæ­¤æ—¶è¿”å›ç»™<strong>19è¡Œ</strong> çš„coroutine.resume(co, 1, 10) è¿”å›å€¼.è¿”å›å€¼æ„æˆä¸ºï¼š
<ul>
<li>true(æ­£å¸¸ç»“æŸè¿”å›trueï¼Œ<strong>ä¸€èˆ¬å¯¹å·²ç»“æŸçš„åç¨‹resumeå°±ä¼šfalse</strong>)</li>
<li>coroutine.yield(a + b, a - b)ä¸­çš„æ‰€æœ‰å‚æ•°ï¼Œå³a + b, a - b -&gt; 1+10 , 1-10 -&gt; 11,-9 <strong>(aï¼Œbçš„å€¼ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ååŒç¨‹åºæ—¶ä¼ å…¥)</strong></li>
<li>æœ€ç»ˆè¿”å›å€¼ä¸º true, 11, -9</li>
</ul>
</li>
<li>è¿”å›<strong>19è¡Œ</strong> è¾“å‡º <strong><font color="red">main    true    11    -9</font></strong></li>
<li>è¿è¡Œ<strong>20è¡Œ</strong> è¾“å‡º <strong><font color="red">â€”åˆ†å‰²çº¿â€”</font></strong></li>
<li>--------------------------------------------------------------------------------------------------------</li>
<li>è¿è¡Œ<strong>21è¡Œ</strong> <strong>åŒç†19è¡Œ</strong>ï¼Œå†æ¬¡å¯åŠ¨åç¨‹coï¼Œä¼ å…¥å‚æ•°&quot;x&quot;, â€œyâ€ï¼Œå¹¶ä»ä¸Šä¸€æ¬¡ç»ˆç«¯çš„ä½ç½®å¼€å§‹è¿è¡Œï¼Œå³<strong>11è¡Œ</strong></li>
<li>è¿è¡Œ<strong>11è¡Œ</strong> æ­¤æ—¶ <strong>coroutine.yield(a + b, a - b)</strong> çš„å€¼<strong>ä¸ºå†æ¬¡å¯åŠ¨åç¨‹æ—¶ä¼ å…¥çš„å‚æ•°</strong>ï¼Œå³<strong>21è¡Œä¼ å…¥çš„å‚æ•° â€œxâ€, â€œyâ€</strong>
<ul>
<li><strong>å› æ­¤11è¡Œæ‰§è¡Œçš„ä»£ç ä¸º local r, s = â€œxâ€, â€œyâ€</strong></li>
</ul>
</li>
<li>è¿è¡Œ<strong>13è¡Œ</strong> è¾“å‡º <strong><font color="red">ç¬¬ä¸‰æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º    x    y</font></strong></li>
<li>è¿è¡Œ<strong>14è¡Œ</strong> è¿”å›åç¨‹è¿”å›å€¼ï¼Œæ„æˆä¸ºï¼š
<ul>
<li>true(æ­£å¸¸ç»“æŸè¿”å›trueï¼Œ<strong>ä¸€èˆ¬å¯¹å·²ç»“æŸçš„åç¨‹resumeå°±ä¼šfalse</strong>)</li>
<li>åç¨‹æ­£å¸¸è¿”å›å€¼ï¼Œå³<strong>b, â€œç»“æŸååŒç¨‹åºâ€</strong> ã€‚<strong>(aï¼Œbçš„å€¼ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ååŒç¨‹åºæ—¶ä¼ å…¥)</strong></li>
<li>æœ€ç»ˆè¿”å›å€¼ä¸º true, 10, â€œç»“æŸååŒç¨‹åºâ€</li>
</ul>
</li>
<li>è¿”å›<strong>21è¡Œ</strong> è¾“å‡º <strong><font color="red">main    true    10    ç»“æŸååŒç¨‹åº</font></strong></li>
<li>è¿è¡Œ<strong>22è¡Œ</strong> è¾“å‡º <strong><font color="red">â€”åˆ†å‰²çº¿â€”</font></strong></li>
<li>è¿è¡Œ<strong>23è¡Œ</strong> ç”±äºåç¨‹è¿è¡Œå®Œæˆï¼Œå› æ­¤å¯ç”¨åç¨‹ä¼šå¤±è´¥ã€‚è¾“å‡º <strong><font color="red">main    false    cannot resume dead coroutine</font></strong></li>
<li>è¿è¡Œ<strong>24è¡Œ</strong> è¾“å‡º <strong><font color="red">â€”åˆ†å‰²çº¿â€”</font></strong></li>
</ul>
<h3 id="16.4-%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98" tabindex="-1">16.4 ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</h3>
<ol>
<li>ä½¿ç”¨Luaçš„ååŒç¨‹åºæ¥å®Œæˆç”Ÿäº§è€…-æ¶ˆè´¹è€…è¿™ä¸€ç»å…¸é—®é¢˜ã€‚</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> newProductor</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">productor</span><span class="params">()</span></span></span><br><span class="line">     <span class="keyword">local</span> i = <span class="number">0</span></span><br><span class="line">     <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">          i = i + <span class="number">1</span></span><br><span class="line">          send(i)     <span class="comment">-- å°†ç”Ÿäº§çš„ç‰©å“å‘é€ç»™æ¶ˆè´¹è€…</span></span><br><span class="line">     <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">consumer</span><span class="params">()</span></span></span><br><span class="line">     <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">          <span class="keyword">local</span> i = receive()     <span class="comment">-- ä»ç”Ÿäº§è€…é‚£é‡Œå¾—åˆ°ç‰©å“</span></span><br><span class="line">          <span class="built_in">print</span>(i)</span><br><span class="line">     <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">receive</span><span class="params">()</span></span></span><br><span class="line">     <span class="keyword">local</span> <span class="built_in">status</span>, value = <span class="built_in">coroutine</span>.<span class="built_in">resume</span>(newProductor)</span><br><span class="line">     <span class="keyword">return</span> value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">(x)</span></span></span><br><span class="line">     <span class="built_in">coroutine</span>.<span class="built_in">yield</span>(x)     <span class="comment">-- xè¡¨ç¤ºéœ€è¦å‘é€çš„å€¼ï¼Œå€¼è¿”å›ä»¥åï¼Œå°±æŒ‚èµ·è¯¥ååŒç¨‹åº</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¯åŠ¨ç¨‹åº</span></span><br><span class="line">newProductor = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(productor)</span><br><span class="line">consumer()</span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">4</span></span><br><span class="line"><span class="comment">5</span></span><br><span class="line"><span class="comment">6</span></span><br><span class="line"><span class="comment">7</span></span><br><span class="line"><span class="comment">8</span></span><br><span class="line"><span class="comment">9</span></span><br><span class="line"><span class="comment">10</span></span><br><span class="line"><span class="comment">11</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">13</span></span><br><span class="line"><span class="comment">â€¦â€¦</span></span><br><span class="line"><span class="comment">--]]</span></span><br><span class="line"><span class="comment">-- å¯åŠ¨ç¨‹åº</span></span><br><span class="line">newProductor = <span class="built_in">coroutine</span>.<span class="built_in">create</span>(productor)</span><br><span class="line">consumer()</span><br></pre></td></tr></table></figure>
<h3 id="16.5-%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%8D%8F%E5%90%8C%E7%A8%8B%E5%BA%8F%E5%8C%BA%E5%88%AB" tabindex="-1">16.5 çº¿ç¨‹å’ŒååŒç¨‹åºåŒºåˆ«</h3>
<ol>
<li>
<p>çº¿ç¨‹ä¸ååŒç¨‹åºçš„<strong>ä¸»è¦åŒºåˆ«åœ¨äºï¼Œä¸€ä¸ªå…·æœ‰å¤šä¸ªçº¿ç¨‹çš„ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå‡ ä¸ªçº¿ç¨‹ï¼Œè€ŒååŒç¨‹åºå´éœ€è¦å½¼æ­¤åä½œçš„è¿è¡Œ</strong>ã€‚</p>
</li>
<li>
<p>åœ¨<strong>ä»»ä¸€æŒ‡å®šæ—¶åˆ»åªæœ‰ä¸€ä¸ªååŒç¨‹åºåœ¨è¿è¡Œ</strong>ï¼Œå¹¶ä¸”è¿™ä¸ªæ­£åœ¨è¿è¡Œçš„ååŒç¨‹åºåªæœ‰åœ¨æ˜ç¡®çš„è¢«è¦æ±‚æŒ‚èµ·çš„æ—¶å€™æ‰ä¼šè¢«æŒ‚èµ·ã€‚<br>
ååŒç¨‹åºæœ‰ç‚¹ç±»ä¼¼åŒæ­¥çš„å¤šçº¿ç¨‹ï¼Œåœ¨ç­‰å¾…åŒä¸€ä¸ªçº¿ç¨‹é”çš„å‡ ä¸ªçº¿ç¨‹æœ‰ç‚¹ç±»ä¼¼ååŒã€‚</p>
</li>
<li>
<p>ä¸»è¦åŒºåˆ«å½’çº³å¦‚ä¸‹ï¼š</p>
</li>
</ol>
<ul>
<li>
<p><strong>è°ƒåº¦æ–¹å¼</strong>ï¼š<strong>çº¿ç¨‹</strong>é€šå¸¸ç”±<strong>æ“ä½œç³»ç»Ÿçš„è°ƒåº¦å™¨è¿›è¡ŒæŠ¢å å¼è°ƒåº¦</strong>ï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´åˆ‡æ¢æ‰§è¡Œæƒã€‚è€Œ<strong>ååŒç¨‹åº</strong>æ˜¯<strong>éæŠ¢å å¼è°ƒåº¦</strong>çš„ï¼Œå®ƒä»¬ç”±<strong>ç¨‹åºå‘˜æ˜¾å¼åœ°æ§åˆ¶æ‰§è¡Œæƒ</strong>çš„è½¬ç§»ã€‚</p>
</li>
<li>
<p><strong>å¹¶å‘æ€§</strong>ï¼š<strong>çº¿ç¨‹æ˜¯å¹¶å‘</strong>æ‰§è¡Œçš„ï¼Œ<strong>å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è¿è¡Œ</strong>åœ¨å¤šä¸ªå¤„ç†å™¨æ ¸å¿ƒä¸Šï¼Œæˆ–è€…é€šè¿‡æ—¶é—´ç‰‡è½®è½¬åœ¨å•ä¸ªæ ¸å¿ƒä¸Šåˆ‡æ¢æ‰§è¡Œã€‚<strong>ååŒç¨‹åºåˆ™æ˜¯åä½œå¼</strong>çš„ï¼Œ<strong>åªæœ‰ä¸€ä¸ªååŒç¨‹åºå¤„äºè¿è¡ŒçŠ¶æ€</strong>ï¼Œå…¶ä»–ååŒç¨‹åº<strong>å¿…é¡»ç­‰å¾…å½“å‰ååŒç¨‹åºä¸»åŠ¨æ”¾å¼ƒæ‰§è¡Œæƒ</strong>ã€‚</p>
</li>
<li>
<p><strong>å†…å­˜å ç”¨</strong>ï¼š<strong>çº¿ç¨‹é€šå¸¸éœ€è¦ç‹¬ç«‹çš„å †æ ˆå’Œä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>ï¼Œå› æ­¤çº¿ç¨‹çš„<strong>åˆ›å»ºå’Œé”€æ¯</strong>ä¼šå¸¦æ¥<strong>é¢å¤–çš„å¼€é”€</strong>ã€‚è€Œ<strong>ååŒç¨‹åºå¯ä»¥å…±äº«ç›¸åŒçš„å †æ ˆå’Œä¸Šä¸‹æ–‡</strong>ï¼Œå› æ­¤åˆ›å»ºå’Œé”€æ¯ååŒç¨‹åºçš„<strong>å¼€é”€è¾ƒå°</strong>ã€‚</p>
</li>
<li>
<p><strong>æ•°æ®å…±äº«</strong>ï¼š<strong>çº¿ç¨‹</strong>ä¹‹é—´å¯ä»¥<strong>å…±äº«å†…å­˜ç©ºé—´</strong>ï¼Œä½†<strong>éœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨æ€§å’ŒåŒæ­¥</strong>é—®é¢˜ã€‚<strong>ååŒç¨‹åº</strong>é€šå¸¸<strong>é€šè¿‡å‚æ•°ä¼ é€’å’Œè¿”å›å€¼</strong>æ¥è¿›è¡Œ<strong>æ•°æ®å…±äº«</strong>ï¼Œ<strong>ä¸åŒååŒç¨‹åº</strong>ä¹‹é—´çš„<strong>æ•°æ®éš”ç¦»æ€§è¾ƒå¥½</strong>ã€‚</p>
</li>
<li>
<p>è°ƒè¯•å’Œé”™è¯¯å¤„ç†ï¼š<strong>çº¿ç¨‹é€šå¸¸åœ¨è°ƒè¯•å’Œé”™è¯¯å¤„ç†æ–¹é¢æ›´å¤æ‚</strong>ï¼Œå› ä¸ºå¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„äº¤äº’å’Œå¹¶å‘æ‰§è¡Œå¯èƒ½å¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚<strong>ååŒç¨‹åºåˆ™åœ¨è°ƒè¯•å’Œé”™è¯¯å¤„ç†æ–¹é¢ç›¸å¯¹ç®€å•</strong>ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ç”±ç¨‹åºå‘˜æ˜¾å¼åœ°æ§åˆ¶æ‰§è¡Œæµç¨‹çš„ã€‚</p>
</li>
</ul>
<ol start="4">
<li>æ€»ä½“è€Œè¨€ï¼Œ<strong>çº¿ç¨‹é€‚ç”¨äºéœ€è¦å¹¶å‘æ‰§è¡Œçš„åœºæ™¯</strong>ï¼Œä¾‹å¦‚åœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šåˆ©ç”¨å¹¶è¡Œæ€§åŠ å¿«ä»»åŠ¡çš„æ‰§è¡Œé€Ÿåº¦ã€‚è€Œ<strong>ååŒç¨‹åºé€‚ç”¨äºéœ€è¦åä½œå’Œåè°ƒçš„åœºæ™¯</strong>ï¼Œä¾‹å¦‚<strong>çŠ¶æ€æœºã€äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æˆ–åä½œå¼ä»»åŠ¡å¤„ç†</strong>ã€‚é€‰æ‹©ä½¿ç”¨çº¿ç¨‹è¿˜æ˜¯ååŒç¨‹åºå–å†³äºå…·ä½“çš„åº”ç”¨éœ€æ±‚å’Œç¼–ç¨‹æ¨¡å‹ã€‚</li>
</ol>
<h1 id="%E5%8D%81%E4%B8%83-%E6%96%87%E4%BB%B6i%2Fo" tabindex="-1">åä¸ƒ æ–‡ä»¶I/O</h1>
<h3 id="17.1-%E6%A6%82%E8%BF%B0%E5%8F%8A%E7%94%A8%E6%B3%95" tabindex="-1">17.1 æ¦‚è¿°åŠç”¨æ³•</h3>
<ol>
<li>Lua I/O åº“ç”¨äºè¯»å–å’Œå¤„ç†æ–‡ä»¶ã€‚åˆ†ä¸ºç®€å•æ¨¡å¼ï¼ˆå’ŒCä¸€æ ·ï¼‰ã€å®Œå…¨æ¨¡å¼ã€‚</li>
</ol>
<ul>
<li>ç®€<strong>å•æ¨¡å¼ï¼ˆsimple modelï¼‰æ‹¥æœ‰ä¸€ä¸ªå½“å‰è¾“å…¥æ–‡ä»¶å’Œä¸€ä¸ªå½“å‰è¾“å‡ºæ–‡ä»¶</strong>ï¼Œå¹¶ä¸”æä¾›é’ˆå¯¹è¿™äº›æ–‡ä»¶ç›¸å…³çš„æ“ä½œã€‚</li>
<li><strong>å®Œå…¨æ¨¡å¼ï¼ˆcomplete modelï¼‰ ä½¿ç”¨å¤–éƒ¨çš„æ–‡ä»¶å¥æŸ„æ¥å®ç°</strong>ã€‚å®ƒä»¥ä¸€ç§é¢å¯¹å¯¹è±¡çš„å½¢å¼ï¼Œå°†æ‰€æœ‰çš„æ–‡ä»¶æ“ä½œå®šä¹‰ä¸ºæ–‡ä»¶å¥æŸ„çš„æ–¹æ³•</li>
</ul>
<ol start="2">
<li>
<p><strong>ç®€å•æ¨¡å¼åœ¨åšä¸€äº›ç®€å•çš„æ–‡ä»¶æ“ä½œæ—¶è¾ƒä¸ºåˆé€‚</strong>ã€‚ä½†æ˜¯åœ¨<strong>è¿›è¡Œä¸€äº›é«˜çº§çš„æ–‡ä»¶æ“ä½œçš„æ—¶å€™ï¼Œç®€å•æ¨¡å¼å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒã€‚ä¾‹å¦‚åŒæ—¶è¯»å–å¤šä¸ªæ–‡ä»¶è¿™æ ·çš„æ“ä½œï¼Œä½¿ç”¨å®Œå…¨æ¨¡å¼åˆ™è¾ƒä¸ºåˆé€‚</strong>ã€‚</p>
</li>
<li>
<p>æ‰“å¼€æ–‡ä»¶æ“ä½œè¯­å¥å¦‚ä¸‹ï¼š</p>
</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span> (filename [, mode])</span><br></pre></td></tr></table></figure>
<ul>
<li>modeçš„å€¼æœ‰ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>ä»¥<strong>åªè¯»æ–¹å¼æ‰“å¼€æ–‡</strong>ä»¶ï¼Œè¯¥<strong>æ–‡ä»¶å¿…é¡»å­˜åœ¨</strong>ã€‚</td>
</tr>
<tr>
<td>w</td>
<td><strong>æ‰“å¼€åªå†™æ–‡ä»¶</strong>ï¼Œè‹¥<strong>æ–‡ä»¶å­˜åœ¨åˆ™</strong>æ–‡ä»¶é•¿åº¦æ¸…ä¸º0ï¼Œå³<strong>è¯¥æ–‡ä»¶å†…å®¹ä¼šæ¶ˆå¤±</strong>ã€‚è‹¥<strong>æ–‡ä»¶ä¸å­˜åœ¨åˆ™å»ºç«‹è¯¥æ–‡ä»¶</strong>ã€‚</td>
</tr>
<tr>
<td>a</td>
<td>ä»¥<strong>é™„åŠ çš„æ–¹å¼æ‰“å¼€åªå†™æ–‡ä»¶</strong>ã€‚è‹¥<strong>æ–‡ä»¶ä¸å­˜åœ¨</strong>ï¼Œåˆ™ä¼š<strong>å»ºç«‹</strong>è¯¥æ–‡ä»¶ï¼Œå¦‚æœ<strong>æ–‡ä»¶å­˜åœ¨</strong>ï¼Œå†™å…¥çš„<strong>æ•°æ®ä¼šè¢«åŠ åˆ°æ–‡ä»¶å°¾</strong>ï¼Œå³æ–‡ä»¶<strong>åŸå…ˆçš„å†…å®¹ä¼šè¢«ä¿ç•™</strong>ã€‚ï¼ˆEOFç¬¦ä¿ç•™ï¼‰</td>
</tr>
<tr>
<td>r+</td>
<td>ä»¥<strong>å¯è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶</strong>ï¼Œè¯¥<strong>æ–‡ä»¶å¿…é¡»å­˜åœ¨</strong>ã€‚</td>
</tr>
<tr>
<td>w+</td>
<td><strong>æ‰“å¼€å¯è¯»å†™æ–‡ä»¶</strong>ï¼Œè‹¥****æ–‡ä»¶å­˜åœ¨<strong>åˆ™æ–‡ä»¶é•¿åº¦æ¸…ä¸ºé›¶ï¼Œå³è¯¥æ–‡ä»¶</strong>å†…å®¹ä¼šæ¶ˆå¤±**ã€‚è‹¥æ–‡ä»¶<strong>ä¸å­˜åœ¨åˆ™å»ºç«‹</strong>è¯¥æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td>a+</td>
<td>ä¸<strong>aç±»ä¼¼ï¼Œä½†æ­¤æ–‡ä»¶å¯è¯»å¯å†™</strong></td>
</tr>
<tr>
<td>b</td>
<td><strong>äºŒè¿›åˆ¶æ¨¡å¼ï¼Œå¦‚æœæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥åŠ ä¸Šb</strong></td>
</tr>
<tr>
<td>+</td>
<td><strong>å·è¡¨ç¤ºå¯¹æ–‡ä»¶æ—¢å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™</strong></td>
</tr>
</tbody>
</table>
<h3 id="17.2-%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8F%EF%BC%88io.%E8%B0%83%E7%94%A8%EF%BC%89" tabindex="-1">17.2 ç®€å•æ¨¡å¼ï¼ˆio.è°ƒç”¨ï¼‰</h3>
<ol>
<li>ç®€å•æ¨¡å¼ä½¿ç”¨æ ‡å‡†çš„ I/O æˆ–ä½¿ç”¨ä¸€ä¸ªå½“å‰è¾“å…¥æ–‡ä»¶å’Œä¸€ä¸ªå½“å‰è¾“å‡ºæ–‡ä»¶ã€‚<br>
ä»¥ä¸‹ä¸º file.lua æ–‡ä»¶ä»£ç ï¼Œæ“ä½œçš„æ–‡ä»¶ä¸ºtest.lua(å¦‚æœæ²¡æœ‰ä½ éœ€è¦åˆ›å»ºè¯¥æ–‡ä»¶)ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;test.lua&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¾ç½®é»˜è®¤è¾“å…¥æ–‡ä»¶ä¸º test.lua</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">input</span>(file)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¾“å‡ºæ–‡ä»¶ç¬¬ä¸€è¡Œ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">io</span>.<span class="built_in">read</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">close</span>(file)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä»¥é™„åŠ çš„æ–¹å¼æ‰“å¼€åªå†™æ–‡ä»¶</span></span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;test.lua&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¾ç½®é»˜è®¤è¾“å‡ºæ–‡ä»¶ä¸º test.lua</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">output</span>(file)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœ¨æ–‡ä»¶æœ€åä¸€è¡Œæ·»åŠ  Lua æ³¨é‡Š</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">write</span>(<span class="string">&quot;--  test.lua æ–‡ä»¶æœ«å°¾æ³¨é‡Š&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">io</span>.<span class="built_in">close</span>(file)</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œè¾“å‡ºäº† test.lua æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä¿¡æ¯ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶æœ€åä¸€è¡Œæ·»åŠ äº† lua çš„æ³¨é‡Šã€‚å¦‚æˆ‘è¿™è¾¹è¾“å‡ºçš„æ˜¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- test.lua æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº† io.â€œxâ€ æ–¹æ³•ï¼Œå…¶ä¸­ io.read() ä¸­æˆ‘ä»¬æ²¡æœ‰å¸¦å‚æ•°ï¼Œå‚æ•°å¯ä»¥æ˜¯ä¸‹è¡¨ä¸­çš„ä¸€ä¸ªï¼š</li>
</ol>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œ*nâ€</td>
<td><strong>è¯»å–ä¸€ä¸ªæ•°å­—å¹¶è¿”å›å®ƒ</strong>ã€‚ä¾‹ï¼šfile.read(â€œ*nâ€)</td>
</tr>
<tr>
<td>â€œ*aâ€</td>
<td><strong>ä»å½“å‰ä½ç½®è¯»å–æ•´ä¸ªæ–‡ä»¶</strong>ã€‚ä¾‹ï¼šfile.read(â€œ*aâ€)</td>
</tr>
<tr>
<td>â€œ*lâ€ï¼ˆé»˜è®¤ï¼‰</td>
<td><strong>è¯»å–ä¸‹ä¸€è¡Œ</strong>ï¼Œåœ¨æ–‡ä»¶å°¾ (EOF) å¤„è¿”å› nilã€‚ä¾‹ï¼šfile.read(â€œ*lâ€)</td>
</tr>
<tr>
<td>number</td>
<td><strong>è¿”å›ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸ªæ•°çš„å­—ç¬¦ä¸²</strong>ï¼Œå¦‚æœnumberä¸º0åˆ™è¿”å›ç©ºå­—ä¸²ï¼Œæˆ–åœ¨ EOF æ—¶è¿”å› nilã€‚ä¾‹ï¼šfile.read(5)</td>
</tr>
</tbody>
</table>
<ol start="3">
<li>ç®€å•æ¨¡å¼çš„I/Oæ–¹æ³•æ±‡æ€»<br>
å‚è€ƒåšå®¢ï¼š<a href="https://blog.csdn.net/duanxuyun/article/details/4751118">lua çš„ioæ“ä½œï¼Œéå¸¸è¯¦ç»†ã€‚</a></li>
</ol>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>io.close ([file])</td>
<td>åŠŸèƒ½ï¼šç›¸å½“äºfile:close()ï¼Œå…³é—­é»˜è®¤çš„è¾“å‡ºæ–‡ä»¶</td>
</tr>
<tr>
<td>io.flush ()</td>
<td>åŠŸèƒ½ï¼šç›¸å½“äºfile:flush(),<strong>è¾“å‡ºæ‰€æœ‰ç¼“å†²ä¸­çš„å†…å®¹åˆ°é»˜è®¤è¾“å‡ºæ–‡ä»¶</strong></td>
</tr>
<tr>
<td>io.lines ([filename])</td>
<td>åŠŸèƒ½ï¼šæ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶filenameä¸ºè¯»æ¨¡å¼å¹¶<strong>è¿”å›ä¸€ä¸ªè¿­ä»£å‡½æ•°ï¼ˆé…åˆå¾ªç¯è¯­å¥ä½¿ç”¨ï¼‰</strong>,æ¯æ¬¡è°ƒç”¨å°†<strong>è·å¾—æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹,å½“åˆ°æ–‡ä»¶å°¾æ—¶ï¼Œå°†è¿”å›nil,å¹¶è‡ªåŠ¨å…³é—­æ–‡ä»¶</strong>ã€‚<strong>è‹¥ä¸å¸¦å‚æ•°æ—¶io.lines() &lt;=&gt; io.input():lines()</strong>; <strong>è¯»å–é»˜è®¤è¾“å…¥è®¾å¤‡çš„å†…å®¹ï¼Œä½†ç»“æŸæ—¶ä¸å…³é—­æ–‡ä»¶ã€‚</strong> <br>å¦‚ï¼šfor line in io.lines(â€œmain.luaâ€) do<br>ã€€ã€€print(line)<br>ã€€ã€€end</td>
</tr>
<tr>
<td>io.open (filename [, mode])</td>
<td>åŠŸèƒ½ï¼š<strong>æŒ‰æŒ‡å®šçš„æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶</strong>ï¼ŒæˆåŠŸåˆ™è¿”å›æ–‡ä»¶å¥æŸ„ï¼Œå¤±è´¥åˆ™è¿”å›nil+é”™è¯¯ä¿¡æ¯ã€‚æ¨¡å¼å‚æ•°è¯´æ˜åœ¨ <a href="#171-%E6%A6%82%E8%BF%B0%E5%8F%8A%E7%94%A8%E6%B3%95">17.1 æ¦‚è¿°åŠç”¨æ³•</a> ä¸­çš„ç¬¬3ç‚¹æœ‰è¯´æ˜</td>
</tr>
<tr>
<td>io.output ([file])</td>
<td>åŠŸèƒ½ï¼šç›¸å½“äºio.inputï¼Œä½†æ“ä½œåœ¨é»˜è®¤è¾“å‡ºæ–‡ä»¶ä¸Š</td>
</tr>
<tr>
<td>io.popen ([prog [, mode]])</td>
<td>åŠŸèƒ½ï¼šå¼€å§‹ç¨‹åºprogäºé¢å¤–çš„è¿›ç¨‹,å¹¶è¿”å›ç”¨äºprogçš„æ–‡ä»¶å¥æŸ„(å¹¶ä¸æ”¯æŒæ‰€æœ‰çš„ç³»ç»Ÿå¹³å°)</td>
</tr>
<tr>
<td>io.read (â€¦)</td>
<td>åŠŸèƒ½ï¼šä»å½“å‰è¾“å…¥æµè¾“å…¥è¯»å–ä¸€è¡Œï¼Œå‚æ•°åœ¨ <a href="#172-%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8Fio%E8%B0%83%E7%94%A8">17.2 ç®€å•æ¨¡å¼</a> ä¸­çš„ç¬¬2ç‚¹æåˆ°ã€‚ç›¸å½“äºio.input():readã€‚ <strong>ä¸å¸¦å‚æ•°æ—¶ï¼Œé»˜è®¤æ¯è¿è¡Œä¸€æ¬¡io.read()å°±å‘ä¸‹è¯»ä¸€è¡Œ</strong></td>
</tr>
<tr>
<td>io.tmpfile ()</td>
<td>åŠŸèƒ½ï¼šè¿”å›ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¥æŸ„ï¼Œè¯¥æ–‡ä»¶ä»¥æ›´æ–°æ¨¡å¼æ‰“å¼€ï¼Œç¨‹åºç»“æŸæ—¶è‡ªåŠ¨åˆ é™¤</td>
</tr>
<tr>
<td>io.type (obj)</td>
<td>åŠŸèƒ½ï¼šæ£€æµ‹objæ˜¯å¦ä¸€ä¸ªå¯ç”¨çš„æ–‡ä»¶å¥æŸ„<br>è¿”å›ï¼š<br>ã€€ã€€â€œfileâ€ï¼šä¸ºä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶å¥æŸ„<br>ã€€ã€€â€œclosed fileâ€ï¼šä¸ºä¸€ä¸ªå·²å…³é—­çš„æ–‡ä»¶å¥æŸ„<br>ã€€ã€€nil: è¡¨ç¤ºobjä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¥æŸ„</td>
</tr>
<tr>
<td>io.write (â€¦)</td>
<td>åŠŸèƒ½ï¼šç›¸å½“äºio.output():write,å‘æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œå†™å…¥æ–¹å¼ä¼šæ ¹æ®modeè€Œä¸åŒã€‚</td>
</tr>
</tbody>
</table>
<h3 id="17.3-%E5%AE%8C%E5%85%A8%E6%A8%A1%E5%BC%8F%EF%BC%88file%3A%E8%B0%83%E7%94%A8%EF%BC%89" tabindex="-1">17.3 å®Œå…¨æ¨¡å¼ï¼ˆfile:è°ƒç”¨ï¼‰</h3>
<ol>
<li>é€šå¸¸æˆ‘ä»¬<strong>éœ€è¦åœ¨åŒä¸€æ—¶é—´å¤„ç†å¤šä¸ªæ–‡ä»¶</strong>ã€‚æˆ‘ä»¬éœ€è¦<strong>ä½¿ç”¨ file:function_name æ¥ä»£æ›¿ io.function_name æ–¹æ³•</strong>ã€‚ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•åŒæ—¶å¤„ç†åŒä¸€ä¸ªæ–‡ä»¶:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;test.lua&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¾“å‡ºæ–‡ä»¶ç¬¬ä¸€è¡Œ</span></span><br><span class="line"><span class="built_in">print</span>(file:<span class="built_in">read</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">file:<span class="built_in">close</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä»¥é™„åŠ çš„æ–¹å¼æ‰“å¼€åªå†™æ–‡ä»¶</span></span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;test.lua&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åœ¨æ–‡ä»¶æœ€åä¸€è¡Œæ·»åŠ  Lua æ³¨é‡Š</span></span><br><span class="line">file:<span class="built_in">write</span>(<span class="string">&quot;--test&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">file:<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure>
<p><strong>read çš„å‚æ•°ä¸ç®€å•æ¨¡å¼ä¸€è‡´ã€‚</strong></p>
<ol start="2">
<li>å®Œå…¨æ¨¡å¼çš„I/Oæ–¹æ³•æ±‡æ€»</li>
</ol>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>file:close()</td>
<td>åŠŸèƒ½ï¼šå…³é—­æ–‡ä»¶ã€‚ã€€æ³¨ï¼š<strong>å½“æ–‡ä»¶å¥æŸ„è¢«åƒåœ¾æ”¶é›†åï¼Œæ–‡ä»¶å°†è‡ªåŠ¨å…³é—­ã€‚å¥æŸ„å°†å˜ä¸ºä¸€ä¸ªä¸å¯é¢„çŸ¥çš„å€¼</strong></td>
</tr>
<tr>
<td>file:flush()</td>
<td>åŠŸèƒ½ï¼šå‘æ–‡ä»¶å†™å…¥ç¼“å†²ä¸­çš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>file:lines()</td>
<td>åŠŸèƒ½ï¼š<strong>è¿”å›ä¸€ä¸ªè¿­ä»£å‡½æ•°ï¼ˆé…åˆå¾ªç¯è¯­å¥ä½¿ç”¨ï¼‰</strong>,æ¯æ¬¡è°ƒç”¨å°†è·å¾—æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹,<strong>å½“åˆ°æ–‡ä»¶å°¾æ—¶ï¼Œå°†è¿”å›nil,ä½†ä¸å…³é—­æ–‡ä»¶ã€‚</strong> <br>å¦‚ï¼šfor line in file:lines() do body end</td>
</tr>
<tr>
<td>file:read(â€¦)</td>
<td>åŠŸèƒ½ï¼š<strong>æŒ‰æŒ‡å®šçš„æ ¼å¼è¯»å–ä¸€ä¸ªæ–‡ä»¶</strong>,æŒ‰æ¯ä¸ªæ ¼å¼å‡½æ•°å°†<strong>è¿”å›ä¸€ä¸ªå­—ä¸²æˆ–æ•°å­—,å¦‚æœä¸èƒ½æ­£ç¡®è¯»å–å°†è¿”å›nil</strong>,è‹¥<strong>æ²¡æœ‰æŒ‡å®šæ ¼å¼å°†æŒ‡é»˜è®¤æŒ‰è¡Œæ–¹å¼</strong>è¿›è¡Œ<strong>è¯»å–</strong>ã€‚å‚æ•°ä¸ <a href="#172-%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8Fio%E8%B0%83%E7%94%A8">17.2 ç®€å•æ¨¡å¼</a> ä¸­çš„ç¬¬2ç‚¹ç›¸åŒã€‚ <strong>ä¸å¸¦å‚æ•°æ—¶ï¼Œé»˜è®¤æ¯è¿è¡Œä¸€æ¬¡io.read()å°±å‘ä¸‹è¯»ä¸€è¡Œ</strong></td>
</tr>
<tr>
<td>file:seek([whence][,offset])</td>
<td>åŠŸèƒ½ï¼š<strong>è®¾ç½®å’Œè·å–å½“å‰æ–‡ä»¶ä½ç½®</strong>,<strong>æˆåŠŸåˆ™è¿”å›æœ€ç»ˆçš„æ–‡ä»¶ä½ç½®</strong>(æŒ‰å­—èŠ‚),<strong>å¤±è´¥åˆ™è¿”å›nilåŠ é”™è¯¯ä¿¡æ¯</strong><br>å‚æ•°:<br>ã€€ã€€whence:<br>ã€€ã€€ã€€â€œsetâ€: ä»æ–‡ä»¶å¤´å¼€å§‹<br>ã€€ã€€ã€€â€œcurâ€: ä»å½“å‰ä½ç½®å¼€å§‹[é»˜è®¤]<br>ã€€ã€€ã€€â€œendâ€: ä»æ–‡ä»¶å°¾å¼€å§‹<br>ã€€ã€€offset: é»˜è®¤ä¸º0<br><strong>ä¸å¸¦å‚æ•°file:seek()åˆ™è¿”å›å½“å‰ä½ç½®</strong>,file:seek(â€œsetâ€)<strong>åˆ™å®šä½åˆ°æ–‡ä»¶å¤´</strong>,file:seek(â€œendâ€)<strong>åˆ™å®šä½åˆ°æ–‡ä»¶å°¾å¹¶è¿”å›æ–‡ä»¶å¤§å°</strong></td>
</tr>
<tr>
<td>file:setvbuf(mode,[,size])</td>
<td>åŠŸèƒ½ï¼š<strong>è®¾ç½®è¾“å‡ºæ–‡ä»¶çš„ç¼“å†²æ¨¡å¼</strong><br>ã€€ã€€å‚æ•°<br>ã€€ã€€mode:<br>ã€€ã€€ã€€â€œnoâ€: æ²¡æœ‰ç¼“å†²ï¼Œå³ç›´æ¥è¾“å‡º<br>ã€€ã€€ã€€â€œfullâ€: å…¨ç¼“å†²ï¼Œå³å½“ç¼“å†²æ»¡åæ‰è¿›è¡Œè¾“å‡ºæ“ä½œ(ä¹Ÿå¯è°ƒç”¨flushé©¬ä¸Šè¾“å‡º)<br>ã€€ã€€ã€€â€œlineâ€: ä»¥è¡Œä¸ºå•ä½ï¼Œè¿›è¡Œè¾“å‡º(å¤šç”¨äºç»ˆç«¯è®¾å¤‡)<br><strong>æœ€åä¸¤ç§æ¨¡å¼,sizeå¯ä»¥æŒ‡å®šç¼“å†²çš„å¤§å°</strong>(æŒ‰å­—èŠ‚)ï¼Œ<strong>å¿½ç•¥sizeå°†è‡ªåŠ¨è°ƒæ•´ä¸ºæœ€ä½³çš„å¤§å°</strong></td>
</tr>
<tr>
<td>file:write(â€¦)</td>
<td>åŠŸèƒ½ï¼š<strong>æŒ‰æŒ‡å®šçš„å‚æ•°æ ¼å¼è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼Œå‚æ•°å¿…é¡»ä¸ºå­—ç¬¦æˆ–æ•°å­—</strong>ï¼Œè‹¥è¦è¾“å‡º<strong>å…¶å®ƒå€¼</strong>ï¼Œåˆ™éœ€<strong>é€šè¿‡tostringæˆ–string.formatè¿›è¡Œè½¬æ¢</strong></td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸‹å®ä¾‹ä½¿ç”¨äº† <strong>seek æ–¹æ³•</strong>ï¼Œ<strong>å®šä½åˆ°æ–‡ä»¶å€’æ•°ç¬¬ 25 ä¸ªä½ç½®å¹¶ä½¿ç”¨ read æ–¹æ³•çš„ *a å‚æ•°</strong>ï¼Œ<strong>å³ä»å½“å‰ä½ç½®(å€’æ•°ç¬¬ 25 ä¸ªä½ç½®)è¯»å–æ•´ä¸ªæ–‡ä»¶</strong>:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;test.lua&quot;</span>, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">file:seek(<span class="string">&quot;end&quot;</span>,<span class="number">-25</span>)</span><br><span class="line"><span class="built_in">print</span>(file:<span class="built_in">read</span>(<span class="string">&quot;*a&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­æ‰“å¼€çš„æ–‡ä»¶</span></span><br><span class="line">file:<span class="built_in">close</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">st.lua æ–‡ä»¶æœ«å°¾--test</span></span><br><span class="line"><span class="comment">--]]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="%E5%8D%81%E5%85%AB-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" tabindex="-1">åå…« é”™è¯¯å¤„ç†</h1>
<h3 id="18.1-%E6%A6%82%E8%BF%B0" tabindex="-1">18.1 æ¦‚è¿°</h3>
<ol>
<li>
<p>ç¨‹åºè¿è¡Œä¸­é”™è¯¯å¤„ç†æ˜¯å¿…è¦çš„ï¼Œåœ¨æˆ‘ä»¬è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œæ•°æ®è½¬ç§»åŠweb service è°ƒç”¨è¿‡ç¨‹ä¸­éƒ½ä¼šå‡ºç°ä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚å¦‚æœä¸æ³¨é‡é”™è¯¯ä¿¡æ¯çš„å¤„ç†ï¼Œå°±ä¼šé€ æˆä¿¡æ¯æ³„éœ²ï¼Œç¨‹åºæ— æ³•è¿è¡Œç­‰æƒ…å†µã€‚</p>
</li>
<li>
<p>ä»»ä½•ç¨‹åºè¯­è¨€ä¸­ï¼Œéƒ½éœ€è¦é”™è¯¯å¤„ç†ã€‚é”™è¯¯ç±»å‹æœ‰ï¼š</p>
<ul>
<li>è¯­æ³•é”™è¯¯</li>
<li>è¿è¡Œé”™è¯¯</li>
</ul>
</li>
</ol>
<h3 id="18.2-%E8%AF%AD%E6%B3%95%E9%94%99%E8%AF%AF" tabindex="-1">18.2 è¯­æ³•é”™è¯¯</h3>
<p>1.è¯­æ³•é”™è¯¯é€šå¸¸æ˜¯ç”±äºå¯¹ç¨‹åºçš„ç»„ä»¶ï¼ˆå¦‚è¿ç®—ç¬¦ã€è¡¨è¾¾å¼ï¼‰ä½¿ç”¨ä¸å½“å¼•èµ·çš„ã€‚ä¸€ä¸ªç®€å•çš„å®ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- test.lua æ–‡ä»¶</span></span><br><span class="line">a == <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua: test.lua:<span class="number">2</span>: syntax <span class="built_in">error</span> near <span class="string">&#x27;==&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä»¥ä¸Šå‡ºç°äº†è¯­æ³•é”™è¯¯ï¼Œä¸€ä¸ª â€œ=â€ å·è·Ÿä¸¤ä¸ª â€œ=â€ å·æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä¸€ä¸ª â€œ=â€ æ˜¯èµ‹å€¼è¡¨è¾¾å¼ä¸¤ä¸ª â€œ=â€ æ˜¯æ¯”è¾ƒè¿ç®—ã€‚</p>
<h3 id="18.3-%E8%BF%90%E8%A1%8C%E9%94%99%E8%AF%AF" tabindex="-1">18.3 è¿è¡Œé”™è¯¯</h3>
<ol>
<li>è¿è¡Œé”™è¯¯æ˜¯ç¨‹åºå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯ä¼šè¾“å‡ºæŠ¥é”™ä¿¡æ¯ã€‚å¦‚ä¸‹å®ä¾‹ç”±äºå‚æ•°è¾“å…¥é”™è¯¯ï¼Œç¨‹åºæ‰§è¡Œæ—¶æŠ¥é”™ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b)</span></span></span><br><span class="line">   <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">add(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬ç¼–è¯‘è¿è¡Œä»¥ä¸Šä»£ç æ—¶ï¼Œç¼–è¯‘æ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œä½†åœ¨è¿è¡Œçš„æ—¶å€™ä¼šäº§ç”Ÿå¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua: test2.lua:<span class="number">2</span>: attempt to perform arithmetic on <span class="keyword">local</span> <span class="string">&#x27;b&#x27;</span> (a <span class="literal">nil</span> value)</span><br><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line">    test2.lua:<span class="number">2</span>: <span class="keyword">in</span> <span class="function"><span class="keyword">function</span> &#x27;<span class="title">add</span>&#x27;</span></span><br><span class="line"><span class="function">    <span class="title">test2.lua</span>:5: <span class="title">in</span> <span class="title">main</span> <span class="title">chunk</span></span></span><br><span class="line"><span class="function">    [<span class="title">C</span>]: ?</span></span><br></pre></td></tr></table></figure>
<p>lua é‡Œè°ƒç”¨å‡½æ•°æ—¶ï¼Œå³ä½¿å®å‚åˆ—è¡¨å’Œå½¢å‚åˆ—è¡¨ä¸ä¸€è‡´ä¹Ÿèƒ½æˆåŠŸè°ƒç”¨ï¼Œå¤šä½™çš„å‚æ•°ä¼šè¢«èˆå¼ƒï¼Œç¼ºå°‘çš„å‚æ•°ä¼šè¢«è¡¥ä¸º nilã€‚<br>
<strong>ä»¥ä¸ŠæŠ¥é”™ä¿¡æ¯æ˜¯ç”±äºå‚æ•° b è¢«è¡¥ä¸º nil åï¼Œnil å‚ä¸äº† + è¿ç®—</strong>ã€‚<br>
å‡å¦‚ add å‡½æ•°å†…ä¸æ˜¯ â€œreturn a+bâ€ è€Œæ˜¯ â€œprint(a,b)â€ çš„è¯ï¼Œç»“æœä¼šå˜æˆ â€œ10 nilâ€ ä¸ä¼šæŠ¥é”™ã€‚</p>
<h3 id="18.4-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86" tabindex="-1">18.4 é”™è¯¯å¤„ç†</h3>
<p>å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼š<strong>assert å’Œ error æ¥å¤„ç†é”™è¯¯</strong>ã€‚å®ä¾‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>assert</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(a,b)</span></span></span><br><span class="line">   <span class="built_in">assert</span>(<span class="built_in">type</span>(a) == <span class="string">&quot;number&quot;</span>, <span class="string">&quot;a ä¸æ˜¯ä¸€ä¸ªæ•°å­—&quot;</span>)</span><br><span class="line">   <span class="built_in">assert</span>(<span class="built_in">type</span>(b) == <span class="string">&quot;number&quot;</span>, <span class="string">&quot;b ä¸æ˜¯ä¸€ä¸ªæ•°å­—&quot;</span>)</span><br><span class="line">   <span class="keyword">return</span> a+b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">add(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šç¨‹åºä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">lua: test.lua:<span class="number">3</span>: b ä¸æ˜¯ä¸€ä¸ªæ•°å­—</span><br><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line">    [C]: <span class="keyword">in</span> <span class="function"><span class="keyword">function</span> &#x27;<span class="title">assert</span>&#x27;</span></span><br><span class="line"><span class="function">    <span class="title">test.lua</span>:3: <span class="title">in</span> <span class="title">local</span> &#x27;<span class="title">add</span>&#x27;</span></span><br><span class="line"><span class="function">    <span class="title">test.lua</span>:6: <span class="title">in</span> <span class="title">main</span> <span class="title">chunk</span></span></span><br><span class="line"><span class="function">    [<span class="title">C</span>]: <span class="title">in</span> ?</span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>
<p>å®ä¾‹ä¸­<strong>asserté¦–å…ˆæ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè‹¥æ²¡é—®é¢˜</strong>ï¼Œassert<strong>ä¸åšä»»ä½•äº‹æƒ…</strong>ï¼›<strong>å¦åˆ™</strong>ï¼Œassert<strong>ä»¥ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºé”™è¯¯ä¿¡æ¯æŠ›å‡º</strong>ã€‚<br>
2. error</p>
<ul>
<li>è¯­æ³•æ ¼å¼ï¼š</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">error</span> (message [, level])</span><br></pre></td></tr></table></figure>
<ul>
<li>åŠŸèƒ½ï¼š<strong>ç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ï¼Œå¹¶è¿”å›messageçš„å†…å®¹ä½œä¸ºé”™è¯¯ä¿¡æ¯</strong>(<strong>errorå‡½æ•°æ°¸è¿œéƒ½ä¸ä¼šè¿”å›</strong>)</li>
<li>é€šå¸¸æƒ…å†µä¸‹ï¼Œerrorä¼šé™„åŠ ä¸€äº›é”™è¯¯ä½ç½®çš„ä¿¡æ¯åˆ°messageå¤´éƒ¨ã€‚</li>
<li>Levelå‚æ•°æŒ‡ç¤ºè·å¾—é”™è¯¯çš„ä½ç½®:
<ul>
<li><strong>Level=1[é»˜è®¤]ï¼šä¸ºè°ƒç”¨errorä½ç½®(æ–‡ä»¶+è¡Œå·)</strong></li>
<li><strong>Level=2ï¼šæŒ‡å‡ºå“ªä¸ªè°ƒç”¨errorçš„å‡½æ•°çš„å‡½æ•°</strong></li>
<li><strong>Level=0:ä¸æ·»åŠ é”™è¯¯ä½ç½®ä¿¡æ¯</strong></li>
</ul>
</li>
</ul>
<h3 id="18.5-pcall-%E5%92%8C-xpcall%E3%80%81debug" tabindex="-1">18.5 pcall å’Œ xpcallã€debug</h3>
<ol>
<li>pcall<br>
(1) Luaä¸­å¤„ç†é”™è¯¯ï¼Œå¯ä»¥<strong>ä½¿ç”¨å‡½æ•°pcallï¼ˆprotected callï¼‰æ¥åŒ…è£…éœ€è¦æ‰§è¡Œçš„ä»£ç </strong>ã€‚<br>
(2) pcallæ¥æ”¶<strong>ä¸€ä¸ªå‡½æ•°å’Œè¦ä¼ é€’ç»™åè€…(å³å‡½æ•°)çš„å‚æ•°</strong>ï¼Œå¹¶æ‰§è¡Œï¼Œ<strong>æ‰§è¡Œç»“æœ: æœ‰é”™è¯¯ã€æ— é”™è¯¯</strong>. è¿”å›å€¼<strong>trueæˆ–falseï¼Œerrorinfoï¼ˆå®é™…å¥½åƒåªè¿”å›ä¸€ä¸ªtrueæˆ–falseï¼Œæ²¡æœ‰å…¶ä»–ä¿¡æ¯ï¼‰</strong>ã€‚</li>
</ol>
<p>è¯­æ³•æ ¼å¼å¦‚ä¸‹:</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">pcall</span>(function_name, â€¦.) <span class="keyword">then</span></span><br><span class="line"><span class="comment">-- æ²¡æœ‰é”™è¯¯</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment">-- ä¸€äº›é”™è¯¯</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>(3) ç®€å•å®ä¾‹ï¼š</p>
<figure class="highlight lua"><figcaption><span>&#123;.line-numbers&#125;</span></figcaption><table><tr><td class="code"><pre><span class="line">f=<span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">(i)</span></span> <span class="built_in">print</span>(i) <span class="keyword">end</span>, <span class="number">33</span>)</span><br><span class="line"><span class="built_in">print</span>(f)</span><br><span class="line">   </span><br><span class="line">t=<span class="built_in">pcall</span>(<span class="function"><span class="keyword">function</span><span class="params">(i)</span></span> <span class="built_in">print</span>(i) <span class="built_in">error</span>(<span class="string">&#x27;error..&#x27;</span>) <span class="keyword">end</span>, <span class="number">33</span>)</span><br><span class="line"><span class="built_in">print</span>(t)</span><br><span class="line"></span><br><span class="line"><span class="comment">--[[</span></span><br><span class="line"><span class="comment">33</span></span><br><span class="line"><span class="comment">true</span></span><br><span class="line"><span class="comment">33</span></span><br><span class="line"><span class="comment">false  </span></span><br><span class="line"><span class="comment">]]</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬4è¡Œ ç”±äºerror(â€˜errorâ€¦â€™)ç»ˆæ­¢äº†æ­£åœ¨è¿›è¡Œçš„å‡½æ•°  æ‰€ä»¥è¿”å›false</p>
<p>(4) pcallä»¥ä¸€ç§ <strong>&quot;ä¿æŠ¤æ¨¡å¼&quot;æ¥è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°</strong>ï¼Œå› æ­¤pcallå¯ä»¥<strong>æ•è·å‡½æ•°æ‰§è¡Œä¸­çš„ä»»ä½•é”™è¯¯</strong>ã€‚é€šå¸¸åœ¨é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå¸Œæœ›è½å¾—æ›´å¤šçš„è°ƒè¯•ä¿¡æ¯ï¼Œè€Œä¸åªæ˜¯å‘ç”Ÿé”™è¯¯çš„ä½ç½®ã€‚ä½†<strong>pcallè¿”å›æ—¶ï¼Œå®ƒå·²ç»é”€æ¯äº†è°ƒç”¨æ¡Ÿçš„éƒ¨åˆ†å†…å®¹</strong>ã€‚</p>
<ol start="2">
<li>xpcallä¸debug<br>
(1) Luaæä¾›äº†xpcallå‡½æ•°ï¼Œ<strong>xpcallæ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°â€”â€”ä¸€ä¸ªé”™è¯¯å¤„ç†å‡½æ•°</strong>ï¼Œå½“<strong>é”™è¯¯å‘ç”Ÿ</strong>æ—¶ï¼Œ<strong>Luaä¼šåœ¨è°ƒç”¨æ¡Ÿå±•å¼€ï¼ˆunwindï¼‰å‰è°ƒç”¨é”™è¯¯å¤„ç†å‡½æ•°</strong>ï¼Œäºæ˜¯å°±å¯ä»¥<strong>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½¿ç”¨debugåº“æ¥è·å–å…³äºé”™è¯¯çš„é¢å¤–ä¿¡æ¯</strong>äº†ã€‚</li>
</ol>
<p>(2) <strong>debug</strong>åº“æä¾›äº†ä¸¤ä¸ªé€šç”¨çš„<strong>é”™è¯¯å¤„ç†å‡½æ•°</strong>:</p>
<ul>
<li>debug.debugï¼š<strong>æä¾›ä¸€ä¸ªLuaæç¤ºç¬¦ï¼Œè®©ç”¨æˆ·æ¥æ£€æŸ¥é”™è¯¯çš„åŸå› </strong></li>
<li>debug.tracebackï¼š<strong>æ ¹æ®è°ƒç”¨æ¡Ÿæ¥æ„å»ºä¸€ä¸ªæ‰©å±•çš„é”™è¯¯æ¶ˆæ¯</strong></li>
</ul>
<p>(3) å®ä¾‹</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">&gt;=<span class="built_in">xpcall</span>(<span class="function"><span class="keyword">function</span><span class="params">(i)</span></span> <span class="built_in">print</span>(i) <span class="built_in">error</span>(<span class="string">&#x27;error..&#x27;</span>) <span class="keyword">end</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span></span> <span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">traceback</span>()) <span class="keyword">end</span>, <span class="number">33</span>)</span><br><span class="line"><span class="number">33</span></span><br><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line"><span class="built_in">stdin</span>:<span class="number">1</span>: <span class="keyword">in</span> <span class="function"><span class="keyword">function</span> &lt;<span class="title">stdin</span>:1&gt;</span></span><br><span class="line"><span class="function">[<span class="title">C</span>]: <span class="title">in</span> <span class="title">function</span> &#x27;<span class="title">error</span>&#x27;</span></span><br><span class="line"><span class="function"><span class="title">stdin</span>:1: <span class="title">in</span> <span class="title">function</span> &lt;<span class="title">stdin</span>:1&gt;</span></span><br><span class="line"><span class="function">[<span class="title">C</span>]: <span class="title">in</span> <span class="title">function</span> &#x27;<span class="title">xpcall</span>&#x27;</span></span><br><span class="line"><span class="function"><span class="title">stdin</span>:1: <span class="title">in</span> <span class="title">main</span> <span class="title">chunk</span></span></span><br><span class="line"><span class="function">[<span class="title">C</span>]: <span class="title">in</span> ?</span></span><br><span class="line"><span class="function"><span class="title">false</span>        <span class="title">nil</span></span></span><br></pre></td></tr></table></figure>
<p>(4) å®ä¾‹2</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myfunction</span> <span class="params">()</span></span></span><br><span class="line">   n = n/<span class="literal">nil</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myerrorhandler</span><span class="params">( err )</span></span></span><br><span class="line">   <span class="built_in">print</span>( <span class="string">&quot;ERROR:&quot;</span>, err )</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">status</span> = <span class="built_in">xpcall</span>( myfunction, myerrorhandler )</span><br><span class="line"><span class="built_in">print</span>( <span class="built_in">status</span>)</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šç¨‹åºä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">ERROR:    test2.lua:<span class="number">2</span>: attempt to perform arithmetic on global <span class="string">&#x27;n&#x27;</span> (a <span class="literal">nil</span> value)</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h1 id="%E5%8D%81%E4%B9%9D-%E8%B0%83%E8%AF%95(debug)" tabindex="-1">åä¹ è°ƒè¯•(Debug)</h1>
<h3 id="19.1-%E6%A6%82%E8%BF%B0%E5%8F%8Adebug%E7%9A%84%E6%96%B9%E6%B3%95" tabindex="-1">19.1 æ¦‚è¿°åŠDebugçš„æ–¹æ³•</h3>
<ol>
<li>
<p>Lua æä¾›äº† debug åº“ç”¨äºæä¾›åˆ›å»ºæˆ‘ä»¬è‡ªå®šä¹‰è°ƒè¯•å™¨çš„åŠŸèƒ½ã€‚Lua æœ¬èº«å¹¶æœªæœ‰å†…ç½®çš„è°ƒè¯•å™¨ï¼Œä½†å¾ˆå¤šå¼€å‘è€…å…±äº«äº†ä»–ä»¬çš„ Lua è°ƒè¯•å™¨ä»£ç ã€‚</p>
</li>
<li>
<p>Lua ä¸­ debug åº“åŒ…å«ä»¥ä¸‹å‡½æ•°ï¼š</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>æ–¹æ³•</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>debug()</td>
<td><strong>è¿›å…¥ä¸€ä¸ªç”¨æˆ·äº¤äº’æ¨¡å¼ï¼Œè¿è¡Œç”¨æˆ·è¾“å…¥çš„æ¯ä¸ªå­—ç¬¦ä¸²</strong>ã€‚ ä½¿ç”¨ç®€å•çš„å‘½ä»¤ä»¥åŠå…¶å®ƒè°ƒè¯•è®¾ç½®ï¼Œç”¨æˆ·å¯ä»¥æ£€é˜…å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ï¼Œ æ”¹å˜å˜é‡çš„å€¼ï¼Œè®¡ç®—ä¸€äº›è¡¨è¾¾å¼ï¼Œç­‰ç­‰ã€‚<br>è¾“å…¥ä¸€è¡Œä»…åŒ…å« cont çš„å­—ç¬¦ä¸²å°†ç»“æŸè¿™ä¸ªå‡½æ•°ï¼Œ è¿™æ ·è°ƒç”¨è€…å°±å¯ä»¥ç»§ç»­å‘ä¸‹è¿è¡Œã€‚</td>
</tr>
<tr>
<td>2</td>
<td>getfenv(object)</td>
<td><strong>è¿”å›å¯¹è±¡çš„ç¯å¢ƒå˜é‡</strong>ã€‚</td>
</tr>
<tr>
<td>3</td>
<td>gethook(optional thread)</td>
<td><strong>è¿”å›ä¸‰ä¸ªè¡¨ç¤ºçº¿ç¨‹é’©å­è®¾ç½®çš„å€¼</strong>ï¼š å½“å‰é’©å­å‡½æ•°ï¼Œå½“å‰é’©å­æ©ç ï¼Œå½“å‰é’©å­è®¡æ•°</td>
</tr>
<tr>
<td>4</td>
<td>getinfo ([thread,] f [, what])</td>
<td><strong>è¿”å›å…³äºä¸€ä¸ªå‡½æ•°ä¿¡æ¯çš„è¡¨</strong>ã€‚ ä½ å¯ä»¥ç›´æ¥æä¾›è¯¥å‡½æ•°ï¼Œ ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªæ•°å­— f è¡¨ç¤ºè¯¥å‡½æ•°ã€‚ æ•°å­— <strong>f è¡¨ç¤ºè¿è¡Œåœ¨æŒ‡å®šçº¿ç¨‹çš„è°ƒç”¨æ ˆå¯¹åº”å±‚æ¬¡ä¸Šçš„å‡½æ•°</strong>ï¼š <strong>0 å±‚è¡¨ç¤ºå½“å‰å‡½æ•°</strong>ï¼ˆ<strong>getinfo è‡ªèº«</strong>ï¼‰ï¼› <strong>1 å±‚è¡¨ç¤ºè°ƒç”¨ getinfo çš„å‡½æ•°</strong> ï¼ˆé™¤éæ˜¯å°¾è°ƒç”¨ï¼Œè¿™ç§æƒ…å†µä¸è®¡å…¥æ ˆï¼‰ï¼›ç­‰ç­‰ã€‚ å¦‚æœ <strong>f æ˜¯ä¸€ä¸ªæ¯”æ´»åŠ¨å‡½æ•°æ•°é‡è¿˜å¤§çš„æ•°å­—</strong>ï¼Œ getinfo <strong>è¿”å› nil</strong>ã€‚</td>
</tr>
<tr>
<td>5</td>
<td>debug.getlocal ([thread,] f, local)</td>
<td>æ­¤å‡½æ•°<strong>è¿”å›åœ¨æ ˆçš„ f å±‚å¤„å‡½æ•°çš„ç´¢å¼•ä¸º local çš„å±€éƒ¨å˜é‡ çš„åå­—å’Œå€¼</strong>ã€‚ è¿™ä¸ªå‡½æ•°ä¸ä»…ç”¨äºè®¿é—®æ˜¾å¼å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œä¹ŸåŒ…æ‹¬å½¢å‚ã€ä¸´æ—¶å˜é‡ç­‰ã€‚</td>
</tr>
<tr>
<td>6</td>
<td>getmetatable(value)</td>
<td><strong>æŠŠç»™å®šç´¢å¼•æŒ‡å‘çš„å€¼çš„å…ƒè¡¨å‹å…¥å †æ ˆ</strong>ã€‚å¦‚æœ<strong>ç´¢å¼•æ— æ•ˆ</strong>ï¼Œæˆ–æ˜¯è¿™ä¸ªå€¼æ²¡æœ‰å…ƒè¡¨ï¼Œ<strong>å‡½æ•°å°†è¿”å› 0 å¹¶ä¸”ä¸ä¼šå‘æ ˆä¸Šå‹ä»»ä½•ä¸œè¥¿</strong>ã€‚</td>
</tr>
<tr>
<td>7.</td>
<td>getregistry()</td>
<td><strong>è¿”å›æ³¨å†Œè¡¨è¡¨</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢„å®šä¹‰å‡ºæ¥çš„è¡¨ï¼Œ å¯ä»¥ç”¨æ¥<strong>ä¿å­˜ä»»ä½• C ä»£ç æƒ³ä¿å­˜çš„ Lua å€¼</strong>ã€‚</td>
</tr>
<tr>
<td>8</td>
<td>getupvalue (f, up)</td>
<td>æ­¤å‡½æ•°<strong>è¿”å›å‡½æ•° f çš„ç¬¬ up ä¸ªä¸Šå€¼çš„åå­—å’Œå€¼(å³å‡½æ•°ä¸­å®šä¹‰çš„ç¬¬upä¸ªå˜é‡çš„åå’Œå€¼)</strong>ã€‚ å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰é‚£ä¸ªä¸Šå€¼ï¼Œè¿”å› nil ã€‚<br>ä»¥ â€˜(â€™ ï¼ˆå¼€æ‹¬å·ï¼‰æ‰“å¤´çš„å˜é‡åè¡¨ç¤ºæ²¡æœ‰åå­—çš„å˜é‡ ï¼ˆå»é™¤äº†è°ƒè¯•ä¿¡æ¯çš„ä»£ç å—ï¼‰ã€‚</td>
</tr>
<tr>
<td>9</td>
<td>sethook ([thread,] hook, mask [, count])</td>
<td><strong>å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºé’©å­å‡½æ•°è®¾å…¥</strong>ã€‚ å­—ç¬¦ä¸² mask ä»¥åŠæ•°å­— count <strong>å†³å®šäº†é’©å­å°†åœ¨ä½•æ—¶è°ƒç”¨</strong>ã€‚ æ©ç æ˜¯ç”±ä¸‹åˆ—å­—ç¬¦ç»„åˆæˆçš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦æœ‰å…¶å«ä¹‰ï¼š<strong><br>â€˜câ€™: æ¯å½“ Lua è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè°ƒç”¨é’©å­ï¼›<br>â€˜râ€™: æ¯å½“ Lua ä»ä¸€ä¸ªå‡½æ•°å†…è¿”å›æ—¶ï¼Œè°ƒç”¨é’©å­ï¼›<br>â€˜lâ€™: æ¯å½“ Lua è¿›å…¥æ–°çš„ä¸€è¡Œæ—¶ï¼Œè°ƒç”¨é’©å­</strong>ã€‚</td>
</tr>
<tr>
<td>10</td>
<td>setlocal ([thread,] level, local, value)</td>
<td>è¿™ä¸ªå‡½æ•°<strong>å°† value èµ‹ç»™ æ ˆä¸Šç¬¬ level å±‚å‡½æ•°çš„ç¬¬ local ä¸ªå±€éƒ¨å˜é‡</strong>ã€‚ å¦‚æœ<strong>æ²¡æœ‰</strong>é‚£ä¸ªå˜é‡ï¼Œå‡½æ•°<strong>è¿”å› nil</strong> ã€‚ å¦‚æœ level<strong>è¶Šç•Œ</strong>ï¼Œ<strong>æŠ›å‡º</strong>ä¸€ä¸ª<strong>é”™è¯¯</strong>ã€‚</td>
</tr>
<tr>
<td>11</td>
<td>setmetatable (value, table)</td>
<td><strong>å°† value çš„å…ƒè¡¨è®¾ä¸º table</strong>ï¼ˆå¯ä»¥æ˜¯ nilï¼‰ã€‚ è¿”å› valueã€‚</td>
</tr>
<tr>
<td>12</td>
<td>setupvalue (f, up, value)</td>
<td><strong>è¿™ä¸ªå‡½æ•°å°† value è®¾ä¸ºå‡½æ•° f çš„ç¬¬ up ä¸ªä¸Šå€¼</strong>ã€‚ å¦‚æœå‡½æ•°æ²¡æœ‰é‚£ä¸ªä¸Šå€¼ï¼Œè¿”å› nil å¦åˆ™ï¼Œè¿”å›è¯¥ä¸Šå€¼çš„åå­—ã€‚</td>
</tr>
<tr>
<td>13</td>
<td>traceback ([thread,] [message [, level]])</td>
<td><strong>å¦‚æœ message æœ‰ï¼Œä¸”ä¸æ˜¯å­—ç¬¦ä¸²æˆ– nilï¼Œ å‡½æ•°ä¸åšä»»ä½•å¤„ç†ç›´æ¥è¿”å› message</strong>ã€‚ <strong>å¦åˆ™</strong>ï¼Œå®ƒ<strong>è¿”å›è°ƒç”¨æ ˆçš„æ ˆå›æº¯ä¿¡æ¯</strong>ã€‚ å­—ç¬¦ä¸²å¯é€‰é¡¹ message è¢«æ·»åŠ åœ¨æ ˆå›æº¯ä¿¡æ¯çš„å¼€å¤´ã€‚ æ•°å­—<strong>å¯é€‰é¡¹ level æŒ‡æ˜ä»æ ˆçš„å“ªä¸€å±‚å¼€å§‹å›æº¯</strong> ï¼ˆ**é»˜è®¤ä¸º 1 **ï¼Œå³è°ƒç”¨ traceback çš„é‚£é‡Œï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<ol start="3">
<li>ä¸Šè¡¨åˆ—å‡ºäº†æˆ‘ä»¬å¸¸ç”¨çš„è°ƒè¯•å‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥çœ‹äº›ç®€å•çš„ä¾‹å­ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myfunction</span> <span class="params">()</span></span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">traceback</span>(<span class="string">&quot;Stack trace&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Stack trace end&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">myfunction ()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">debug</span>.<span class="built_in">getinfo</span>(<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Stack trace</span><br><span class="line">stack <span class="built_in">traceback</span>:</span><br><span class="line">c:\Users\XXX\Desktop\notes\Lua\test.lua:<span class="number">2</span>: <span class="keyword">in</span> <span class="function"><span class="keyword">function</span> &#x27;<span class="title">myfunction</span>&#x27;</span></span><br><span class="line"><span class="function"><span class="title">c</span>:\<span class="title">Users</span>\<span class="title">XXX</span>\<span class="title">Desktop</span>\<span class="title">notes</span>\<span class="title">Lua</span>\<span class="title">test.lua</span>:7: <span class="title">in</span> <span class="title">main</span> <span class="title">chunk</span></span></span><br><span class="line"><span class="function">[<span class="title">C</span>]: ?</span></span><br><span class="line"><span class="function"><span class="title">table</span>: 03069<span class="title">D28</span></span></span><br><span class="line"><span class="function"><span class="title">Stack</span> <span class="title">trace</span> <span class="title">end</span></span></span><br><span class="line"><span class="function"><span class="title">table</span>: 03069<span class="title">C60</span></span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li>æˆ‘ä»¬ç»å¸¸éœ€è¦è°ƒè¯•å‡½æ•°çš„å†…çš„å±€éƒ¨å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setupvalue å‡½æ•°æ¥è®¾ç½®è¿™äº›å±€éƒ¨å˜é‡ã€‚å®ä¾‹å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">newCounter</span> <span class="params">()</span></span></span><br><span class="line">  <span class="keyword">local</span> n = <span class="number">0</span></span><br><span class="line">  <span class="keyword">local</span> k = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">    k = n</span><br><span class="line">    n = n + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">counter = newCounter ()</span><br><span class="line"><span class="built_in">print</span>(counter())</span><br><span class="line"><span class="built_in">print</span>(counter())</span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">repeat</span></span><br><span class="line">  name, val = <span class="built_in">debug</span>.<span class="built_in">getupvalue</span>(counter, i)</span><br><span class="line">  <span class="keyword">if</span> name <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;index&quot;</span>, i, name, <span class="string">&quot;=&quot;</span>, val)</span><br><span class="line">        <span class="keyword">if</span>(name == <span class="string">&quot;n&quot;</span>) <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">debug</span>.<span class="built_in">setupvalue</span> (counter,<span class="number">2</span>,<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line">  <span class="keyword">end</span> <span class="comment">-- if</span></span><br><span class="line"><span class="keyword">until</span> <span class="keyword">not</span> name</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(counter())</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">index    <span class="number">1</span>    k    =    <span class="number">1</span></span><br><span class="line">index    <span class="number">2</span>    n    =    <span class="number">2</span></span><br><span class="line"><span class="number">11</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œè®¡æ•°å™¨åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šè‡ªå¢1ã€‚å®ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº† getupvalue å‡½æ•°æŸ¥çœ‹å±€éƒ¨å˜é‡çš„å½“å‰çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥<strong>è®¾ç½®å±€éƒ¨å˜é‡ä¸ºæ–°å€¼ã€‚å®ä¾‹ä¸­ï¼Œåœ¨è®¾ç½®å‰ n çš„å€¼ä¸º 2,ä½¿ç”¨ setupvalue å‡½æ•°å°†å…¶è®¾ç½®ä¸º 10ã€‚ç°åœ¨æˆ‘ä»¬è°ƒç”¨å‡½æ•°ï¼Œæ‰§è¡Œåè¾“å‡ºä¸º 11 è€Œä¸æ˜¯ 3</strong>ã€‚</p>
<h3 id="19.2-%E8%B0%83%E8%AF%95%E7%B1%BB%E5%9E%8B" tabindex="-1">19.2 è°ƒè¯•ç±»å‹</h3>
<ul>
<li>å‘½ä»¤è¡Œè°ƒè¯•
<ul>
<li>å‘½ä»¤è¡Œè°ƒè¯•å™¨æœ‰ï¼šRemDebugã€clidebuggerã€ctraceã€xdbLuaã€LuaInterface - Debuggerã€Rldbã€ModDebugã€‚</li>
</ul>
</li>
<li>å›¾å½¢ç•Œé¢è°ƒè¯•
<ul>
<li>å›¾å½¢ç•Œè°ƒè¯•å™¨æœ‰ï¼šSciTEã€Decodaã€ZeroBrane Studioã€akdebuggerã€luaeditã€‚</li>
</ul>
</li>
</ul>
<h1 id="%E4%BA%8C%E5%8D%81-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6" tabindex="-1">äºŒå åƒåœ¾å›æ”¶</h1>
<h3 id="20.1-%E6%A6%82%E8%BF%B0" tabindex="-1">20.1 æ¦‚è¿°</h3>
<ol>
<li>
<p>Lua é‡‡ç”¨äº†<strong>è‡ªåŠ¨å†…å­˜ç®¡ç†</strong>ã€‚ è¿™æ„å‘³ç€ä½ <strong>ä¸ç”¨æ“å¿ƒ</strong>æ–°åˆ›å»ºçš„å¯¹è±¡éœ€è¦çš„å†…å­˜å¦‚ä½•åˆ†é…å‡ºæ¥ï¼Œ ä¹Ÿä¸ç”¨è€ƒè™‘åœ¨å¯¹è±¡ä¸å†è¢«ä½¿ç”¨åæ€æ ·é‡Šæ”¾å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ã€‚</p>
</li>
<li>
<p>Luaè¿è¡Œäº†ä¸€ä¸ª<strong>åƒåœ¾æ”¶é›†å™¨</strong>æ¥æ”¶é›†æ‰€æœ‰<strong>æ­»å¯¹è±¡</strong> ï¼ˆå³åœ¨ Lua ä¸­ä¸å¯èƒ½å†è®¿é—®åˆ°çš„å¯¹è±¡ï¼‰<strong>æ¥å®Œæˆè‡ªåŠ¨å†…å­˜ç®¡ç†çš„å·¥ä½œ</strong>ã€‚ Lua ä¸­æ‰€æœ‰ç”¨åˆ°çš„å†…å­˜ï¼Œå¦‚ï¼š<strong>å­—ç¬¦ä¸²ã€è¡¨ã€ç”¨æˆ·æ•°æ®ã€å‡½æ•°ã€çº¿ç¨‹ã€ å†…éƒ¨ç»“æ„ç­‰ï¼Œéƒ½æœä»è‡ªåŠ¨ç®¡ç†</strong>ã€‚</p>
</li>
<li>
<p>Lua å®ç°äº†ä¸€ä¸ª<strong>å¢é‡æ ‡è®°-æ‰«ææ”¶é›†å™¨</strong>ã€‚ å®ƒ<strong>ä½¿ç”¨è¿™ä¸¤ä¸ªæ•°å­—æ¥æ§åˆ¶åƒåœ¾æ”¶é›†å¾ªç¯</strong>ï¼š <strong>åƒåœ¾æ”¶é›†å™¨é—´æ­‡ç‡å’Œåƒåœ¾æ”¶é›†å™¨æ­¥è¿›å€ç‡</strong>ã€‚ è¿™ä¸¤ä¸ªæ•°å­—éƒ½ä½¿ç”¨ç™¾åˆ†æ•°ä¸ºå•ä½ ï¼ˆä¾‹å¦‚ï¼šå€¼ 100 åœ¨å†…éƒ¨è¡¨ç¤º 1 ï¼‰ã€‚</p>
</li>
<li>
<p><strong>åƒåœ¾æ”¶é›†å™¨é—´æ­‡ç‡</strong>æ§åˆ¶ç€æ”¶é›†å™¨éœ€è¦åœ¨<strong>å¼€å¯æ–°çš„å¾ªç¯å‰è¦ç­‰å¾…å¤šä¹…</strong>ã€‚ <strong>å¢å¤§è¿™ä¸ªå€¼ä¼šå‡å°‘æ”¶é›†å™¨çš„ç§¯ææ€§</strong>ã€‚ å½“è¿™ä¸ªå€¼æ¯” 100 å°çš„æ—¶å€™ï¼Œæ”¶é›†å™¨åœ¨å¼€å¯æ–°çš„å¾ªç¯å‰ä¸ä¼šæœ‰ç­‰å¾…ã€‚ è®¾ç½®è¿™ä¸ªå€¼ä¸º 200 å°±ä¼šè®©æ”¶é›†å™¨ç­‰åˆ°æ€»å†…å­˜ä½¿ç”¨é‡è¾¾åˆ° ä¹‹å‰çš„ä¸¤å€æ—¶æ‰å¼€å§‹æ–°çš„å¾ªç¯ã€‚</p>
</li>
<li>
<p><strong>åƒåœ¾æ”¶é›†å™¨æ­¥è¿›å€ç‡</strong>æ§åˆ¶ç€<strong>æ”¶é›†å™¨è¿ä½œé€Ÿåº¦ç›¸å¯¹äºå†…å­˜åˆ†é…é€Ÿåº¦çš„å€ç‡</strong>ã€‚ å¢å¤§è¿™ä¸ªå€¼<strong>ä¸ä»…ä¼šè®©æ”¶é›†å™¨æ›´åŠ ç§¯æï¼Œè¿˜ä¼šå¢åŠ æ¯ä¸ªå¢é‡æ­¥éª¤çš„é•¿åº¦</strong>ã€‚ ä¸è¦æŠŠè¿™ä¸ªå€¼è®¾å¾—å°äº 100 ï¼Œ é‚£æ ·çš„è¯æ”¶é›†å™¨å°±å·¥ä½œçš„å¤ªæ…¢äº†ä»¥è‡³äºæ°¸è¿œéƒ½å¹²ä¸å®Œä¸€ä¸ªå¾ªç¯ã€‚ é»˜è®¤å€¼æ˜¯ 200 ï¼Œè¿™è¡¨ç¤ºæ”¶é›†å™¨ä»¥å†…å­˜åˆ†é…çš„&quot;ä¸¤å€&quot;é€Ÿå·¥ä½œã€‚</p>
</li>
<li>
<p>å¦‚æœä½ æŠŠæ­¥è¿›å€ç‡è®¾ä¸ºä¸€ä¸ªéå¸¸å¤§çš„æ•°å­— ï¼ˆæ¯”ä½ çš„ç¨‹åºå¯èƒ½ç”¨åˆ°çš„å­—èŠ‚æ•°è¿˜å¤§ 10% ï¼‰ï¼Œ æ”¶é›†å™¨çš„è¡Œä¸ºå°±åƒä¸€ä¸ª stop-the-world æ”¶é›†å™¨ã€‚ æ¥ç€ä½ è‹¥æŠŠé—´æ­‡ç‡è®¾ä¸º 200 ï¼Œ æ”¶é›†å™¨çš„è¡Œä¸ºå°±å’Œè¿‡å»çš„ Lua ç‰ˆæœ¬ä¸€æ ·äº†ï¼š æ¯æ¬¡ Lua ä½¿ç”¨çš„å†…å­˜ç¿»å€æ—¶ï¼Œå°±åšä¸€æ¬¡å®Œæ•´çš„æ”¶é›†ã€‚</p>
</li>
</ol>
<h3 id="20.2-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E5%87%BD%E6%95%B0" tabindex="-1">20.2 åƒåœ¾å›æ”¶å™¨å‡½æ•°</h3>
<ol>
<li>Lua æä¾›äº†ä»¥ä¸‹å‡½æ•°<strong>collectgarbage ([opt [, arg]])<strong>ç”¨æ¥æ§åˆ¶è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œæ ¹æ®</strong>å‚æ•°optçš„ä¸åŒï¼Œæä¾›ä¸åŒçš„åŠŸèƒ½</strong>:</li>
</ol>
<ul>
<li>
<p>collectgarbage(â€œcollectâ€): <strong>åšä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†å¾ªç¯</strong>ã€‚é€šè¿‡å‚æ•° opt å®ƒæä¾›äº†ä¸€ç»„ä¸åŒçš„åŠŸèƒ½ï¼š</p>
</li>
<li>
<p>collectgarbage(â€œcountâ€): <strong>ä»¥ K å­—èŠ‚æ•°ä¸ºå•ä½è¿”å› Lua ä½¿ç”¨çš„æ€»å†…å­˜æ•°</strong>ã€‚ è¿™ä¸ªå€¼æœ‰å°æ•°éƒ¨åˆ†ï¼Œæ‰€ä»¥åªéœ€è¦<strong>ä¹˜ä¸Š 1024 å°±èƒ½å¾—åˆ° Lua ä½¿ç”¨çš„å‡†ç¡®å­—èŠ‚æ•°</strong>ï¼ˆé™¤éæº¢å‡ºï¼‰ã€‚</p>
</li>
<li>
<p>collectgarbage(â€œrestartâ€): <strong>é‡å¯åƒåœ¾æ”¶é›†å™¨çš„è‡ªåŠ¨è¿è¡Œ</strong>ã€‚</p>
</li>
<li>
<p>collectgarbage(â€œsetpauseâ€): å°† <strong>arg è®¾ä¸ºæ”¶é›†å™¨çš„ é—´æ­‡ç‡</strong>ã€‚ <strong>è¿”å› é—´æ­‡ç‡ çš„å‰ä¸€ä¸ªå€¼</strong>ã€‚</p>
</li>
<li>
<p>collectgarbage(â€œsetstepmulâ€): è¿”å› <strong>æ­¥è¿›å€ç‡ çš„å‰ä¸€ä¸ªå€¼</strong>ã€‚</p>
</li>
<li>
<p>collectgarbage(â€œstepâ€): <strong>å•æ­¥è¿è¡Œåƒåœ¾æ”¶é›†å™¨</strong>ã€‚ æ­¥é•¿&quot;å¤§å°&quot;ç”± arg æ§åˆ¶ã€‚ ä¼ å…¥ 0 æ—¶ï¼Œæ”¶é›†å™¨æ­¥è¿›ï¼ˆä¸å¯åˆ†å‰²çš„ï¼‰ä¸€æ­¥ã€‚ ä¼ å…¥é 0 å€¼ï¼Œ æ”¶é›†å™¨æ”¶é›†ç›¸å½“äº Lua åˆ†é…è¿™äº›å¤šï¼ˆK å­—èŠ‚ï¼‰å†…å­˜çš„å·¥ä½œã€‚ å¦‚æœæ”¶é›†å™¨ç»“æŸä¸€ä¸ªå¾ªç¯å°†è¿”å› true ã€‚</p>
</li>
<li>
<p>collectgarbage(â€œstopâ€): <strong>åœæ­¢åƒåœ¾æ”¶é›†å™¨çš„è¿è¡Œ</strong>ã€‚ åœ¨è°ƒç”¨é‡å¯å‰ï¼Œæ”¶é›†å™¨åªä¼šå› æ˜¾å¼çš„è°ƒç”¨è¿è¡Œã€‚</p>
</li>
</ul>
<ol start="2">
<li>å®ä¾‹</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">mytable = &#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;banana&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">collectgarbage</span>(<span class="string">&quot;count&quot;</span>))</span><br><span class="line"></span><br><span class="line">mytable = <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">collectgarbage</span>(<span class="string">&quot;count&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">collectgarbage</span>(<span class="string">&quot;collect&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">collectgarbage</span>(<span class="string">&quot;count&quot;</span>))</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šç¨‹åºï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹(æ³¨æ„å†…å­˜ä½¿ç”¨çš„å˜åŒ–)ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="number">20.9560546875</span></span><br><span class="line"><span class="number">20.9853515625</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">19.4111328125</span></span><br></pre></td></tr></table></figure>
<p>luaä¸­ æœ‰è‡ªåŠ¨å®šæ—¶æ‰§è¡Œåƒåœ¾å›æ”¶çš„æœºåˆ¶<br>
unityä¸­çƒ­æ›´æ–°å¼€å‘ å°½é‡ä¸è¦å»è‡ªåŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">é€šè¿‡<span class="built_in">collectgarbage</span>(<span class="string">&quot;setpause&quot;</span>,<span class="number">100</span>) è®¾ç½®åƒåœ¾å›æ”¶çš„é—´éš”æ—¶é—´</span><br><span class="line">é€šè¿‡<span class="built_in">collectgarbage</span>(<span class="string">&quot;setstepmul&quot;</span>,<span class="number">200</span>) è®¾ç½®åƒåœ¾å›æ”¶çš„é€Ÿåº¦</span><br><span class="line">é€šè¿‡<span class="built_in">collectgarbage</span>(<span class="string">&quot;stop&quot;</span>) åœæ­¢è‡ªåŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶</span><br><span class="line">é€šè¿‡<span class="built_in">collectgarbage</span>(<span class="string">&quot;restart&quot;</span>) é‡æ–°å¼€å§‹è‡ªåŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶</span><br><span class="line">é€šè¿‡<span class="built_in">collectgarbage</span>(<span class="string">&quot;step&quot;</span>,<span class="number">100</span>) æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶</span><br><span class="line">é€šè¿‡<span class="built_in">collectgarbage</span>(<span class="string">&quot;isrunning&quot;</span>) åˆ¤æ–­åƒåœ¾å›æ”¶æ˜¯å¦æ­£åœ¨æ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<h1 id="%E4%BA%8C%E5%8D%81%E4%B8%80-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">äºŒåä¸€ é¢å‘å¯¹è±¡ï¼ˆâ­ï¼‰</h1>
<h3 id="21.1-%E6%A6%82%E8%BF%B0" tabindex="-1">21.1 æ¦‚è¿°</h3>
<ol>
<li>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programmingï¼ŒOOPï¼‰æ˜¯ä¸€ç§éå¸¸æµè¡Œçš„è®¡ç®—æœºç¼–ç¨‹æ¶æ„ã€‚<br>
ä»¥ä¸‹å‡ ç§ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼š</li>
</ol>
<ul>
<li>C++</li>
<li>Java</li>
<li>Objective-C</li>
<li>Smalltalk</li>
<li>C#</li>
<li>Ruby</li>
</ul>
<h3 id="21.2-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%89%B9%E5%BE%81" tabindex="-1">21.2 é¢å‘å¯¹è±¡ç‰¹å¾</h3>
<p><strong>ä¸€èˆ¬æ˜¯ å°è£…ã€ç»§æ‰¿ã€å¤šæ€</strong></p>
<ul>
<li>1ï¼‰ å°è£…ï¼šæŒ‡èƒ½å¤ŸæŠŠä¸€ä¸ªå®ä½“çš„ä¿¡æ¯ã€åŠŸèƒ½ã€å“åº”éƒ½è£…å…¥ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡ä¸­çš„ç‰¹æ€§ã€‚</li>
<li>2ï¼‰ ç»§æ‰¿ï¼šç»§æ‰¿çš„æ–¹æ³•å…è®¸åœ¨ä¸æ”¹åŠ¨åŸç¨‹åºçš„åŸºç¡€ä¸Šå¯¹å…¶è¿›è¡Œæ‰©å……ï¼Œè¿™æ ·ä½¿å¾—åŸåŠŸèƒ½å¾—ä»¥ä¿å­˜ï¼Œè€Œæ–°åŠŸèƒ½ä¹Ÿå¾—ä»¥æ‰©å±•ã€‚è¿™æœ‰åˆ©äºå‡å°‘é‡å¤ç¼–ç ï¼Œæé«˜è½¯ä»¶çš„å¼€å‘æ•ˆç‡ã€‚</li>
<li>3ï¼‰ å¤šæ€ï¼šåŒä¸€æ“ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡ï¼Œå¯ä»¥æœ‰ä¸åŒçš„è§£é‡Šï¼Œäº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‡å‘åŸºç±»çš„æŒ‡é’ˆï¼Œæ¥è°ƒç”¨å®ç°æ´¾ç”Ÿç±»ä¸­çš„æ–¹æ³•ã€‚</li>
<li>4ï¼‰æŠ½è±¡ï¼šæŠ½è±¡(Abstraction)æ˜¯ç®€åŒ–å¤æ‚çš„ç°å®é—®é¢˜çš„é€”å¾„ï¼Œå®ƒå¯ä»¥ä¸ºå…·ä½“é—®é¢˜æ‰¾åˆ°æœ€æ°å½“çš„ç±»å®šä¹‰ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æœ€æ°å½“çš„ç»§æ‰¿çº§åˆ«è§£é‡Šé—®é¢˜ã€‚</li>
</ul>
<h3 id="21.3-lua-%E4%B8%AD%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1" tabindex="-1">21.3 Lua ä¸­é¢å‘å¯¹è±¡</h3>
<ol>
<li>æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>å¯¹è±¡ç”±å±æ€§å’Œæ–¹æ³•ç»„æˆ</strong>ã€‚LUAä¸­æœ€åŸºæœ¬çš„ç»“æ„æ˜¯tableï¼Œæ‰€ä»¥éœ€è¦<strong>ç”¨tableæ¥æè¿°å¯¹è±¡çš„å±æ€§</strong>ã€‚</li>
<li>lua ä¸­çš„<strong>function å¯ä»¥ç”¨æ¥è¡¨ç¤ºæ–¹æ³•</strong>ã€‚é‚£ä¹ˆ<strong>LUAä¸­çš„ç±»å¯ä»¥é€šè¿‡ table + function æ¨¡æ‹Ÿå‡ºæ¥</strong>ã€‚</li>
<li>è‡³äº<strong>ç»§æ‰¿ï¼Œå¯ä»¥é€šè¿‡ metetable æ¨¡æ‹Ÿå‡ºæ¥</strong>ï¼ˆä¸æ¨èç”¨ï¼Œåªæ¨¡æ‹Ÿæœ€åŸºæœ¬çš„å¯¹è±¡å¤§éƒ¨åˆ†å®ç°å¤Ÿç”¨äº†ï¼‰ã€‚</li>
<li><strong>Lua ä¸­çš„è¡¨ä¸ä»…åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯ä¸€ç§å¯¹è±¡</strong>ã€‚åƒå¯¹è±¡ä¸€æ ·ï¼Œè¡¨ä¹Ÿæœ‰çŠ¶æ€ï¼ˆæˆå‘˜å˜é‡ï¼‰ï¼›ä¹Ÿæœ‰ä¸å¯¹è±¡çš„å€¼ç‹¬ç«‹çš„æœ¬æ€§ï¼Œç‰¹åˆ«æ˜¯æ‹¥æœ‰ä¸¤ä¸ªä¸åŒå€¼çš„å¯¹è±¡ï¼ˆtableï¼‰ä»£è¡¨ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼›ä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒçš„æ—¶å€™ä¹Ÿå¯ä»¥æœ‰ä¸åŒçš„å€¼ï¼Œä½†ä»–å§‹ç»ˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼›ä¸å¯¹è±¡ç±»ä¼¼ï¼Œè¡¨çš„ç”Ÿå‘½å‘¨æœŸä¸å…¶ç”±ä»€ä¹ˆåˆ›å»ºã€åœ¨å“ªåˆ›å»ºæ²¡æœ‰å…³ç³»ã€‚å¯¹è±¡æœ‰ä»–ä»¬çš„æˆå‘˜å‡½æ•°ï¼Œè¡¨ä¹Ÿæœ‰ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account = &#123;balance = <span class="number">0</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Account.withdraw</span> <span class="params">(v)</span></span></span><br><span class="line">    Account.balance = Account.balance - v</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå®šä¹‰åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶ä¸”ä¿å­˜åœ¨Accountå¯¹è±¡çš„withdrawåŸŸå†…ï¼Œä¸‹é¢æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Account.withdraw(<span class="number">100.00</span>)</span><br></pre></td></tr></table></figure>
<h3 id="21.4-%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B%EF%BC%88%E2%AD%90%EF%BC%89" tabindex="-1">21.4 ç®€å•å®ä¾‹ï¼ˆâ­ï¼‰</h3>
<ol>
<li>ä»¥ä¸‹ç®€å•çš„ç±»åŒ…å«äº†ä¸‰ä¸ªå±æ€§ï¼š area, length å’Œ breadthï¼ŒprintAreaæ–¹æ³•ç”¨äºæ‰“å°è®¡ç®—ç»“æœï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å…ƒç±»</span></span><br><span class="line">Rectangle = &#123;area = <span class="number">0</span>, length = <span class="number">0</span>, breadth = <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»çš„æ–¹æ³• new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle:new</span> <span class="params">(o,length,breadth)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  <span class="built_in">self</span>.length = length <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  <span class="built_in">self</span>.breadth = breadth <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  <span class="built_in">self</span>.area = length*breadth;</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»çš„æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;çŸ©å½¢é¢ç§¯ä¸º &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>åˆ›å»ºå¯¹è±¡</li>
</ol>
<p>åˆ›å»ºå¯¹è±¡æ˜¯ä¸ºç±»çš„å®ä¾‹åˆ†é…å†…å­˜çš„è¿‡ç¨‹ã€‚æ¯ä¸ªç±»éƒ½æœ‰å±äºè‡ªå·±çš„å†…å­˜å¹¶å…±äº«å…¬å…±æ•°æ®ã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">r = Rectangle:new(<span class="literal">nil</span>,<span class="number">10</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>è®¿é—®å±æ€§</li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‚¹å·(.)æ¥è®¿é—®ç±»çš„å±æ€§ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(r.length)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>è®¿é—®æˆå‘˜å‡½æ•°</li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†’å· : æ¥è®¿é—®ç±»çš„æˆå‘˜å‡½æ•°ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">r:printArea()</span><br></pre></td></tr></table></figure>
<p>å†…å­˜åœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶åˆ†é…ã€‚</p>
<ol start="5">
<li>ä»¥ä¸‹æˆ‘ä»¬æ¼”ç¤ºäº† Lua é¢å‘å¯¹è±¡çš„å®Œæ•´å®ä¾‹ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- å…ƒç±»</span></span><br><span class="line">Shape = &#123;area = <span class="number">0</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åŸºç¡€ç±»æ–¹æ³• new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape:new</span> <span class="params">(o,side)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  side = side <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  <span class="built_in">self</span>.area = side*side;</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åŸºç¡€ç±»æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;é¢ç§¯ä¸º &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">myshape = Shape:new(<span class="literal">nil</span>,<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">myshape:printArea()</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä»¥ä¸Šç¨‹åºï¼Œè¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">é¢ç§¯ä¸º     <span class="number">100</span></span><br></pre></td></tr></table></figure>
<h3 id="21.5-%E7%82%B9%E8%B0%83%E7%94%A8%E5%92%8C%E5%86%92%E5%8F%B7%E8%B0%83%E7%94%A8%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%88%E2%AD%90%E2%AD%90%E2%AD%90%EF%BC%89" tabindex="-1">21.5 ç‚¹è°ƒç”¨å’Œå†’å·è°ƒç”¨çš„åŒºåˆ«ï¼ˆâ­â­â­ï¼‰</h3>
<ul>
<li>ç‚¹å°±æ˜¯æ­£å¸¸è°ƒç”¨å‡½æ•°</li>
<li>å†’å·æ˜¯ä¼šæŠŠ è°ƒç”¨è€… ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥</li>
<li>å†’å·å¯ä»¥ç”¨æ¥å£°æ˜å‡½æ•° åªèƒ½æ˜¯function è¡¨å::å‡½æ•°å çš„å½¢å¼</li>
<li>å¦‚æœæ˜¯å†’å·å£°æ˜ç›¸å½“äºæœ‰ä¸€ä¸ªé»˜è®¤å‚æ•°self</li>
<li>luaä¸­ æœ‰ä¸€ä¸ªå…³é”®å­— self è¡¨ç¤º é»˜è®¤ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•° ã€‚ç”¨æ¥å†’å·å£°æ˜æ—¶ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„ä»£è¡¨</li>
<li>æ³¨: selfä¸æ˜¯this åªæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°</li>
</ul>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student:Speak2</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- luaä¸­ æœ‰ä¸€ä¸ªå…³é”®å­— self è¡¨ç¤º é»˜è®¤ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">self</span>.name..<span class="string">&quot;Speak2&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Student:Speak2()</span><br><span class="line">Student.Speak2(Student)</span><br></pre></td></tr></table></figure>
<h3 id="21.6-lua-%E7%BB%A7%E6%89%BF(%E2%AD%90%E2%AD%90%E2%AD%90)" tabindex="-1">21.6 Lua ç»§æ‰¿(â­â­â­)</h3>
<ol>
<li>ç»§æ‰¿æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡ç›´æ¥ä½¿ç”¨å¦ä¸€å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚å¯ç”¨äºæ‰©å±•åŸºç¡€ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚<br>
ä»¥ä¸‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ç»§æ‰¿å®ä¾‹ï¼š</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Meta class</span></span><br><span class="line">Shape = &#123;area = <span class="number">0</span>&#125;</span><br><span class="line"><span class="comment">-- åŸºç¡€ç±»æ–¹æ³• new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape:new</span> <span class="params">(o,side)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  side = side <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  <span class="built_in">self</span>.area = side*side;</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- åŸºç¡€ç±»æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;é¢ç§¯ä¸º &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>Square å¯¹è±¡ç»§æ‰¿äº† Shape ç±»:</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">Square = Shape:new()</span><br><span class="line"><span class="comment">-- Derived class method new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Square:new</span> <span class="params">(o,side)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> Shape:new(o,side)</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>å®Œæ•´ç¤ºä¾‹ï¼ˆâ­â­â­ï¼‰</li>
</ol>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- Meta class</span></span><br><span class="line">Shape = &#123;area = <span class="number">0</span>&#125;</span><br><span class="line"><span class="comment">-- åŸºç¡€ç±»æ–¹æ³• new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape:new</span> <span class="params">(o,side)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  side = side <span class="keyword">or</span> <span class="number">0</span></span><br><span class="line">  <span class="built_in">self</span>.area = side*side;</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- åŸºç¡€ç±»æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;é¢ç§¯ä¸º &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">myshape = Shape:new(<span class="literal">nil</span>,<span class="number">10</span>)</span><br><span class="line">myshape:printArea()</span><br><span class="line"></span><br><span class="line">Square = Shape:new()</span><br><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»æ–¹æ³• new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Square:new</span> <span class="params">(o,side)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> Shape:new(o,side)</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Square:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;æ­£æ–¹å½¢é¢ç§¯ä¸º &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">mysquare = Square:new(<span class="literal">nil</span>,<span class="number">10</span>)</span><br><span class="line">mysquare:printArea()</span><br><span class="line"></span><br><span class="line">Rectangle = Shape:new()</span><br><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»æ–¹æ³• new</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle:new</span> <span class="params">(o,length,breadth)</span></span></span><br><span class="line">  o = o <span class="keyword">or</span> Shape:new(o)</span><br><span class="line">  <span class="built_in">setmetatable</span>(o, <span class="built_in">self</span>)</span><br><span class="line">  <span class="built_in">self</span>.<span class="built_in">__index</span> = <span class="built_in">self</span></span><br><span class="line">  <span class="built_in">self</span>.area = length * breadth</span><br><span class="line">  <span class="keyword">return</span> o</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rectangle:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;çŸ©å½¢é¢ç§¯ä¸º &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">myrectangle = Rectangle:new(<span class="literal">nil</span>,<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">myrectangle:printArea()</span><br></pre></td></tr></table></figure>
<h3 id="21.7-lua%E5%A4%9A%E6%80%81%EF%BC%88%E5%87%BD%E6%95%B0%E9%87%8D%E5%86%99%EF%BC%89" tabindex="-1">21.7 Luaå¤šæ€ï¼ˆå‡½æ•°é‡å†™ï¼‰</h3>
<p>Lua ä¸­æˆ‘ä»¬å¯ä»¥é‡å†™åŸºç¡€ç±»çš„å‡½æ•°ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰è‡ªå·±çš„å®ç°æ–¹å¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æ´¾ç”Ÿç±»æ–¹æ³• printArea</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Square:printArea</span> <span class="params">()</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;æ­£æ–¹å½¢é¢ç§¯ &quot;</span>,<span class="built_in">self</span>.area)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="%E4%BA%8C%E5%8D%81%E4%BA%8C-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%EF%BC%88luasql%EF%BC%89" tabindex="-1">äºŒåäºŒ æ•°æ®åº“è®¿é—®ï¼ˆLuaSQLï¼‰</h1>
<h3 id="22.1-%E6%A6%82%E8%BF%B0" tabindex="-1">22.1 æ¦‚è¿°</h3>
<ol>
<li>æœ¬æ–‡ä¸»è¦ä¸ºå¤§å®¶ä»‹ç» Lua æ•°æ®åº“çš„æ“ä½œåº“ï¼šLuaSQLã€‚ä»–æ˜¯å¼€æºçš„ï¼Œæ”¯æŒçš„æ•°æ®åº“æœ‰ï¼šODBC, ADO, Oracle, MySQL, SQLite å’Œ PostgreSQLã€‚</li>
<li>æœ¬æ–‡ä»‹ç»MySQLçš„æ•°æ®åº“è¿æ¥ã€‚</li>
</ol>
<h3 id="22.2-%E5%AE%89%E8%A3%85" tabindex="-1">22.2 å®‰è£…</h3>
<ol>
<li>LuaSQL å¯ä»¥ä½¿ç”¨ <a href="https://luarocks.org/">LuaRocks</a> æ¥å®‰è£…å¯ä»¥æ ¹æ®éœ€è¦å®‰è£…ä½ éœ€è¦çš„æ•°æ®åº“é©±åŠ¨ã€‚<br>
LuaRocks å®‰è£…æ–¹æ³•ï¼š</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget http://luarocks.org/releases/luarocks-2.2.1.tar.gz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar zxpf luarocks-2.2.1.tar.gz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> luarocks-2.2.1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure; <span class="built_in">sudo</span> make bootstrap</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">sudo</span> luarocks install luasocket</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">lua</span></span><br><span class="line">Lua 5.3.0 Copyright (C) 1994-2015 Lua.org, PUC-Rio</span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">require <span class="string">&quot;socket&quot;</span></span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>
<p>Window ä¸‹å®‰è£… LuaRocksï¼š<a href="https://github.com/keplerproject/luarocks/wiki/Installation-instructions-for-Windows">https://github.com/keplerproject/luarocks/wiki/Installation-instructions-for-Windows</a></p>
</li>
<li>
<p>å®‰è£…ä¸åŒæ•°æ®åº“é©±åŠ¨ï¼š</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">luarocks install luasql-sqlite3</span><br><span class="line">luarocks install luasql-postgres</span><br><span class="line">luarocks install luasql-mysql</span><br><span class="line">luarocks install luasql-sqlite</span><br><span class="line">luarocks install luasql-odbc</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>ä¹Ÿå¯ä»¥ä½¿ç”¨æºç å®‰è£…æ–¹å¼ï¼ŒLua Github æºç åœ°å€ï¼š<a href="https://github.com/keplerproject/luasql">https://github.com/keplerproject/luasql</a></li>
</ol>
<h3 id="22.3-%E5%AE%9E%E4%BE%8B" tabindex="-1">22.3 å®ä¾‹</h3>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">&quot;luasql.mysql&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--åˆ›å»ºç¯å¢ƒå¯¹è±¡</span></span><br><span class="line">env = luasql.mysql()</span><br><span class="line"></span><br><span class="line"><span class="comment">--è¿æ¥æ•°æ®åº“</span></span><br><span class="line">conn = env:connect(<span class="string">&quot;æ•°æ®åº“å&quot;</span>,<span class="string">&quot;ç”¨æˆ·å&quot;</span>,<span class="string">&quot;å¯†ç &quot;</span>,<span class="string">&quot;IPåœ°å€&quot;</span>,ç«¯å£)</span><br><span class="line"></span><br><span class="line"><span class="comment">--è®¾ç½®æ•°æ®åº“çš„ç¼–ç æ ¼å¼</span></span><br><span class="line">conn:<span class="built_in">execute</span><span class="string">&quot;SET NAMES UTF8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ‰§è¡Œæ•°æ®åº“æ“ä½œ</span></span><br><span class="line">cur = conn:<span class="built_in">execute</span>(<span class="string">&quot;select * from role&quot;</span>)</span><br><span class="line"></span><br><span class="line">row = cur:fetch(&#123;&#125;,<span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--æ–‡ä»¶å¯¹è±¡çš„åˆ›å»º</span></span><br><span class="line">file = <span class="built_in">io</span>.<span class="built_in">open</span>(<span class="string">&quot;role.txt&quot;</span>,<span class="string">&quot;w+&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> row <span class="keyword">do</span></span><br><span class="line">    var = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%d %s\n&quot;</span>, row.id, row.name)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(var)</span><br><span class="line"></span><br><span class="line">    file:<span class="built_in">write</span>(var)</span><br><span class="line"></span><br><span class="line">    row = cur:fetch(row,<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">file:<span class="built_in">close</span>()  <span class="comment">--å…³é—­æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">conn:<span class="built_in">close</span>()  <span class="comment">--å…³é—­æ•°æ®åº“è¿æ¥</span></span><br><span class="line">env:<span class="built_in">close</span>()   <span class="comment">--å…³é—­æ•°æ®åº“ç¯å¢ƒ</span></span><br></pre></td></tr></table></figure>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
      <tags>
        <tag>lua</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoæ–‡ç« å¤šäº†å¦‚ä½•ç®¡ç†</title>
    <url>/2024/08/13/hexo%E6%96%87%E7%AB%A0%E5%A4%9A%E4%BA%86%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<p>æ¯æ¬¡é€šè¿‡hexo new â€˜xxxâ€™åˆ›å»ºæ–°çš„åšæ–‡æ—¶ï¼Œéƒ½ä¼šå°†ç”Ÿæˆçš„.mdæ–‡ä»¶æ”¾ç½®åœ¨_postæ–‡ä»¶å¤¹ä¸‹ï¼Œéšç€æ–‡ç« æ•°çš„å¢å¤šï¼Œ_postæ–‡ä»¶å¤¹ä¹Ÿä¼šè¶Šæ¥è¶Šæ··ä¹±ã€‚</p>
<span id="more"></span>
<p>å¯ä»¥é€šè¿‡é…ç½®å…¨å±€é…ç½®æ–‡ä»¶_config.ymlæ¥ä¾æ®å¹´æœˆè¿›è¡Œåˆ†é…ï¼Œåœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾new_post_name:å¹¶ä¿®æ”¹ä¸º</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">new_post_name:</span> <span class="string">:year/:month/:title.md</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹åï¼Œæ¯æ¬¡åˆ›å»ºçš„æ–‡ç« å°†ä¼šä»¥ç”Ÿæˆçš„å¹´æœˆè¿›è¡Œç®¡ç†ã€‚</p>
<ul>
<li>å¦‚æœæƒ³ç›´æ¥è¿›è¡Œåˆ†ç±»åˆ›å»ºï¼Œå¯ä»¥é€‰æ‹©é‡‡ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œåˆ›å»ºã€‚</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo new post -p /æ–‡ä»¶å¤¹å/æ–‡ä»¶å.md</span><br></pre></td></tr></table></figure>
<p>å¦‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å<br>
<img src="/2024/08/13/hexo%E6%96%87%E7%AB%A0%E5%A4%9A%E4%BA%86%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86/%E5%91%BD%E4%BB%A4.jpg" alt><br>
æ–‡ç« å°†ä¼šè¢«åˆ›å»ºåœ¨QFrameworkä¸­<br>
<img src="/2024/08/13/hexo%E6%96%87%E7%AB%A0%E5%A4%9A%E4%BA%86%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86/%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84.jpg" alt><br>
<img src="/2024/08/13/hexo%E6%96%87%E7%AB%A0%E5%A4%9A%E4%BA%86%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86/%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%841.jpg" alt></p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">
]]></content>
  </entry>
</search>
